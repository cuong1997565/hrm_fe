{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/plan/Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/plan/Form.vue","mtime":1538377839386},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport children from './Form_sub';\nimport { mapGetters, mapActions } from 'vuex'; // import { map, chain } from 'lodash'\n\nexport default {\n  name: 'PlanForm',\n  components: {\n    children: children\n  },\n  computed: _objectSpread({}, mapGetters(['isFetchingApi']), {\n    isCreate: function isCreate() {\n      return this.type === 'create';\n    }\n  }),\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataPlan: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      range: 1,\n      menu: null,\n      menu1: null,\n      plan: {\n        title: '',\n        content: '',\n        date_start: '',\n        date_end: '',\n        departments: []\n      },\n      departmentPosition: []\n    };\n  },\n  watch: {\n    menu: function menu(val) {\n      var _this = this;\n\n      val && this.$nextTick(function () {\n        return _this.$refs.picker.activePicker = 'YEAR';\n      });\n    }\n  },\n  methods: _objectSpread({}, mapActions(['fetchApi']), {\n    setInitData: function setInitData() {\n      var dataPlan = _objectSpread({}, this.dataPlan);\n\n      this.plan = _objectSpread({}, this.plan, dataPlan);\n    },\n    Add: function Add() {\n      this.range += 1;\n    },\n    Remove: function Remove(index) {\n      if (index !== 0) {\n        document.getElementById(index).remove();\n      }\n    },\n    validateBeforeSubmit: function validateBeforeSubmit() {\n      var _this2 = this;\n\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          _this2.plan.departments = _this2.departmentPosition;\n\n          var submitData = _objectSpread({}, _this2.plan);\n\n          _this2.$emit('submit', submitData);\n        } else {\n          _this2.$store.dispatch('showNotify', {\n            text: _this2.$t('alert.invalid'),\n            color: 'warning'\n          });\n        }\n      });\n    },\n    positionAndDepartment: function positionAndDepartment(updated, index) {\n      this.departmentPosition[index] = updated;\n    },\n    save: function save(date) {\n      this.$refs.menu.save(date);\n    }\n  }),\n  created: function created() {\n    !!this.dataPlan && this.setInitData();\n  }\n};",{"version":3,"sources":["Form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA,OAAA,QAAA,MAAA,YAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA,C,CACA;;AACA,eAAA;AACA,QAAA,UADA;AAEA,cAAA;AACA;AADA,GAFA;AAKA,8BACA,WAAA,CAAA,eAAA,CAAA,CADA;AAEA,YAFA,sBAEA;AACA,aAAA,KAAA,IAAA,KAAA,QAAA;AACA;AAJA,IALA;AAWA,SAAA;AACA,UAAA;AACA,YAAA,MADA;AAEA,eAAA;AAFA,KADA;AAKA,cAAA;AACA,YAAA,MADA;AAEA,eAAA,oBAAA;AACA,eAAA,EAAA;AACA;AAJA;AALA,GAXA;AAuBA,MAvBA,kBAuBA;AACA,WAAA;AACA,aAAA,CADA;AAEA,YAAA,IAFA;AAGA,aAAA,IAHA;AAIA,YAAA;AACA,eAAA,EADA;AAEA,iBAAA,EAFA;AAGA,oBAAA,EAHA;AAIA,kBAAA,EAJA;AAKA,qBAAA;AALA,OAJA;AAWA,0BAAA;AAXA,KAAA;AAaA,GArCA;AAsCA,SAAA;AACA,QADA,gBACA,GADA,EACA;AAAA;;AACA,aAAA,KAAA,SAAA,CAAA;AAAA,eAAA,MAAA,KAAA,CAAA,MAAA,CAAA,YAAA,GAAA,MAAA;AAAA,OAAA,CAAA;AACA;AAHA,GAtCA;AA2CA,6BACA,WAAA,CAAA,UAAA,CAAA,CADA;AAEA,eAFA,yBAEA;AACA,UAAA,6BAAA,KAAA,QAAA,CAAA;;AACA,WAAA,IAAA,qBAAA,KAAA,IAAA,EAAA,QAAA;AACA,KALA;AAMA,OANA,iBAMA;AACA,WAAA,KAAA,IAAA,CAAA;AACA,KARA;AASA,UATA,kBASA,KATA,EASA;AACA,UAAA,UAAA,CAAA,EAAA;AACA,iBAAA,cAAA,CAAA,KAAA,EAAA,MAAA;AACA;AACA,KAbA;AAcA,wBAdA,kCAcA;AAAA;;AACA,WAAA,UAAA,CAAA,WAAA,GAAA,IAAA,CAAA,kBAAA;AACA,YAAA,MAAA,EAAA;AACA,iBAAA,IAAA,CAAA,WAAA,GAAA,OAAA,kBAAA;;AACA,cAAA,+BAAA,OAAA,IAAA,CAAA;;AACA,iBAAA,KAAA,CAAA,QAAA,EAAA,UAAA;AACA,SAJA,MAIA;AACA,iBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,kBAAA,OAAA,EAAA,CAAA,eAAA,CADA;AAEA,mBAAA;AAFA,WAAA;AAIA;AACA,OAXA;AAYA,KA3BA;AA4BA,yBA5BA,iCA4BA,OA5BA,EA4BA,KA5BA,EA4BA;AACA,WAAA,kBAAA,CAAA,KAAA,IAAA,OAAA;AACA,KA9BA;AA+BA,QA/BA,gBA+BA,IA/BA,EA+BA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA;AAjCA,IA3CA;AA8EA,SA9EA,qBA8EA;AACA,KAAA,CAAA,KAAA,QAAA,IAAA,KAAA,WAAA,EAAA;AACA;AAhFA,CAAA","sourcesContent":["<template>\n    <v-form @submit.prevent=\"validateBeforeSubmit\">\n        <v-container fluid>\n            <v-layout row wrap>\n            <v-flex xs6>\n                  <v-text-field\n                    :error-messages=\"errors.has('title') ? errors.collect('title') : []\"\n                    v-validate=\"'required|min:3'\"\n                    :data-vv-as=\"$t('label.title')\"\n                    name=\"title\"\n                    :label=\"$t('label.title') + ' *'\"\n                    v-model=\"plan.title\">\n                  </v-text-field>\n            </v-flex>\n\n            <v-flex xs6>\n                <v-text-field\n                    :error-messages=\"errors.has('content') ? errors.collect('content') : []\"\n                    v-validate=\"'required|min:3'\"\n                    :data-vv-as=\"$t('label.content')\"\n                    name=\"content\"\n                    :label=\"$t('label.content') + ' *'\"\n                    v-model=\"plan.content\">\n                  </v-text-field>\n            </v-flex>\n          </v-layout>\n\n              <v-layout row wrap>\n                <v-flex xs6>\n                   <!-- birth_day -->\n        <template>\n                <v-menu\n                  ref=\"menu\"\n                  :close-on-content-click=\"false\"\n                  v-model=\"menu\"\n                  :nudge-right=\"40\"\n                  lazy transition=\"scale-transition\"\n                  offset-y\n                  full-width\n                  min-width=\"290px\">\n                  <v-text-field\n                  slot=\"activator\"\n                  v-model=\"plan.date_start\"\n                  label=\"Ngày sinh\"\n                  readonly>\n                  </v-text-field>\n\n                  <v-date-picker\n                  ref=\"picker\"\n                  v-model=\"plan.date_start\"\n                  :max=\"new Date().toISOString().substr(0, 10)\"\n                  min=\"1950-01-01\"\n                  @change=\"save\"> </v-date-picker> </v-menu>\n                </template>\n                </v-flex>\n\n                <v-flex xs6>\n                <template>\n                  <v-menu\n                  ref=\"menu\"\n                  :close-on-content-click=\"false\"\n                  v-model=\"menu1\"\n                  :nudge-right=\"40\"\n                  lazy transition=\"scale-transition\"\n                  offset-y full-width min-width=\"290px\">\n                    <v-text-field slot=\"activator\" v-model=\"plan.date_end\" label=\"ngày kết thúc\" readonly >\n                    </v-text-field>\n\n                    <v-date-picker\n                    ref=\"picker\"\n                    v-model=\"plan.date_end\"\n                    :max=\"new Date().toISOString().substr(0, 10)\"\n                    min=\"1950-01-01\"\n                    @change=\"save\">\n                    </v-date-picker>\n                  </v-menu>\n                </template>\n                </v-flex>\n        </v-layout>\n\n        <v-layout row wrap>\n            <v-flex md-12>\n          <!-- branch,department,position -->\n          <h3>Chi nhánh, phòng ban, vị trí\n            <v-btn class=\"mr-3\"\n            icon color=\"primary\"\n            @click=\"Add\">\n            <v-icon>add</v-icon> </v-btn> </h3>\n            <!-- form sub -->\n            <children\n            :id=\"index\"\n            :key=\"index\"\n            :plan=\"plan\"\n            v-for=\"(n, index) in range\"\n            v-on:positionAndDepartment=\"positionAndDepartment($event, index)\"\n            @delete=\"Remove(index)\"> </children> </v-flex>\n        </v-layout>\n\n    <v-flex xs12 text-xs-center>\n      <v-btn\n      :loading=\"isFetchingApi\"\n      :disabled=\"isFetchingApi\"\n      color=\"primary\"\n      type=\"submit\">\n        <template v-if=\"isCreate\">\n          <v-icon left>add</v-icon> {{$t('control.create')}}\n        </template>\n        <template v-else>\n          <v-icon left>save</v-icon> {{$t('control.save')}}\n        </template>\n        </v-btn>\n    </v-flex>\n    </v-container>\n    </v-form>\n</template>\n<script>\nimport children from './Form_sub'\nimport { mapGetters, mapActions } from 'vuex'\n// import { map, chain } from 'lodash'\nexport default{\n  name: 'PlanForm',\n  components: {\n    children\n  },\n  computed: {\n    ...mapGetters(['isFetchingApi']),\n    isCreate () {\n      return this.type === 'create'\n    }\n  },\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataPlan: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  data () {\n    return {\n      range: 1,\n      menu: null,\n      menu1: null,\n      plan: {\n        title: '',\n        content: '',\n        date_start: '',\n        date_end: '',\n        departments: []\n      },\n      departmentPosition: []\n    }\n  },\n  watch: {\n    menu (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    }\n  },\n  methods: {\n    ...mapActions(['fetchApi']),\n    setInitData () {\n      let dataPlan = { ...this.dataPlan }\n      this.plan = { ...this.plan, ...dataPlan }\n    },\n    Add () {\n      this.range += 1\n    },\n    Remove (index) {\n      if (index !== 0) {\n        document.getElementById(index).remove()\n      }\n    },\n    validateBeforeSubmit () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          this.plan.departments = this.departmentPosition\n          let submitData = { ...this.plan }\n          this.$emit('submit', submitData)\n        } else {\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.invalid'),\n            color: 'warning'\n          })\n        }\n      })\n    },\n    positionAndDepartment (updated, index) {\n      this.departmentPosition[index] = updated\n    },\n    save (date) {\n      this.$refs.menu.save(date)\n    }\n  },\n  created () {\n    !!this.dataPlan && this.setInitData()\n  }\n}\n</script>\n"],"sourceRoot":"src/views/plan"}]}