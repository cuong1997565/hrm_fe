{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/branch/Listting.vue?vue&type=style&index=0&id=443306cf&scoped=true&lang=css&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/branch/Listting.vue","mtime":1538377839386},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/css-loader/index.js","mtime":1534394480905},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1536410629618},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/postcss-loader/lib/index.js","mtime":1534394481185},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1534394480737},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":1536410629618}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nthead{\n  border-top: 1px solid red !important;\n}\nth{\n  display: none;\n}\n",{"version":3,"sources":["Listting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA","file":"Listting.vue","sourceRoot":"src/views/branch","sourcesContent":["<template>\n  <v-layout ref=\"laylout\" column fill-height>\n    <v-flex xs12 class=\"border-e0-top\">\n      <data-view\n      :name=\"dataViewName\"\n      api-url=\"branches\"\n      v-if=\"dataViewHeight\"\n      :viewHeight=\"dataViewHeight\"\n      :params=\"params\"\n      :ref=\"dataViewName\"\n      >\n      <template slot-scope=\"{items}\">\n        <v-list subheader style=\"margin-left:15px\">\n          <v-toolbar dense color=\"white\" flat>\n            <v-spacer></v-spacer>\n            <h3>Danh sách chi nhánh</h3>\n            <v-btn v-if=\"canAccess('branch.create')\"\n            class=\"mr-0\" icon color=\"primary\"\n            @click=\"$router.push({name: 'branch-create'})\">\n            <v-icon>add</v-icon>\n          </v-btn>\n          <v-spacer></v-spacer>\n\n        </v-toolbar>\n        <v-data-table\n        :items=\"items.data\"\n        hide-actions\n        expand\n        :headers=\"title\"\n        class=\"elevation-1\"\n        >\n        <template slot=\"items\" slot-scope=\"props\">\n          <tr>\n            <td style=\"text-transform: capitalize\">{{ props.item.name }}\n            </td>\n            <td style=\"text-transform: capitalize\">{{ props.item.email }}</td>\n            <td style=\"text-transform: capitalize\">{{ props.item.tax_number }}</td>\n            <td style=\"text-transform: capitalize\">{{ props.item.address }}</td>\n            <td style=\"text-transform: capitalize\">{{ props.item.status_txt }}</td>\n            {{branchDetail}}\n            <td id=\"action\">\n             <v-icon v-if=\"canAccess('branch.update')\" class=\"mr-6\" @click=\"$router.push({name: 'branch-edit', params: {id: props.item.id}})\" color=\"green\"> edit</v-icon>\n             <v-icon style=\"margin-left:10px\" v-if=\"canAccess('branch.delete')\" icon @click=\"removeConfirm(props.item.id)\" color=\"red\"> delete </v-icon>\n           </td>\n         </tr>\n       </template>\n     </v-data-table>\n     <dialog-confirm v-model=\"dialogDelete\" @input=\"remove()\" />\n   </v-list>\n </template>\n</data-view>\n</v-flex>\n</v-layout>\n</template>\n<script>\nimport DialogConfirm from '@/components/DialogConfirm'\nimport DataView from '@/components/DataView/DataView'\nimport NoData from '@/components/NoData'\nimport { mapActions } from 'vuex'\nexport default {\n  name: 'BranchListting',\n  components: {\n    DataView,\n    NoData,\n    DialogConfirm\n  },\n  props: {\n    type: {\n      type: String,\n      default: 'index'\n    }\n  },\n  data: () => ({\n    dialogDelete: false,\n    idBranch: null,\n    title: [\n      { text: 'Tên chi nhánh', sortable: false },\n      { text: 'Email', sortable: false },\n      { text: 'Mã sô thuế', sortable: false },\n      { text: 'Địa chỉ', sortable: false },\n      { text: 'Trạng thái', sortable: false },\n      { text: 'Hành động', sortable: false }\n    ],\n    dataViewHeight: 0,\n    dataViewName: 'branch',\n    params: {\n      q: ''\n    }\n  }),\n  computed: {\n    isIndex () {\n      return this.type === 'index'\n    }\n  },\n  methods: {\n    ...mapActions(['setMiniDrawer']),\n    ...mapActions('Branch', ['getBranchs', 'deleteBranch']),\n    ...mapActions(['showNotify', 'setMiniDrawer']),\n    branchDetail (branch) {\n      this.getBranchs({ branchId: branch.id, params: { include: 'branch' } })\n      this.$router.push({ name: 'branch-detail', params: { id: branch.id } })\n    },\n    removeConfirm (id) {\n      this.idBranch = id\n      this.dialogDelete = true\n    },\n    remove (confirm) {\n      if (confirm) {\n        this.deleteBranch({\n          id: this.idBranch,\n          cb: (response) => {\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.success'),\n              color: 'success'\n            })\n            this.dialogDelete = false\n            this.FetchSetting()\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    }\n  },\n  mounted () {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 49\n    let query = { ...this.$route.query }\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(() => {\n        this.$refs[this.dataViewName].$emit('reload')\n      })\n      delete query.reload\n      this.$router.replace({\n        query: query\n      })\n    }\n  }\n}\n</script>\n<style scoped>\nthead{\n  border-top: 1px solid red !important;\n}\nth{\n  display: none;\n}\n</style>\n"]}]}