{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/candidate/Listting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/candidate/Listting.vue","mtime":1540539172429},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { debounce } from 'lodash';\nimport DialogConfirm from '@/components/DialogConfirm';\nimport DataView from '@/components/DataView/DataView';\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n  name: 'ContractListting',\n  props: {\n    isMini: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    DataView: DataView,\n    DialogConfirm: DialogConfirm\n  },\n  data: function data() {\n    return {\n      dialogDelete: false,\n      dataViewHeight: 0,\n      dialog: false,\n      dataViewName: 'candidate',\n      idCandidate: null,\n      dialogDetail: false,\n      plans: [],\n      positions: [],\n      dateApply: false,\n      timeInterview: false,\n      isBoolean: false,\n      valuePlan: '',\n      status: [{\n        'id': 0,\n        'name': 'Mới'\n      }, {\n        'id': 1,\n        'name': 'Chờ kết quả'\n      }, {\n        'id': 2,\n        'name': 'Trượt'\n      }, {\n        'id': 3,\n        'name': 'Đỗ'\n      }, {\n        'id': 4,\n        'name': 'Danh sách đen'\n      }],\n      params: {\n        q: '',\n        planId: '',\n        status: '',\n        positionId: '',\n        dateApply: '',\n        timeInterview: ''\n      }\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['isFetchingApi'])),\n  methods: _objectSpread({}, mapActions(['fetchApi']), mapActions('Dataview', ['removeDataviewEntry']), mapActions('Candidate', ['deleteCandidate', 'getCandidate']), {\n    // submit time date_apply\n    submitDateApply: function submitDateApply() {\n      this.$refs.dateApply.save(this.params.dateApply);\n      this.changeSearch();\n    },\n    // submit time interview\n    submitTimeInterview: function submitTimeInterview() {\n      this.$refs.timeInterview.save(this.params.timeInterview);\n      this.changeSearch();\n    },\n    // open sereach\n    listSreach: function listSreach() {\n      if (this.isBoolean === false) {\n        this.isBoolean = true;\n        this.dataViewHeight = this.$refs.laylout.clientHeight - 152;\n      } else {\n        this.isBoolean = false;\n        this.dataViewHeight = this.$refs.laylout.clientHeight - 113;\n      }\n    },\n    // detail candidate\n    candidateDetail: function candidateDetail(candidate) {\n      this.getCandidate({\n        candidateId: candidate.id\n      });\n      this.filter();\n    },\n    // detailPlan\n    detailPlan: function detailPlan(item) {\n      this.valuePlan = item;\n      this.dialogDetail = true;\n    },\n    closeDialog: function closeDialog() {\n      this.dialogDetail = false;\n    },\n    // edit candidate\n    editCandidate: function editCandidate(id) {\n      this.getCandidate({\n        candidateId: id\n      });\n      this.$router.push({\n        name: 'candidate-edit',\n        params: {\n          id: id\n        }\n      });\n    },\n    removeConfirm: function removeConfirm(id) {\n      this.idCandidate = id;\n      this.dialogDelete = true;\n      console.log('id :', this.idCandidate);\n    },\n    remove: function remove(confirm) {\n      var _this = this;\n\n      if (confirm) {\n        this.deleteCandidate({\n          id: this.idCandidate,\n          cb: function cb(response) {\n            _this.removeDataviewEntry({\n              name: 'candidate',\n              data: _this.candidateDetail,\n              key: 'id'\n            });\n\n            _this.$store.dispatch('showNotify', {\n              text: _this.$t('alert.success'),\n              color: 'success'\n            });\n\n            _this.dialogDelete = false;\n\n            _this.$refs[_this.dataViewName].$emit('reload');\n          },\n          error: function error(_error) {\n            if (_error.status === 404) {\n              _this.$store.dispatch('showNotify', {\n                text: _this.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    },\n    // sreach\n    changeSearch: debounce(function () {\n      this.filter();\n    }, 500),\n    filter: function filter() {\n      this.$refs[this.dataViewName].$emit('reload');\n    }\n  }),\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.fetchApi({\n      url: 'plans',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: function success(response) {\n        _this2.plans = response.data;\n      }\n    });\n    this.fetchApi({\n      url: 'positions',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: function success(response) {\n        _this2.positions = response.data;\n      }\n    });\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 113;\n\n    var query = _objectSpread({}, this.$route.query);\n\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(function () {\n        _this2.$refs[_this2.dataViewName].$emit('reload');\n      });\n      delete query.reload;\n      this.$router.replace({\n        query: query\n      });\n    }\n  }\n};",{"version":3,"sources":["Listting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6WA,SAAA,QAAA,QAAA,QAAA;AACA,OAAA,aAAA,MAAA,4BAAA;AACA,OAAA,QAAA,MAAA,gCAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,QAAA,kBADA;AAEA,SAAA;AACA,YAAA;AACA,YAAA,OADA;AAEA,eAAA;AAFA;AADA,GAFA;AAQA,cAAA;AACA,sBADA;AAEA;AAFA,GARA;AAYA,QAAA;AAAA,WAAA;AACA,oBAAA,KADA;AAEA,sBAAA,CAFA;AAGA,cAAA,KAHA;AAIA,oBAAA,WAJA;AAKA,mBAAA,IALA;AAMA,oBAAA,KANA;AAOA,aAAA,EAPA;AAQA,iBAAA,EARA;AASA,iBAAA,KATA;AAUA,qBAAA,KAVA;AAWA,iBAAA,KAXA;AAYA,iBAAA,EAZA;AAaA,cAAA,CACA;AACA,cAAA,CADA;AAEA,gBAAA;AAFA,OADA,EAKA;AACA,cAAA,CADA;AAEA,gBAAA;AAFA,OALA,EASA;AACA,cAAA,CADA;AAEA,gBAAA;AAFA,OATA,EAaA;AACA,cAAA,CADA;AAEA,gBAAA;AAFA,OAbA,EAiBA;AACA,cAAA,CADA;AAEA,gBAAA;AAFA,OAjBA,CAbA;AAmCA,cAAA;AACA,WAAA,EADA;AAEA,gBAAA,EAFA;AAGA,gBAAA,EAHA;AAIA,oBAAA,EAJA;AAKA,mBAAA,EALA;AAMA,uBAAA;AANA;AAnCA,KAAA;AAAA,GAZA;AAwDA,8BACA,WAAA,CAAA,eAAA,CAAA,CADA,CAxDA;AA2DA,6BACA,WAAA,CAAA,UAAA,CAAA,CADA,EAEA,WAAA,UAAA,EAAA,CAAA,qBAAA,CAAA,CAFA,EAGA,WAAA,WAAA,EAAA,CAAA,iBAAA,EAAA,cAAA,CAAA,CAHA;AAIA;AACA,mBALA,6BAKA;AACA,WAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA,SAAA;AACA,WAAA,YAAA;AACA,KARA;AASA;AACA,uBAVA,iCAUA;AACA,WAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA,aAAA;AACA,WAAA,YAAA;AACA,KAbA;AAcA;AACA,cAfA,wBAeA;AACA,UAAA,KAAA,SAAA,KAAA,KAAA,EAAA;AACA,aAAA,SAAA,GAAA,IAAA;AACA,aAAA,cAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,YAAA,GAAA,GAAA;AACA,OAHA,MAGA;AACA,aAAA,SAAA,GAAA,KAAA;AACA,aAAA,cAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,YAAA,GAAA,GAAA;AACA;AACA,KAvBA;AAwBA;AACA,mBAzBA,2BAyBA,SAzBA,EAyBA;AACA,WAAA,YAAA,CAAA;AAAA,qBAAA,UAAA;AAAA,OAAA;AACA,WAAA,MAAA;AACA,KA5BA;AA6BA;AACA,cA9BA,sBA8BA,IA9BA,EA8BA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,KAjCA;AAkCA,eAlCA,yBAkCA;AACA,WAAA,YAAA,GAAA,KAAA;AACA,KApCA;AAqCA;AACA,iBAtCA,yBAsCA,EAtCA,EAsCA;AACA,WAAA,YAAA,CAAA;AAAA,qBAAA;AAAA,OAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,gBAAA;AAAA,gBAAA;AAAA,cAAA;AAAA;AAAA,OAAA;AACA,KAzCA;AA0CA,iBA1CA,yBA0CA,EA1CA,EA0CA;AACA,WAAA,WAAA,GAAA,EAAA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,cAAA,GAAA,CAAA,MAAA,EAAA,KAAA,WAAA;AACA,KA9CA;AA+CA,UA/CA,kBA+CA,OA/CA,EA+CA;AAAA;;AACA,UAAA,OAAA,EAAA;AACA,aAAA,eAAA,CAAA;AACA,cAAA,KAAA,WADA;AAEA,cAAA,YAAA,QAAA,EAAA;AACA,kBAAA,mBAAA,CAAA;AACA,oBAAA,WADA;AAEA,oBAAA,MAAA,eAFA;AAGA,mBAAA;AAHA,aAAA;;AAKA,kBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,oBAAA,MAAA,EAAA,CAAA,eAAA,CADA;AAEA,qBAAA;AAFA,aAAA;;AAIA,kBAAA,YAAA,GAAA,KAAA;;AACA,kBAAA,KAAA,CAAA,MAAA,YAAA,EAAA,KAAA,CAAA,QAAA;AACA,WAdA;AAeA,iBAAA,eAAA,MAAA,EAAA;AACA,gBAAA,OAAA,MAAA,KAAA,GAAA,EAAA;AACA,oBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,sBAAA,MAAA,EAAA,CAAA,iBAAA,CADA;AAEA,uBAAA;AAFA,eAAA;AAIA;AACA;AAtBA,SAAA;AAwBA;AACA,KA1EA;AA2EA;AACA,kBAAA,SAAA,YAAA;AACA,WAAA,MAAA;AACA,KAFA,EAEA,GAFA,CA5EA;AA+EA,UA/EA,oBA+EA;AACA,WAAA,KAAA,CAAA,KAAA,YAAA,EAAA,KAAA,CAAA,QAAA;AACA;AAjFA,IA3DA;AA8IA,SA9IA,qBA8IA;AAAA;;AACA,SAAA,QAAA,CAAA;AACA,WAAA,OADA;AAEA,cAAA,KAFA;AAGA,cAAA;AACA,eAAA,CAAA;AADA,OAHA;AAMA,eAAA,iBAAA,QAAA,EAAA;AACA,eAAA,KAAA,GAAA,SAAA,IAAA;AACA;AARA,KAAA;AAUA,SAAA,QAAA,CAAA;AACA,WAAA,WADA;AAEA,cAAA,KAFA;AAGA,cAAA;AACA,eAAA,CAAA;AADA,OAHA;AAMA,eAAA,iBAAA,QAAA,EAAA;AACA,eAAA,SAAA,GAAA,SAAA,IAAA;AACA;AARA,KAAA;AAUA,SAAA,cAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,YAAA,GAAA,GAAA;;AACA,QAAA,0BAAA,KAAA,MAAA,CAAA,KAAA,CAAA;;AACA,QAAA,MAAA,cAAA,CAAA,QAAA,CAAA,EAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,eAAA,KAAA,CAAA,OAAA,YAAA,EAAA,KAAA,CAAA,QAAA;AACA,OAFA;AAGA,aAAA,MAAA,MAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA;AACA,eAAA;AADA,OAAA;AAGA;AACA;AA9KA,CAAA","sourcesContent":["<template>\n  <v-layout ref=\"laylout\" column fill-height>\n    <div ref=\"header\">\n      <v-toolbar height=\"50px\" color=\"white\" flat>\n        <v-layout row wrap class=\"pt-3\">\n          <v-flex xs1 :class=\"isMini && 'max-width-col-2'\">\n            <v-tooltip bottom>\n              <v-btn slot=\"activator\" v-if=\"canAccess('candidate.create')\" class=\"mr-3 mt-3\" icon color=\"primary\" @click=\"$router.push({name: 'candidate-create'})\">\n                <v-icon>add</v-icon>\n              </v-btn>\n              <span>Thêm mới</span>\n            </v-tooltip>\n          </v-flex>\n          <v-flex xs5 class=\"mt-1\" :class=\"isMini && 'full-flex-basic full-width-col-10'\">\n            <v-tooltip bottom>\n             <v-text-field\n             hide-details\n             slot=\"activator\"\n             single-line\n             placeholder=\"Nhập tên, sđt, email ...\"\n             @keyup=\"changeSearch\"\n             v-model=\"params.q\"\n             @click:clear=\"changeSearch\"\n             clearable\n             ></v-text-field>\n             <span>Nhập tên, sđt, email ...</span>\n            </v-tooltip>\n          </v-flex>\n           <v-flex xs5 class=\"mt-1 pl-3\" :class=\"isMini && 'd-none'\">\n            <v-tooltip bottom>\n            <v-autocomplete\n            slot=\"activator\"\n            :items=\"plans\"\n            item-text=\"title\"\n            clearable\n            item-value=\"id\"\n            v-model=\"params.planId\"\n            @change=\"changeSearch\"\n            @click:clear=\"changeSearch\"\n            placeholder=\"Chọn kế hoạch tuyển dụng\"\n            ></v-autocomplete>\n            <span>Kế hoạch tuyển dụng</span>\n            </v-tooltip>\n          </v-flex>\n             <v-flex xs1  :class=\"isMini && 'd-none'\">\n                   <v-tooltip bottom  v-if=\"isBoolean == false\">\n                      <v-btn slot=\"activator\"\n                      class=\"mr-3 mt-3\" icon color=\"primary\"\n                      @click=\"listSreach\"\n                      >\n                      <v-icon>list</v-icon\n                        ></v-btn>\n                        <span>Lọc nhiều hơn ...</span>\n                    </v-tooltip>\n                     <v-tooltip bottom  v-if=\"isBoolean == true\">\n                      <v-btn slot=\"activator\"\n                      class=\"mr-3 mt-3\" icon color=\"primary\"\n                      @click=\"listSreach\"\n                      >\n                      <v-icon>close</v-icon\n                        ></v-btn>\n                        <span>Lọc ít hơn ...</span>\n                    </v-tooltip>\n              </v-flex>\n        </v-layout>\n    </v-toolbar>\n       <v-toolbar height=\"20\" color=\"white\" v-if=\"isBoolean == false\" flat :class=\"isMini && 'd-none'\" class=\"pb-3\">\n       <v-layout slot=\"extension\" v-if=\"!isMini\" class=\"pt-2 pb-2\">\n          <v-flex sm1 class=\"text-bold text-uppercase\">\n            #\n          </v-flex>\n          <v-flex sm3 class=\"text-bold text-uppercase\">\n            Thông tin ứng viên\n          </v-flex>\n          <v-flex sm3 class=\"text-bold text-uppercase\">\n            Thời gian\n          </v-flex>\n          <v-flex sm4 class=\"text-bold text-uppercase\">\n           Kế hoạch\n         </v-flex>\n         <v-flex sm1 class=\"text-bold text-uppercase mr-3\">\n          Hành động\n        </v-flex>\n      </v-layout>\n              </v-toolbar>\n   <v-toolbar height=\"50px\" color=\"white\" flat :class=\"isMini && 'd-none'\" v-if=\"isBoolean == true\">\n    <v-layout row wrap class=\"pt-2\">\n          <v-flex xs2 class=\"mt-1\" :class=\"isMini && 'd-none'\">\n            <v-tooltip bottom>\n              <v-select\n              :items=\"status\"\n              placeholder=\"trạng thái\"\n              item-text=\"name\"\n              item-value=\"id\"\n              v-model=\"params.status\"\n              @change=\"changeSearch\"\n              clearable\n              @click:clear=\"changeSearch\"\n              slot=\"activator\"\n              ></v-select>\n              <span>Chọn trạng thái</span>\n            </v-tooltip>\n          </v-flex>\n          <v-flex xs3 class=\"mt-1 ml-2\" :class=\"isMini && 'd-none'\">\n             <v-tooltip bottom>\n                  <v-autocomplete\n               slot=\"activator\"\n               :items=\"positions\"\n               item-text=\"name\"\n               clearable\n               item-value=\"id\"\n               placeholder=\"Chọn chức danh\"\n               v-model=\"params.positionId\"\n               @change=\"changeSearch\"\n               @click:clear=\"changeSearch\"\n              ></v-autocomplete>\n              <span>Chức danh</span>\n             </v-tooltip>\n          </v-flex>\n          <v-flex xs3 class=\"ml-2 pt-1\" :class=\"isMini && 'd-none'\" >\n             <v-menu\n            ref=\"dateApply\"\n            :close-on-content-click=\"false\"\n            v-model=\"dateApply\"\n            :nudge-right=\"40\"\n            :return-value.sync=\"params.dateApply\"\n            lazy\n            transition=\"scale-transition\"\n            offset-y\n            full-width\n            min-width=\"290px\"\n            >\n            <v-text-field\n            slot=\"activator\"\n            v-model=\"params.dateApply\"\n            clearable\n            @click:clear=\"changeSearch\"\n            readonly\n            placeholder=\"Nhập ngày ứng tuyển\"\n            ></v-text-field>\n            <v-date-picker  v-model=\"params.dateApply\" no-title scrollable>\n              <v-spacer></v-spacer>\n              <v-btn flat color=\"primary\" @click=\"dateApply = false\">Cancel</v-btn>\n              <v-btn flat color=\"primary\" @click=\"submitDateApply\">OK</v-btn>\n            </v-date-picker>\n          </v-menu>\n          </v-flex>\n          <v-flex xs3 class=\"ml-2 pt-1\" :class=\"isMini && 'd-none'\" >\n             <v-menu\n            ref=\"timeInterview\"\n            :close-on-content-click=\"false\"\n            v-model=\"timeInterview\"\n            :nudge-right=\"40\"\n            :return-value.sync=\"params.timeInterview\"\n            lazy\n            transition=\"scale-transition\"\n            offset-y\n            full-width\n            min-width=\"290px\"\n            >\n            <v-text-field\n            slot=\"activator\"\n            v-model=\"params.timeInterview\"\n            clearable\n            @click:clear=\"changeSearch\"\n            readonly\n            placeholder=\"Nhập thời gian phỏng vấn\"\n            ></v-text-field>\n            <v-date-picker  v-model=\"params.timeInterview\" no-title scrollable>\n              <v-spacer></v-spacer>\n              <v-btn flat color=\"primary\" @click=\"timeInterview = false\">Cancel</v-btn>\n              <v-btn flat color=\"primary\" @click=\"submitTimeInterview\">OK</v-btn>\n            </v-date-picker>\n          </v-menu>\n          </v-flex>\n    </v-layout>\n     <v-layout slot=\"extension\" v-if=\"!isMini\" class=\"pt-2 pb-2\">\n            <v-flex sm1 class=\"text-bold text-uppercase\">\n              #\n            </v-flex>\n            <v-flex sm3 class=\"text-bold text-uppercase\">\n              Thông tin ứng viên\n            </v-flex>\n            <v-flex sm3 class=\"text-bold text-uppercase\">\n              Thời gian\n            </v-flex>\n            <v-flex sm4 class=\"text-bold text-uppercase\">\n             Kế hoạch\n           </v-flex>\n           <v-flex sm1 class=\"text-bold text-uppercase mr-3\">\n            Hành động\n           </v-flex>\n        </v-layout>\n   </v-toolbar>\n  </div>\n  <v-flex xs12 class=\"border-e0-top\">\n    <data-view\n    :name=\"dataViewName\"\n    api-url=\"candidates\"\n    v-if=\"dataViewHeight\"\n    :viewHeight=\"dataViewHeight\"\n    :params=\"params\"\n    :ref=\"dataViewName\">\n    <template slot-scope=\"{items}\">\n      <v-list three-line>\n        <template v-for=\"(item, index) in items.data\">\n          <v-layout class=\"pa-2\" :key=\"index\">\n            <v-flex xs1 class=\"pl-3\" :class=\"isMini && 'd-none'\">\n              {{index + 1}}\n            </v-flex>\n            <v-flex xs3 class=\"pl-3\" :class=\"isMini && 'd-none'\">\n              <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.name\" :class=\"isMini && 'd-none'\">\n                <v-tooltip bottom>\n                    <v-flex xs12 slot=\"activator\">\n                         {{ item.name }}\n                    </v-flex>\n                    <span>Tên ứng viên</span>\n                </v-tooltip>\n              </v-list-tile-sub-title>\n              <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.email\" :class=\"isMini && 'd-none'\">\n                <v-tooltip bottom>\n                  <v-flex xs12 slot=\"activator\">\n                <v-icon size=\"16px\">email</v-icon>\n                     {{ item.email }}\n                  </v-flex>\n                  <span>Email ứng viên</span>\n                </v-tooltip>\n              </v-list-tile-sub-title>\n              <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.phone\" :class=\"isMini && 'd-none'\">\n                 <v-tooltip bottom>\n                  <v-flex xs12 slot=\"activator\">\n                <v-icon size=\"16px\">phone</v-icon>\n                      {{ item.phone }}\n                  </v-flex>\n                  <span>Số điện thoại</span>\n                </v-tooltip>\n              </v-list-tile-sub-title>\n            </v-flex>\n            <v-flex xs3 class=\"pl-2\" :class=\"isMini && 'd-none'\">\n             <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.date_apply\" :class=\"isMini && 'd-none'\">\n               <span style=\"font-size: 16px\">Ngày nộp đơn : </span>\n               {{ item.date_apply }}\n             </v-list-tile-sub-title>\n             <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.time_interview\" :class=\"isMini && 'd-none'\">\n               <span style=\"font-size: 16px\">Phỏng vấn : </span>\n               {{ item.time_interview }}\n             </v-list-tile-sub-title>\n           </v-flex>\n           <v-flex xs4 class=\"pl-1\" :class=\"isMini && 'd-none'\">\n              <div>\n                <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.plan_txt.length > 30\"\n                  :class=\"isMini && 'd-none'\" style=\"white-space: nowrap;\">\n                    <v-tooltip bottom>\n                       <v-flex xs12 slot=\"activator\">\n                          <span style=\"font-size: 16px\" v-html=\"item.plan_txt.slice(0,30) + ' ...'\"></span>\n                          <v-btn slot=\"activator\" icon @click=\"detailPlan(item)\"><v-icon color=\"blue\" size=\"16px\">fas fa-eye</v-icon></v-btn>\n                       </v-flex>\n                         <span>Kế hoạch</span>\n                    </v-tooltip>\n                </v-list-tile-sub-title>\n             <v-list-tile-sub-title class=\"text--primary\" v-else :class=\"isMini && 'd-none'\" style=\"white-space: nowrap;\">\n                  <v-tooltip bottom>\n                     <v-flex xs12 slot=\"activator\">\n                     <span style=\"font-size:16px\">{{item.plan_txt}}</span>\n                     </v-flex>\n                    <span>Kế hoạch</span>\n                  </v-tooltip>\n             </v-list-tile-sub-title>\n              </div>\n             <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.position_id\" :class=\"isMini && 'd-none'\">\n               <span style=\"font-size: 16px\">Chức danh</span>\n               <span style=\"padding-left:2px\">:</span>\n               {{ item.position_txt }}\n             </v-list-tile-sub-title>\n             <v-list-tile-sub-title class=\"text--primary\" v-if=\"item.status == 0\" :class=\"isMini && 'd-none'\">\n              <span style=\"font-size: 16px\">Trạng thái</span>\n              <span style=\"padding-left:8px;padding-right: 3px\">:</span>\n              <v-tooltip bottom>\n              <img src=\"../../assets/moi2.png\" height=\"22px\" width=\"22px\" slot=\"activator\" alt=\"\">\n                <span style=\"font-size:16px\">Trạng thái : mới</span>\n              </v-tooltip>\n            </v-list-tile-sub-title>\n            <v-list-tile-sub-title class=\"text--primary\" v-else-if=\"item.status == 1\" :class=\"isMini && 'd-none'\">\n              <span style=\"font-size: 16px\">Trạng thái</span>\n              <span style=\"padding-left:8px;padding-right: 3px\">:</span>\n              <v-tooltip bottom>\n                <img src=\"../../assets/chodoi.png\"  height=\"22px\" width=\"22px\" slot=\"activator\" alt=\"\">\n                <span style=\"font-size:16px\">Trạng thái : chờ đợi</span>\n              </v-tooltip>\n            </v-list-tile-sub-title>\n            <v-list-tile-sub-title class=\"text--primary\" v-else-if=\"item.status == 2\" :class=\"isMini && 'd-none'\">\n              <span style=\"font-size:16px\">Trạng thái</span>\n              <span style=\"padding-left:8px;padding-right: 3px\">:</span>\n              <v-tooltip bottom>\n                <img src=\"../../assets/truot.png\" height=\"22px\" slot=\"activator\" width=\"22px\" alt=\"\">\n                <span>Trạng thái : trượt</span>\n              </v-tooltip>\n            </v-list-tile-sub-title>\n            <v-list-tile-sub-title class=\"text--primary\" v-else-if=\"item.status == 3\" :class=\"isMini && 'd-none'\">\n              <span style=\"font-size: 16px\">Trạng thái</span>\n              <span style=\"padding-left:8px;padding-right: 3px\">:</span>\n              <v-tooltip bottom>\n                <img src=\"../../assets/trungtuyen.jpg\" height=\"22px\" slot=\"activator\" width=\"22px\" alt=\"\">\n                <span style=\"font-size:16px\">Trạng thái : trúng tuyển</span>\n              </v-tooltip>\n            </v-list-tile-sub-title>\n            <v-list-tile-sub-title class=\"text--primary\" v-else-if=\"item.status == 4\" :class=\"isMini && 'd-none'\">\n              <span style=\"font-size:16px\">Trạng thái</span>\n              <span style=\"padding-left:8px\">:</span>\n              <v-tooltip bottom>\n                <img src=\"../../assets/danhsachden.png\"  height=\"22px\" width=\"22px\" slot=\"activator\" alt=\"\">\n                <span style=\"font-size:16px\">Trạng thái : danh sách đen</span>\n              </v-tooltip>\n            </v-list-tile-sub-title>\n           </v-flex>\n           <v-flex xs1 class=\"pl-1\" :class=\"isMini && 'd-none'\" style=\"margin-right: 15px\">\n             <v-tooltip bottom>\n               <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('candidate.update')\" icon @click.stop=\"editCandidate(item.id)\">\n                <v-icon class='theme--light teal--text'>edit</v-icon>\n              </v-btn>\n              <span>Sửa</span>\n            </v-tooltip>\n            <v-tooltip bottom>\n              <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('candidate.delete')\" icon @click.stop=\"removeConfirm(item.id)\">\n                <v-icon class=\"theme--light pink--text\">delete</v-icon>\n              </v-btn>\n              <span>Xóa</span>\n            </v-tooltip>\n          </v-flex>\n        </v-layout>\n        <v-divider\n        :key=\"'div' + index + item.id\"\n        v-if=\"index + 1 < items.data.length\"\n        ></v-divider>\n      </template>\n    </v-list>\n  </template>\n</data-view>\n</v-flex>\n<dialog-confirm v-model=\"dialogDelete\" @input=\"remove\" />\n<!-- dialog detail plan -->\n<v-dialog v-model=\"dialogDetail\" max-width=\"900px\">\n     <v-card class=\"pa-0\">\n    <v-card-title v-if=\"valuePlan\">\n      <span class=\"headline\" width=\"100%\" style=\"margin:0 auto\">{{ valuePlan.name }}</span>\n       <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn icon flat @click=\"dialogDetail = false\">\n        <v-icon>close</v-icon >\n      </v-btn>\n    </v-card-actions>\n    </v-card-title>\n      <v-divider></v-divider>\n    <!-- form edit -->\n    <v-card-text id=\"formSub\">\n      <v-container fluid class=\"white scroll-y pt-0\" v-if=\"valuePlan\">\n        <v-flex v-html=\"valuePlan.plan_txt\">\n        </v-flex>\n      </v-container>\n    </v-card-text>\n  </v-card>\n</v-dialog>\n</v-layout>\n</template>\n<script>\nimport { debounce } from 'lodash'\nimport DialogConfirm from '@/components/DialogConfirm'\nimport DataView from '@/components/DataView/DataView'\nimport { mapActions, mapGetters } from 'vuex'\nexport default{\n  name: 'ContractListting',\n  props: {\n    isMini: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    DataView,\n    DialogConfirm\n  },\n  data: () => ({\n    dialogDelete: false,\n    dataViewHeight: 0,\n    dialog: false,\n    dataViewName: 'candidate',\n    idCandidate: null,\n    dialogDetail: false,\n    plans: [],\n    positions: [],\n    dateApply: false,\n    timeInterview: false,\n    isBoolean: false,\n    valuePlan: '',\n    status: [\n      {\n        'id': 0,\n        'name': 'Mới'\n      },\n      {\n        'id': 1,\n        'name': 'Chờ kết quả'\n      },\n      {\n        'id': 2,\n        'name': 'Trượt'\n      },\n      {\n        'id': 3,\n        'name': 'Đỗ'\n      },\n      {\n        'id': 4,\n        'name': 'Danh sách đen'\n      }\n    ],\n    params: {\n      q: '',\n      planId: '',\n      status: '',\n      positionId: '',\n      dateApply: '',\n      timeInterview: ''\n    }\n  }),\n  computed: {\n    ...mapGetters(['isFetchingApi'])\n  },\n  methods: {\n    ...mapActions(['fetchApi']),\n    ...mapActions('Dataview', ['removeDataviewEntry']),\n    ...mapActions('Candidate', ['deleteCandidate', 'getCandidate']),\n    // submit time date_apply\n    submitDateApply () {\n      this.$refs.dateApply.save(this.params.dateApply)\n      this.changeSearch()\n    },\n    // submit time interview\n    submitTimeInterview () {\n      this.$refs.timeInterview.save(this.params.timeInterview)\n      this.changeSearch()\n    },\n    // open sereach\n    listSreach () {\n      if (this.isBoolean === false) {\n        this.isBoolean = true\n        this.dataViewHeight = this.$refs.laylout.clientHeight - 152\n      } else {\n        this.isBoolean = false\n        this.dataViewHeight = this.$refs.laylout.clientHeight - 113\n      }\n    },\n    // detail candidate\n    candidateDetail (candidate) {\n      this.getCandidate({ candidateId: candidate.id })\n      this.filter()\n    },\n    // detailPlan\n    detailPlan (item) {\n      this.valuePlan = item\n      this.dialogDetail = true\n    },\n    closeDialog () {\n      this.dialogDetail = false\n    },\n    // edit candidate\n    editCandidate (id) {\n      this.getCandidate({ candidateId: id })\n      this.$router.push({ name: 'candidate-edit', params: { id: id } })\n    },\n    removeConfirm (id) {\n      this.idCandidate = id\n      this.dialogDelete = true\n      console.log('id :', this.idCandidate)\n    },\n    remove (confirm) {\n      if (confirm) {\n        this.deleteCandidate({\n          id: this.idCandidate,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'candidate',\n              data: this.candidateDetail,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.success'),\n              color: 'success'\n            })\n            this.dialogDelete = false\n            this.$refs[this.dataViewName].$emit('reload')\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    },\n    // sreach\n    changeSearch: debounce(function () {\n      this.filter()\n    }, 500),\n    filter () {\n      this.$refs[this.dataViewName].$emit('reload')\n    }\n  },\n  mounted () {\n    this.fetchApi({\n      url: 'plans',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: (response) => {\n        this.plans = response.data\n      }\n    })\n    this.fetchApi({\n      url: 'positions',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: (response) => {\n        this.positions = response.data\n      }\n    })\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 113\n    let query = { ...this.$route.query }\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(() => {\n        this.$refs[this.dataViewName].$emit('reload')\n      })\n      delete query.reload\n      this.$router.replace({\n        query: query\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n  .v-toolbar__content{\n    height: 80px !important;\n  }\n  .v-input.v-text-field{\n  margin-top: 0px !important;\n}\n</style>\n"],"sourceRoot":"src/views/candidate"}]}