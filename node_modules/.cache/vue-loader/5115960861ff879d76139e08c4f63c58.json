{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/setting/Index.vue?vue&type=style&index=0&id=045671ee&scoped=true&lang=css&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/setting/Index.vue","mtime":1538377839386},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/css-loader/index.js","mtime":1534394480905},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1536410629618},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/postcss-loader/lib/index.js","mtime":1534394481185},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1534394480737},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":1536410629618}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nspan.status{\n  position: absolute;\n  bottom: 118px;\n  left:70px;\n}\n",{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsQA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/setting","sourcesContent":["<template>\n  <v-layout ref=\"laylout\" column fill-height>\n    <v-toolbar dense color=\"white\" flat>\n      <v-spacer></v-spacer>\n      <h3>Thiết lập thông tin công ty</h3>\n      <v-spacer></v-spacer>\n      <v-btn v-if=\"canAccess('setting.create')\"\n      class=\"mr-5\" icon color=\"primary\"\n      @click=\"addSetting\">\n      <v-icon>add</v-icon>\n    </v-btn>\n  </v-toolbar>\n  <v-flex>\n  <v-dialog v-model=\"dialog\" max-width=\"500px\">\n    <v-card>\n      <v-card-title>\n        <span class=\"headline\">{{ formTitle }}</span>\n      </v-card-title>\n      <!-- form edit -->\n      <v-card-text id=\"formSub\">\n        <v-container grid-list-md class=\"white scroll-y border-e0-top\">\n          <v-layout wrap>\n            <!-- name -->\n            <v-flex xs12 sm6 md12>\n              <v-text-field\n              placeholder=\"nhập tên\"\n              :error-messages=\"errors.has('name') ? errors.collect('name') : []\"\n              v-validate=\"'required'\"\n              :data-vv-as=\"$t('label.name')\"\n              name=\"name\"\n              :label=\"$t('label.name') + '*'\"\n              v-model=\"setting.name\"> </v-text-field>\n            </v-flex>\n            <!-- value -->\n            <v-flex xs12 sm6 md12>\n              <v-text-field\n              placeholder=\"nhập gía trị\"\n              v-validate=\"'required'\"\n              :error-messages=\"errors.has('value') ? errors.collect('value') : []\"\n              :data-vv-as=\"$t('label.value')\"\n              name=\"value\"\n              :label=\"$t('label.value')+ '*'\"\n              v-model=\"setting.value\"> </v-text-field>\n            </v-flex>\n            <!-- status -->\n            <v-flex xs12 sm6 md12>\n              <label>Trạng thái</label>\n              <v-checkbox\n              v-validate=\"'required'\"\n              style=\"margin-top:0px\"\n              :error-messages=\"errors.has('status') ? errors.collect('status') : []\"\n              :data-vv-as=\"$t('label.status')\"\n              name=\"status\"\n              v-model=\"setting.status\">\n            </v-checkbox>\n            <span v-if=\"setting.status\" class='status'>Hiển thị</span>\n            <span v-else class='status'>Không hiển thị</span>\n          </v-flex>\n        </v-layout>\n      </v-container>\n    </v-card-text>\n    <!-- end form edit -->\n    <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn color=\"blue darken-1\" flat @click.native=\"close\">Hủy bỏ</v-btn>\n      <v-btn color=\"blue darken-1\" flat @click.native=\"submitForm\"><span v-if=\"editedIndex!==-1\">Lưu lại</span><span v-else>Thêm mới</span></v-btn>\n    </v-card-actions>\n  </v-card>\n</v-dialog>\n</v-flex>\n<v-container>\n  <v-data-table\n  v-if=\"Array.isArray(settingDetail)\"\n  :headers=\"headers\"\n  :items=\"settingDetail\"\n  hide-actions\n  expand\n  class=\"elevation-1\"\n  >\n  <template slot=\"items\" slot-scope=\"props\">\n    <td> {{ props.index + 1 }}</td>\n    <td style=\"text-transform: capitalize\">{{ props.item.name }}</td>\n    <td style=\"text-transform: capitalize\">{{ props.item.value }}</td>\n    <td>{{ props.item.status_txt }}</td>\n    <td id=\"action\"> <v-icon v-if=\"canAccess('setting.update')\" class=\"mr-6\" @click=\"editItem(props.item,props.item.id)\" color=\"green\"> edit</v-icon>\n      <v-icon style=\"margin-left:10px\" v-if=\"canAccess('setting.delete')\" icon @click=\"removeConfirm(props.item.id)\" color=\"red\"> delete </v-icon>\n    </td>\n  </template>\n</v-data-table>\n</v-container>\n<dialog-confirm v-model=\"dialogDelete\" @input=\"remove\" />\n</v-layout>\n</template>\n<script>\nimport DialogConfirm from '@/components/DialogConfirm'\nimport { mapActions, mapGetters } from 'vuex'\nexport default{\n  components: {\n    DialogConfirm\n  },\n  data: () => ({\n    idSetting: null,\n    dialogDelete: false,\n    dialog: false,\n    headers: [\n      { text: 'STT', sortable: false },\n      { text: 'Tên thông tin', sortable: false },\n      { text: 'Giá trị', sortable: false },\n      { text: 'Trạng Thái', sortable: false },\n      { text: 'Hành động', sortable: false }\n    ],\n    editedIndex: -1,\n    setting: {\n      status: true\n    },\n    defaultItem: {\n      status: true\n    }\n  }),\n  computed: {\n    formTitle () {\n      return this.editedIndex === -1 ? 'Thêm thông tin' : 'Sửa thông tin'\n    },\n    ...mapGetters('Setting', ['settingDetail']),\n    ...mapGetters(['isFetchingApi'])\n  },\n  methods: {\n    ...mapActions(['setMiniDrawer']),\n    ...mapActions('Setting', ['FetchSetting', 'deleteSetting']),\n    ...mapActions('Dataview', ['removeDataviewEntry'])\n    // removeConfirm (item) {\n    //   console.log('data', item)\n    //   swal({\n    //     title: 'Xác nhận',\n    //     text: 'Bạn chắc chắn muốn xóa bản ghi này',\n    //     buttons: true,\n    //     dangerMode: true\n    //   })\n    //     .then((willDelete) => {\n    //       if (willDelete) {\n    //         console.log('data 1', item)\n    //         this.deleteSetting({\n    //           id: item.id,\n    //           cb: (response) => {\n    //             this.removeDataviewEntry({\n    //               name: 'setting',\n    //               data: item,\n    //               key: 'id'\n    //             })\n    //             this.$store.dispatch('showNotify', {\n    //               text: this.$t('alert.success'),\n    //               color: 'success'\n    //             })\n    //           },\n    //           error: (error) => {\n    //             if (error.status === 404) {\n    //               this.$store.dispatch('showNotify', {\n    //                 text: this.$t('alert.not-found'),\n    //                 color: 'warning'\n    //               })\n    //             }\n    //           }\n    //         })\n    //       }\n    //     })\n    // }\n\n  },\n  created () {\n    this.FetchSetting()\n  },\n  mounted () {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 48\n  },\n  methods: {\n    ...mapActions(['setMiniDrawer']),\n    ...mapActions('Setting', ['FetchSetting', 'deleteSetting', 'updateSetting']),\n    ...mapActions(['showNotify', 'setMiniDrawer']),\n    ...mapActions('Setting', ['createSetting']),\n    addSetting () {\n      this.dialog = true\n    },\n    editItem (item, id) {\n      this.idSetting = id\n      this.editedIndex = this.settingDetail.indexOf(item)\n      this.setting = Object.assign({}, item)\n      this.dialog = true\n    },\n    removeConfirm (id) {\n      this.idSetting = id\n      this.dialogDelete = true\n    },\n    remove (confirm) {\n      if (confirm) {\n        this.deleteSetting({\n          id: this.idSetting,\n          cb: (response) => {\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.success'),\n              color: 'success'\n            })\n            this.dialogDelete = false\n            this.FetchSetting()\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    },\n    close () {\n      this.dialog = false\n      setTimeout(() => {\n        this.setting = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      }, 300)\n    },\n    submitForm () {\n      if (this.editedIndex === -1) {\n        this.createSetting({\n          setting: this.setting,\n          cb: (response) => {\n            this.dialog = false\n            setTimeout(() => {\n              this.setting = Object.assign({}, this.defaultItem)\n              this.editedIndex = -1\n            }, 300)\n            this.showNotify({\n              color: 'success',\n              text: 'Thành công'\n            })\n            this.FetchSetting()\n          }\n        })\n      } else {\n        this.updateSetting({\n          id: this.idSetting,\n          setting: this.setting,\n          cb: (response) => {\n            this.FetchSetting()\n            this.showNotify({\n              color: 'success',\n              text: 'Thành công'\n            })\n            this.dialog = false\n            setTimeout(() => {\n              this.setting = Object.assign({}, this.defaultItem)\n              this.editedIndex = -1\n            }, 300)\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n<style scoped>\nspan.status{\n  position: absolute;\n  bottom: 118px;\n  left:70px;\n}\n</style>\n"]}]}