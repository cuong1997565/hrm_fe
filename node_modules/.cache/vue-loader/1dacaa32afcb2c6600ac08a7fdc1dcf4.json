{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/user/Form.vue?vue&type=style&index=0&id=730c8ffe&scoped=true&lang=css&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/user/Form.vue","mtime":1538921765931},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlabel{\n  color: #5b5a5a;\n  font-size:15px;\n}\n.image-icon-info{\n  display:none !important;\n}\n",{"version":3,"sources":["Form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmgBA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Form.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <v-form @submit.prevent=\"validateBeforeSubmit\">\n    <v-app>\n      <v-stepper style=\"text-shadow: none inline !important\" flat v-model=\"stepUser\">\n        <v-stepper-header style=\"height: 50px\">\n          <v-stepper-step :rules=\"[() => !errors.has('name') && !errors.has('email') && !errors.has('password') && !errors.has('password_confirmation')]\"  editable :complete=\"stepUser > 1\" step=\"1\">Thông tin tài khoản\n          </v-stepper-step>\n          <v-stepper-step error-icon  editable :complete=\"stepUser > 2\" step=\"2\">Thông tin cá nhân</v-stepper-step>\n          <v-stepper-step  editable  step=\"3\">Công việc</v-stepper-step>\n        </v-stepper-header>\n        <v-stepper-items>\n          <!-- step 1 ======================================================  -->\n          <v-stepper-content style=\"min-height: 630px\" step=\"1\" >\n            <v-layout>\n              <v-flex md6 style=\"margin-right:10px\">\n                <!-- email -->\n                <v-text-field\n                placeholder=\"Example@gmail.com\"\n                :error-messages=\"errors.has('email') ? errors.collect('email') : []\"\n                v-validate=\"'required|email'\"\n                :data-vv-as=\"$t('label.email')\"\n                name=\"email\"\n                :label=\"$t('label.email')\"\n                class=\"input-required\"\n                type=\"email\"\n                :disabled=\"!isCreate\"\n                v-model=\"user.email\"> </v-text-field>\n                <!-- password -->\n                <v-text-field\n                placeholder=\"Nhập mật khẩu\"\n                v-if=\"isCreate\"\n                :error-messages=\"errors.has('password') ? errors.collect('password') : []\" v-validate=\"'required|min:6'\"\n                :data-vv-as=\"$t('label.password')\"\n                ref=\"password\"\n                name=\"password\"\n                :label=\"$t('label.password')\"\n                class=\"input-required\"\n                type=\"password\"\n                v-model=\"user.password\"> </v-text-field>\n                <!-- status -->\n                <v-flex xs2 style=\"margin-top: 20px\">\n                  <label>Trạng thái</label>\n                  <v-tooltip bottom>\n                    <v-switch\n                    class=\"mt-0\"\n                    @change=\"user.status !== user.status\"\n                    name=\"status\"\n                    slot=\"activator\"\n                    v-model=\"user.status\"\n                    ></v-switch>\n                    <span v-if=\"user.status\">Kích hoạt</span>\n                    <span v-else>Không kích hoạt</span>\n                  </v-tooltip>\n                </v-flex>\n              </v-flex>\n              <v-spacer></v-spacer>\n              <v-flex md6 style=\"margin-left:10px\">\n                <!-- name -->\n                <v-text-field\n                :autofocus=\"true\"\n                placeholder=\"Nhập vào tên\"\n                :error-messages=\"errors.has('name') ? errors.collect('name') : []\"\n                v-validate=\"'required'\"\n                :data-vv-as=\"$t('label.name')\"\n                name=\"name\"\n                :label=\"$t('label.name')\"\n                class=\"input-required\"\n                v-model=\"user.name\"></v-text-field>\n                <!-- password confirm -->\n                <v-text-field\n                placeholder=\"Nhập lại mật khẩu\"\n                v-if=\"isCreate\"\n                :error-messages=\"errors.has('password_confirmation') ? errors.collect('password_confirmation') : []\"\n                v-validate=\"'required|min:6|confirmed:password'\"\n                :data-vv-as=\"$t('label.password_confirmation')\"\n                name=\"password_confirmation\"\n                :label=\"$t('label.password_confirmation')\"\n                class=\"input-required\"\n                type=\"password\"\n                v-model=\"user.password_confirmation\"> </v-text-field>\n                <!-- quyền truy cập -->\n                <v-autocomplete\n                multiple\n                label=\"Quyền truy cập\"\n                v-model=\"user.roles\"\n                :items=\"roles\"\n                chips\n                item-text=\"name\"\n                item-value=\"id\"\n                color=\"white\"\n                hide-no-data\n                hide-selected\n                placeholder=\"Tìm kiếm\"\n                style=\"margin-left:-30px\"\n                prepend-icon=\"mdi-database-search\">\n                <template slot=\"selection\" slot-scope=\"data\">\n                  <v-chip\n                  :selected=\"data.selected\"\n                  close class=\"chip--select-multi\"\n                  @input=\"data.parent.selectItem(data.item)\">\n                  {{ data.item.name }}\n                </v-chip></template></v-autocomplete>\n              </v-flex>\n            </v-layout>\n            <v-flex xs12>\n              <v-spacer></v-spacer>\n              <v-btn\n              style=\"margin-top: 90px\"\n              color=\"primary\"\n              @click=\"stepUser = 2\">\n            Tiếp tục</v-btn>\n            <v-spacer></v-spacer>\n          </v-flex>\n        </v-stepper-content>\n        <!-- step 2 ======================================================  -->\n        <v-stepper-content style=\"min-height: 630px\" step=\"2\">\n          <v-layout>\n            <v-flex md6 style=\"margin-right:10px\">\n              <!-- phone -->\n              <v-text-field\n              placeholder=\"Nhập số điện thoại\"\n              :error-messages=\"errors.has('phone') ? errors.collect('phone') : []\"\n              :data-vv-as=\"$t('label.phone')\"\n              name=\"phone\"\n              :label=\"$t('label.phone')\"\n              v-model=\"user.phone\"></v-text-field>\n              <!-- address -->\n              <v-text-field\n              :error-messages=\"errors.has('address') ? errors.collect('address') : []\"\n              placeholder=\"Nhập địa chỉ\"\n              :data-vv-as=\"$t('label.address')\"\n              name=\"address\"\n              :label=\"$t('label.address')\"\n              v-model=\"user.address\"> </v-text-field>\n              <!-- qualification -->\n              <v-text-field\n              placeholder=\"Nhập trình độ học vấn\"\n              :error-messages=\"errors.has('qualification') ? errors.collect('qualification') : []\"\n              :data-vv-as=\"$t('label.qualification')\"\n              name=\"qualification\"\n              :label=\"$t('label.qualification')\"\n              v-model=\"user.qualification\"></v-text-field>\n              <!-- gender -->\n              <v-flex md12 row>\n                <v-flex style=\"margin-top:12px\">\n                  <v-select\n                  :items=\"genderUser\"\n                  item-text=\"name\"\n                  item-value=\"value\"\n                  v-model=\"user.gender\"\n                  label=\"Giới tính\"\n                  ></v-select>\n                </v-flex> </v-flex>\n              </v-flex>\n              <v-flex md6 style=\"margin-left:10px\">\n                <!-- birth_day -->\n                <template>\n                  <v-menu\n                  ref=\"dateOfBirth\"\n                  :close-on-content-click=\"false\"\n                  v-model=\"dateOfBirth\"\n                  :nudge-right=\"40\"\n                  lazy transition=\"scale-transition\"\n                  offset-y\n                  full-width\n                  min-width=\"290px\">\n                  <v-text-field\n                  placeholder=\"Nhập ngày sinh\"\n                  slot=\"activator\"\n                  v-model=\"user.date_of_birth\"\n                  label=\"Ngày sinh\"\n                  readonly > </v-text-field>\n                  <v-date-picker\n                  ref=\"picker\"\n                  v-model=\"user.date_of_birth\"\n                  :max=\"new Date().toISOString().substr(0, 10)\"\n                  min=\"1950-01-01\"\n                  @change=\"save\"> </v-date-picker> </v-menu>\n                </template>\n                <!-- image -->\n                <v-flex class=\"mt-3\">\n                  <label style=\"color: #7f8c91;\">Ảnh đại diện</label>\n                  <imageUpload :multiple=\"false\"/>\n                </v-flex> </v-flex>\n              </v-layout>\n              <v-btn\n              color=\"primary\"\n              @click=\"stepUser = 3\"\n              > Tiếp tục </v-btn>\n              <v-btn dark\n               color=\"warning\" @click=\"stepUser = 1\">\n             Quay lại</v-btn>\n            </v-stepper-content>\n            <!-- step 3 ======================================================  -->\n            <v-stepper-content style=\"min-height: 630px\" step=\"3\">\n              <h3 v-if=\"isCreate\">Hợp đồng</h3>\n              <v-layout row wrap v-if=\"isCreate\">\n                <v-flex xs6 class=\"pr-2\">\n                  <!-- title contract -->\n                  <v-text-field\n                  placeholder=\"Nhập tiêu đề hợp đồng\"\n                  :error-messages=\"errors.has('title') ? errors.collect('title') : []\"\n                  :data-vv-as=\"$t('label.title')\"\n                  name=\"title\"\n                  :label=\"$t('label.title')\"\n                  v-model=\"user.contracts.title\"> </v-text-field>\n                  <!-- type contract -->\n                  <v-select\n                  :error-messages=\"errors.has('type') ? errors.collect('type') : []\"\n                  :data-vv-as=\"$t('label.type')\"\n                  name=\"type\"\n                  :label=\"$t('label.type')\"\n                  v-model=\"user.contracts.type\"\n                  :items=\"typeContract\"\n                  item-value=\"value\"\n                  item-text=\"name\"> </v-select>\n                  <!-- status contract-->\n                  <v-select\n                  :error-messages=\"errors.has('status') ? errors.collect('status') : []\"\n                  :data-vv-as=\"$t('label.status')\"\n                  name=\"status\"\n                  :label=\"$t('label.status')\"\n                  v-model=\"user.contracts.status\"\n                  :items=\"statusContract\"\n                  item-value=\"value\"\n                  item-text=\"name\"> </v-select>\n                </v-flex>\n                <v-flex xs6 class=\"pl-2\">\n                  <!-- date_sign -->\n                  <template>\n                    <v-menu\n                    ref=\"dateSign\"\n                    :close-on-content-click=\"false\"\n                    v-model=\"dateSign\"\n                    :nudge-right=\"40\"\n                    lazy transition=\"scale-transition\"\n                    offset-y\n                    full-width\n                    min-width=\"290px\">\n                    <v-text-field\n                    placeholder=\"Nhập ngày ký\"\n                    slot=\"activator\"\n                    v-model=\"user.contracts.date_sign\"\n                    label=\"Ngày ký\"\n                    readonly > </v-text-field>\n                    <v-date-picker\n                    ref=\"picker\"\n                    v-model=\"user.contracts.date_sign\"\n                    :max=\"new Date().toISOString().substr(0, 10)\"\n                    min=\"1950-01-01\"\n                    @change=\"save\"> </v-date-picker> </v-menu>\n                  </template>\n                  <!-- date_effective -->\n                  <template>\n                    <v-menu\n                    ref=\"dateEffective\"\n                    :close-on-content-click=\"false\"\n                    v-model=\"dateEffective\"\n                    :nudge-right=\"40\"\n                    lazy transition=\"scale-transition\"\n                    offset-y\n                    full-width\n                    min-width=\"290px\">\n                    <v-text-field\n                    placeholder=\"Ngày có hiệu lực\"\n                    slot=\"activator\"\n                    v-model=\"user.contracts.date_effective\"\n                    label=\"Ngày có hiệu lực\"\n                    readonly > </v-text-field>\n                    <v-date-picker\n                    ref=\"picker\"\n                    v-model=\"user.contracts.date_effective\"\n                    :max=\"new Date().toISOString().substr(0, 10)\"\n                    min=\"1950-01-01\"\n                    @change=\"save\"> </v-date-picker> </v-menu>\n                  </template>\n                  <!-- date_expiration -->\n                  <template>\n                    <v-menu\n                    ref=\"dateExpiration\"\n                    :close-on-content-click=\"false\"\n                    v-model=\"dateExpiration\"\n                    :nudge-right=\"40\"\n                    lazy transition=\"scale-transition\"\n                    offset-y\n                    full-width\n                    min-width=\"290px\">\n                    <v-text-field\n                    placeholder=\"Ngày hết hạn\"\n                    slot=\"activator\"\n                    v-model=\"user.contracts.date_expiration\"\n                    label=\"Ngày hết hạn\"\n                    readonly > </v-text-field>\n                    <v-date-picker\n                    ref=\"picker\"\n                    v-model=\"user.contracts.date_expiration\"\n                    :max=\"new Date().toISOString().substr(0, 10)\"\n                    min=\"1950-01-01\"\n                    @change=\"save\"> </v-date-picker> </v-menu>\n                  </template>\n                </v-flex>\n\n              </v-layout>\n              <v-layout row wrap>\n                <!-- form sub -->\n                <formSub\n                :dataUser=\"user\"\n                v-on:positionAndDepartment=\"positionAndDepartment($event)\"\n                ></formSub>\n              </v-layout>\n              <v-btn\n              :loading=\"isFetchingApi\"\n              :disabled=\"isFetchingApi\"\n              color=\"primary\"\n              type=\"submit\"\n              >\n              <template v-if=\"isCreate\">\n                <v-icon left>add</v-icon> {{$t('control.create')}}\n              </template>\n              <template v-else>\n                <v-icon left>save</v-icon> {{$t('control.save')}}\n              </template>\n            </v-btn>\n\n            <v-btn\n            style=\"margin-top:4px;\"\n            dark color=\"warning\" @click=\"stepUser = 2\">\n            Quay lại</v-btn>\n          </v-stepper-content>\n        </v-stepper-items>\n      </v-stepper>\n    </v-app>\n  </v-form>\n</template>\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { map } from 'lodash'\nimport formSub from './FormSub'\nimport imageUpload from '@/components/UploadMultipleImage/UploadMultipleImage'\nexport default{\n  name: 'UserForm',\n  components: { formSub, imageUpload },\n  computed: {\n    ...mapGetters(['isFetchingApi']),\n    ...mapGetters('Contracts', ['contractDetail']),\n    isCreate () {\n      return this.type === 'create'\n    }\n  },\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataUser: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  data () {\n    return {\n      heightStep: 640,\n      stepUser: 1,\n      status: 'Kích hoạt',\n      dateOfBirth: false,\n      dateSign: false,\n      dateEffective: false,\n      dateExpiration: false,\n      genderUser: [\n        { name: 'Nam', value: 1 },\n        { name: 'Nữ', value: 0 },\n        { name: 'Khác', value: 2 }\n      ],\n      typeContract: [\n        { name: 'Học việc', value: 0 },\n        { name: 'Cộng tác viên', value: 1 },\n        { name: 'Thử việc', value: 2 },\n        { name: 'Có thời hạn', value: 3 },\n        { name: 'Không thời hạn', value: 4 },\n        { name: 'Khác', value: 5 }\n      ],\n      statusContract: [\n        { name: 'Tiêu chuẩn', value: 0 },\n        { name: 'Chấm dứt', value: 1 },\n        { name: 'Gia hạn', value: 2 }\n      ],\n      user: {\n        avatar: '',\n        gender: 1,\n        status: true,\n        roles: [],\n        departments: [],\n        contracts:\n        {\n          title: '',\n          status: 0,\n          type: 0,\n          date_sign: null,\n          date_effective: null,\n          date_expiration: null\n        }\n      },\n      roles: []\n    }\n  },\n  watch: {\n    dataUser () {\n      this.setInitData()\n    },\n    dateOfBirth (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateSign (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateEffective (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateExpiration (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    }\n  },\n  methods: {\n    ...mapActions(['fetchApi']),\n    setInitData () {\n      let dataUser = { ...this.dataUser }\n      if (dataUser.roles) {\n        dataUser.roles = map(dataUser.roles.data, (role) => {\n          return role.id\n        })\n      }\n      this.user = { ...this.user, ...dataUser }\n    },\n    save (date) {\n      this.$refs.dateOfBirth.save(date)\n      this.$refs.dateSign.save(date)\n      this.$refs.dateEffective.save(date)\n      this.$refs.dateExpiration.save(date)\n    },\n    status_txt () {\n      if (this.user.status) { this.status = 'Kích hoạt' } else { this.status = 'Không kích hoạt' }\n    },\n    // thời gian đăng kí , có hiệu lực hợp đồng\n    dateConstract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 1\n      let yyyy = today.getFullYear()\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.user.contracts.date_sign = today\n      this.user.contracts.date_effective = today\n    },\n    // thời gian kết thúc hợp đồng\n    dateExpirationConstract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 3\n      let yyyy = today.getFullYear()\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.user.contracts.date_expiration = today\n    },\n    validateBeforeSubmit () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          let user = Object.assign({}, this.user)\n          user.status = user.status ? 1 : 0\n          this.$emit('submit', user)\n        } else {\n          this.stepUser = 1\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.invalid'),\n            color: 'warning'\n          })\n        }\n      })\n    },\n    positionAndDepartment (updated) {\n      this.user.departments = updated\n    }\n  },\n  mounted () {\n    this.fetchApi({\n      url: 'roles',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: (response) => {\n        this.roles = response.data\n      }\n    })\n    this.dataUser && this.setInitData()\n  },\n  created () {\n    this.dateExpirationConstract()\n    this.dateConstract()\n    this.status_txt()\n  }\n}\n</script>\n<style scoped>\nlabel{\n  color: #5b5a5a;\n  font-size:15px;\n}\n.image-icon-info{\n  display:none !important;\n}\n</style>\n"]}]}