{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/user/Form_sub.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/user/Form_sub.vue","mtime":1538377839390},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1534394480737},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":1534394476611},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":1536410629618}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'UserFormSub',\n  data: function data() {\n    return {\n      objectDepartment: {\n        branch_id: null,\n        department_id: null,\n        position_id: null\n      },\n      departments: [],\n      departmentActive: false,\n      positionActive: false,\n      valDepartment: null,\n      valPosition: null,\n      user: {}\n    };\n  },\n  props: {\n    index: {\n      type: Number,\n      default: 0\n    },\n    dataUser: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  computed: _objectSpread({}, mapGetters('Branch', ['branchAll']), mapGetters('Department', ['departmentByBranch']), mapGetters('Position', ['positionAll'])),\n  methods: _objectSpread({}, mapActions(['fetchApi']), mapActions('Position', ['positionForUser']), mapActions('Branch', ['getBranchForUser']), mapActions('Department', ['getDepartmentForUser']), {\n    changeBranch: function changeBranch(value) {\n      var _this = this;\n\n      this.departmentActive = true;\n      this.getDepartmentForUser({\n        branchId: value,\n        params: {\n          include: 'departments'\n        },\n        cb: function cb() {\n          _this.departments = _this.departmentByBranch;\n        }\n      });\n    },\n    changeDepartment: function changeDepartment(value) {\n      this.valDepartment = value;\n      this.positionActive = true;\n    },\n    changePosition: function changePosition(value) {\n      this.valPosition = value;\n      this.objectDepartment['department_id'] = this.valDepartment;\n      this.objectDepartment['position_id'] = this.valPosition;\n      this.$emit('positionAndDepartment', this.objectDepartment);\n    },\n    setInitData: function setInitData() {\n      var dataUser = _objectSpread({}, this.dataUser);\n\n      this.user = _objectSpread({}, this.user, dataUser);\n    }\n  }),\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.fetchApi({\n      url: 'departments',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: function success(response) {\n        _this2.departments = response.data;\n      }\n    });\n    this.getDepartmentForUser({\n      branchId: 1,\n      params: {\n        include: 'departments'\n      },\n      cb: function cb() {\n        _this2.departments = _this2.departmentByBranch;\n      }\n    });\n  },\n  created: function created() {\n    if (this.$route.params.id) {\n      this.departmentActive = true;\n      this.positionActive = true;\n\n      if (this.dataUser.departments.data[this.index]) {\n        this.objectDepartment.branch_id = this.dataUser.departments.data[this.index].branch_id;\n        this.objectDepartment.department_id = this.dataUser.departments.data[this.index].id;\n        this.objectDepartment.position_id = this.dataUser.departments.data[this.index].position_id;\n        console.log(this.objectDepartment.department_id);\n      }\n    }\n\n    this.getBranchForUser();\n    this.positionForUser();\n    !!this.dataUser && this.setInitData();\n  }\n};",{"version":3,"sources":["Form_sub.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,QAAA,aADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,wBAAA;AACA,mBAAA,IADA;AAEA,uBAAA,IAFA;AAGA,qBAAA;AAHA,OADA;AAMA,mBAAA,EANA;AAOA,wBAAA,KAPA;AAQA,sBAAA,KARA;AASA,qBAAA,IATA;AAUA,mBAAA,IAVA;AAWA,YAAA;AAXA,KAAA;AAaA,GAhBA;AAiBA,SAAA;AACA,WAAA;AACA,YAAA,MADA;AAEA,eAAA;AAFA,KADA;AAKA,cAAA;AACA,YAAA,MADA;AAEA,eAAA,oBAAA;AACA,eAAA,EAAA;AACA;AAJA;AALA,GAjBA;AA6BA,8BACA,WAAA,QAAA,EAAA,CAAA,WAAA,CAAA,CADA,EAEA,WAAA,YAAA,EAAA,CAAA,oBAAA,CAAA,CAFA,EAGA,WAAA,UAAA,EAAA,CAAA,aAAA,CAAA,CAHA,CA7BA;AAkCA,6BACA,WAAA,CAAA,UAAA,CAAA,CADA,EAEA,WAAA,UAAA,EAAA,CAAA,iBAAA,CAAA,CAFA,EAGA,WAAA,QAAA,EAAA,CAAA,kBAAA,CAAA,CAHA,EAIA,WAAA,YAAA,EAAA,CAAA,sBAAA,CAAA,CAJA;AAKA,gBALA,wBAKA,KALA,EAKA;AAAA;;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,oBAAA,CAAA;AACA,kBAAA,KADA;AAEA,gBAAA;AAAA,mBAAA;AAAA,SAFA;AAGA,YAAA,cAAA;AACA,gBAAA,WAAA,GAAA,MAAA,kBAAA;AACA;AALA,OAAA;AAOA,KAdA;AAeA,oBAfA,4BAeA,KAfA,EAeA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAlBA;AAmBA,kBAnBA,0BAmBA,KAnBA,EAmBA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,gBAAA,CAAA,eAAA,IAAA,KAAA,aAAA;AACA,WAAA,gBAAA,CAAA,aAAA,IAAA,KAAA,WAAA;AACA,WAAA,KAAA,CAAA,uBAAA,EAAA,KAAA,gBAAA;AACA,KAxBA;AAyBA,eAzBA,yBAyBA;AACA,UAAA,6BAAA,KAAA,QAAA,CAAA;;AACA,WAAA,IAAA,qBAAA,KAAA,IAAA,EAAA,QAAA;AACA;AA5BA,IAlCA;AAgEA,SAhEA,qBAgEA;AAAA;;AACA,SAAA,QAAA,CAAA;AACA,WAAA,aADA;AAEA,cAAA,KAFA;AAGA,cAAA;AACA,eAAA,CAAA;AADA,OAHA;AAMA,eAAA,iBAAA,QAAA,EAAA;AACA,eAAA,WAAA,GAAA,SAAA,IAAA;AACA;AARA,KAAA;AAUA,SAAA,oBAAA,CAAA;AACA,gBAAA,CADA;AAEA,cAAA;AAAA,iBAAA;AAAA,OAFA;AAGA,UAAA,cAAA;AACA,eAAA,WAAA,GAAA,OAAA,kBAAA;AACA;AALA,KAAA;AAOA,GAlFA;AAmFA,SAnFA,qBAmFA;AACA,QAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,cAAA,GAAA,IAAA;;AACA,UAAA,KAAA,QAAA,CAAA,WAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,aAAA,gBAAA,CAAA,SAAA,GAAA,KAAA,QAAA,CAAA,WAAA,CAAA,IAAA,CAAA,KAAA,KAAA,EAAA,SAAA;AACA,aAAA,gBAAA,CAAA,aAAA,GAAA,KAAA,QAAA,CAAA,WAAA,CAAA,IAAA,CAAA,KAAA,KAAA,EAAA,EAAA;AACA,aAAA,gBAAA,CAAA,WAAA,GAAA,KAAA,QAAA,CAAA,WAAA,CAAA,IAAA,CAAA,KAAA,KAAA,EAAA,WAAA;AACA,gBAAA,GAAA,CAAA,KAAA,gBAAA,CAAA,aAAA;AACA;AACA;;AACA,SAAA,gBAAA;AACA,SAAA,eAAA;AACA,KAAA,CAAA,KAAA,QAAA,IAAA,KAAA,WAAA,EAAA;AACA;AAjGA,CAAA","sourcesContent":["<template>\n  <v-layout row wrap align-center style=\"margin-top: 20px;\">\n    <!-- branch -->\n    <v-flex md4>\n      <label>Chi nhánh</label>\n      <v-select\n      v-model=\"objectDepartment.branch_id\"\n      label=\"Chi nhánh\"\n      v-if=\"Array.isArray(branchAll)\"\n      :items=\"branchAll\"\n      item-text=\"name\"\n      item-value=\"id\"\n      :error-messages=\"errors.has('branch_id') ? errors.collect('branch_id') : []\"\n      name=\"branch_id\"\n      placeholder=\"Thuộc chi nhánh\"\n      single-line\n      @change=\"changeBranch\"\n      ></v-select>\n    </v-flex>\n    <v-spacer></v-spacer>\n    <!-- department -->\n    <v-flex md4>\n      <label>Phòng ban</label>\n      <v-select\n      v-model=\"objectDepartment.department_id\"\n      label=\"Phòng ban\"\n      :disabled=\"!departmentActive\"\n      :items=\"departments\"\n      item-text=\"name\"\n      item-value=\"id\"\n      :error-messages=\"errors.has ('department_id') ? errors.collect('department_id') : []\"\n      name=\"department_id\"\n      placeholder=\"Thuộc phòng ban\"\n      single-line\n      @change=\"changeDepartment\"></v-select>\n    </v-flex>\n    <v-spacer></v-spacer><v-flex md3>\n      <!-- postion -->\n      <label>Bộ phận</label>\n      <v-select\n      v-model=\"objectDepartment.position_id\"\n      v-if=\"Array.isArray(positionAll)\"\n      :items=\"positionAll\"\n      :disabled=\"!positionActive\"\n      item-text=\"name\"\n      item-value=\"id\"\n      :error-messages=\"errors.has('position_id') ? errors.collect('position_id') : []\"\n      name=\"position_id\"\n      placeholder=\"Vị trí\"\n      single-line\n      @change=\"changePosition\"></v-select></v-flex>\n      <v-btn style=\"margin-top:-5px;\"\n      icon color=\"error\"\n      @click=\"$emit('delete')\">\n      <v-icon>delete</v-icon></v-btn>\n    </v-layout>\n  </template>\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nexport default {\n  name: 'UserFormSub',\n  data () {\n    return {\n      objectDepartment: {\n        branch_id: null,\n        department_id: null,\n        position_id: null\n      },\n      departments: [],\n      departmentActive: false,\n      positionActive: false,\n      valDepartment: null,\n      valPosition: null,\n      user: {}\n    }\n  },\n  props: {\n    index: {\n      type: Number,\n      default: 0\n    },\n    dataUser: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  computed: {\n    ...mapGetters('Branch', ['branchAll']),\n    ...mapGetters('Department', ['departmentByBranch']),\n    ...mapGetters('Position', ['positionAll'])\n  },\n  methods: {\n    ...mapActions(['fetchApi']),\n    ...mapActions('Position', ['positionForUser']),\n    ...mapActions('Branch', ['getBranchForUser']),\n    ...mapActions('Department', ['getDepartmentForUser']),\n    changeBranch (value) {\n      this.departmentActive = true\n      this.getDepartmentForUser({\n        branchId: value,\n        params: { include: 'departments' },\n        cb: () => {\n          this.departments = this.departmentByBranch\n        }\n      })\n    },\n    changeDepartment (value) {\n      this.valDepartment = value\n      this.positionActive = true\n    },\n    changePosition (value) {\n      this.valPosition = value\n      this.objectDepartment['department_id'] = this.valDepartment\n      this.objectDepartment['position_id'] = this.valPosition\n      this.$emit('positionAndDepartment', this.objectDepartment)\n    },\n    setInitData () {\n      let dataUser = { ...this.dataUser }\n      this.user = { ...this.user, ...dataUser }\n    }\n  },\n  mounted () {\n    this.fetchApi({\n      url: 'departments',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: (response) => {\n        this.departments = response.data\n      }\n    })\n    this.getDepartmentForUser({\n      branchId: 1,\n      params: { include: 'departments' },\n      cb: () => {\n        this.departments = this.departmentByBranch\n      }\n    })\n  },\n  created () {\n    if (this.$route.params.id) {\n      this.departmentActive = true\n      this.positionActive = true\n      if (this.dataUser.departments.data[this.index]) {\n        this.objectDepartment.branch_id = this.dataUser.departments.data[this.index].branch_id\n        this.objectDepartment.department_id = this.dataUser.departments.data[this.index].id\n        this.objectDepartment.position_id = this.dataUser.departments.data[this.index].position_id\n        console.log(this.objectDepartment.department_id)\n      }\n    }\n    this.getBranchForUser()\n    this.positionForUser()\n    !!this.dataUser && this.setInitData()\n  }\n}\n</script>\n"],"sourceRoot":"src/views/user"}]}