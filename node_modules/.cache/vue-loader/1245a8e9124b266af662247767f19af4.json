{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/position/Listting.vue?vue&type=style&index=0&id=63b92f28&scoped=true&lang=css&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/position/Listting.vue","mtime":1543803778777},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.v-input.v-text-field{\n  margin-top: 0px;\n}\n.title-position{\n  color: #67757c;\n  -webkit-transform: translateY(-25px) translateX(-12px);\n  transform: translateY(-25px) translateX(-12px);\n  top: 0;\n}\n.v-input--selection-controls{\n  margin-top: 0px;\n}\n.v-card__text{\n  padding: 0px !important\n}\n@media (min-width: 1264px){\n  .flex-basis{\n    flex-basis:55px;\n  }\n  .paddLeft-8{\n    padding-left: 8px;\n  }\n /* .paddLeft{\n     padding-left: 3px;\n  }*/\n  .paddLeft-9{\n    padding-left: 9px;\n  }\n\n}\n@media (min-width: 960px){\n  .flex-basis{\n    flex-basis:55px;\n  }\n  .paddLeft-8{\n    padding-left: 8px;\n  }\n  .paddLeft-9{\n    padding-left: 12px;\n  }\n  .v-list-tile{\n     padding-top: 0px 16px;\n     height: none !important;\n    }\n}\n@media (min-width: 600px){\n  .flex-basis{\n    flex-basis:55px;\n  }\n  .paddLeft-9{\n    padding-left: 10px;\n  }\n  .v-list-tile{\n     padding-top: 0px !important;\n  height: 48px !important;\n  }\n  .paddLeft{\n    padding-left: 5px !important;\n  }\n}\n @media (min-width: 250px){\n  .flex-basis{\n    flex-basis:55px;\n  }\n  .v-list-tile{\n     padding-top: 14px;\n     height: 75px;\n  }\n  .paddLeft-9{\n    padding-left: 9px;\n  }\n  .paddLeft{\n    padding-left: 16px;\n  }\n }\n",{"version":3,"sources":["Listting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Listting.vue","sourceRoot":"src/views/position","sourcesContent":["<template>\n  <v-layout ref=\"laylout\" column fill-height>\n    <div ref=\"header\">\n      <v-toolbar height=\"50px\" color=\"white\" flat>\n        <v-layout row wrap>\n          <v-flex md1 xs3 sm1 xl2 :class=\"isMini\">\n           <!--  <v-tooltip bottom> -->\n           <v-tooltip bottom>\n            <v-btn slot=\"activator\" v-if=\"canAccess('position.create')\"\n            class=\"mr-3 mt-3\" icon color=\"primary\"\n            @click=\"openDialog\">\n            <v-icon>add</v-icon>\n          </v-btn>\n          <span>Thêm mới</span>\n        </v-tooltip>\n      </v-flex>\n      <v-flex md5 xs7 sm5 xl5 class=\"mt-1 mr-2\" :class=\"isMini && 'full-flex-basic'\">\n         <v-text-field\n         hide-details\n         single-line\n         slot=\"activator\"\n         placeholder=\"Nhập chức danh\"\n         v-model=\"nameFilter\"\n         @click:clear=\"changeSearch\"\n         @keyup=\"changeSearch\"\n         clearable\n         >\n       </v-text-field>\n   </v-flex>\n   <!--dialog-->\n   <v-dialog v-model=\"dialog\" max-width=\"500px\">\n    <v-card>\n      <form @submit.prevent=\"validateBeforeSubmit\">\n        <v-card-title>\n          <span class=\"headline\" width=\"100%\" style=\"margin:0 auto\">{{ formTitle }}</span>\n        </v-card-title>\n        <v-divider></v-divider>\n        <v-card-text id=\"formSub\">\n          <v-container grid-list-md>\n            <v-layout wrap>\n              <!-- name -->\n              <v-flex xs12 sm12 md12>\n                <v-text-field\n                placeholder=\"Nhập  chức danh\"\n                ref = \"firstInput\"\n                :tabindex=\"1\"\n                :error-messages=\"errors.has('name_position') ? errors.collect('name_position') : []\"\n                v-validate=\"'required'\"\n                :data-vv-as=\"$t('label.name_position')\"\n                :label=\"$t('label.name_position')\"\n                class=\"input-required\"\n                name=\"name_position\"\n                autofocus\n                v-model=\"position.name\"> </v-text-field>\n              </v-flex>\n              <!-- value -->\n              <!-- status -->\n              <v-flex xs12 sm12 md12>\n                <label class=\"title-position\">Trạng thái</label>\n                <v-flex xs1>\n                 <v-tooltip bottom>\n                  <v-switch\n                  @click.native.stop\n                  :tabindex=\"2\"\n                  style=\"outline-style: none;\"\n                  name=\"status\"\n                  slot=\"activator\"\n                  v-model=\"position.status\"\n                  ></v-switch>\n                  <span v-if=\"position.status\">Hiển thị</span>\n                  <span v-else>Không hiển thị</span>\n                </v-tooltip>\n              </v-flex>\n            </v-flex>\n          </v-layout>\n        </v-container>\n      </v-card-text>\n      <v-divider></v-divider>\n      <v-card-actions>\n       <v-spacer></v-spacer>\n       <v-btn color=\"error\" flat  :tabindex=\"3\" @click.native=\"close\">Hủy bỏ</v-btn>\n       <v-btn class=\"green--text text-uppercase\"  :tabindex=\"4\" flat @click.native=\"submitFrom\">\n        <span v-if=\"editTitle==-2\">Lưu lại</span>\n        <span v-else class=\"text-uppercase\">Thêm mới</span></v-btn>\n        <div :tabindex=\"5\"  @focus=\"backTabIndex\"></div>\n      </v-card-actions>\n    </form>\n  </v-card>\n</v-dialog>\n</v-layout>\n<v-layout slot=\"extension\" v-if=\"!isMini\">\n  <v-flex xl1 lg1 md1 sm1 xs1 class=\"text-bold flex-basis\">\n    #\n  </v-flex>\n  <v-flex xl8 lg8 md6  sm6 xs6 class=\"text-bold\">\n   Chức danh\n </v-flex>\n <v-flex xl2  lg2 md2 sm2 xs6 class=\"text-bold\">\n  Trạng thái\n</v-flex>\n<v-flex xl1 lg2 md2 sm2 xs2 class=\"text-bold\">\n  Hành động\n</v-flex>\n</v-layout>\n</v-toolbar>\n</div>\n<v-flex xs12 class=\"border-e0-top\">\n  <data-view\n  :name=\"dataViewName\"\n  api-url=\"positions?sort=status:-1,id:-1\"\n  v-if=\"dataViewHeight\"\n  :viewHeight=\"dataViewHeight\"\n  :params=\"filterParams\"\n  :ref=\"dataViewName\"\n  >\n  <template slot-scope=\"{items}\">\n    <v-list>\n      <template v-for=\"(item, index) in items.data\">\n        <v-list-tile class=\"lighten-2 v-list-tile\" :key=\"index\">\n          <v-layout class=\"paddLeft-8\" :key=\"'index'+index\">\n            <v-flex xl1 lg1 md1 sm1 xs1 class=\"flex-basis\" :class=\"isMini && 'd-none'\">\n                {{ index + 1 }}\n            </v-flex>\n            <v-flex xl8 lg8 md6  sm6 xs6 :class=\"isMini && 'd-none'\">\n              {{ item.name }}\n            </v-flex>\n            <v-flex xl2  lg2 md2 sm2 xs6 class=\"paddLeft-9\" :class=\"isMini && 'd-none'\">\n             <v-tooltip bottom sm12>\n              <v-switch\n              @click.native.stop\n              @change=\"changeStatus(item.id)\"\n              class='paddLeft'\n              name=\"status\"\n              slot=\"activator\"\n              v-model=\"item.status\"\n              ></v-switch>\n              <span v-if=\"item.status\">Hiển thị</span>\n              <span v-else>Không hiển thị</span>\n            </v-tooltip>\n          </v-flex>\n          <v-flex xl1 lg2 md2 sm2 xs2  class='paddLeft' :class=\"isMini && 'd-none'\">\n            <v-tooltip bottom>\n              <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('position.update')\" icon @click=\"editItem(item,item.id)\">\n                <v-icon class='theme--light teal--text'>edit</v-icon>\n              </v-btn>\n              <span>Sửa</span>\n            </v-tooltip>\n            <v-tooltip bottom>\n              <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('position.delete')\" icon @click.stop=\"removeConfirm(item)\">\n                <v-icon class=\"theme--light pink--text\">delete</v-icon>\n              </v-btn>\n              <span>Xóa</span>\n            </v-tooltip>\n          </v-flex>\n        </v-layout>\n      </v-list-tile>\n      <v-divider\n      :key=\"'div' + item.id\"\n      v-if=\"index + 1 < items.data.length\"\n      ></v-divider>\n    </template>\n  </v-list>\n</template>\n</data-view>\n</v-flex>\n<dialog-confirm v-model=\"dialogDelete\" @input=\"remove\" />\n</v-layout>\n</template>\n<script type=\"text/javascript\">\nimport { mapFields } from 'vuex-map-fields'\nimport DialogConfirm from '@/components/DialogConfirm'\nimport { debounce } from 'lodash'\nimport DataView from '@/components/DataView/DataView'\nimport { mapActions, mapGetters } from 'vuex'\nexport default{\n  name: 'UserListting',\n  props: {\n    isMini: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    DataView,\n    DialogConfirm\n  },\n  data: () => ({\n    dataViewHeight: 0,\n    dataViewName: 'position',\n    idPosition: null,\n    dialogDelete: false,\n    status: 'Hiển thị',\n    dialog: false,\n    editedIndex: -1,\n    editTitle: -1,\n    dataPosition: {},\n    position: {\n      status: true,\n      name: ''\n    },\n    params: {\n      q: ''\n    },\n    defaultItem: {\n    }\n  }),\n  computed: {\n    formTitle () {\n      return this.editTitle === -1 ? 'Thêm chức danh' : 'Sửa chức danh'\n    },\n    ...mapGetters('Position', ['positionDetail', 'filterParams']),\n    ...mapGetters(['isFetchingApi']),\n    ...mapFields('Position', {\n      nameFilter: 'params.q'\n    })\n  },\n  watch: {\n    dialog (val) {\n      val || this.close()\n      if (!val) return\n      requestAnimationFrame(() => {\n        this.$refs.firstInput.focus()\n      })\n    }\n  },\n  created () {\n    this.fetchPosition()\n  },\n  methods: {\n    ...mapActions(['setMiniDrawer']),\n    ...mapActions('Position', ['fetchPosition', 'createPosition', 'deletePosition', 'updatePosition', 'updateStatusPosition', 'clearFilter']),\n    ...mapActions(['showNotify', 'setMiniDrawer']),\n    ...mapActions('Dataview', ['removeDataviewEntry', 'updateDataviewEntry']),\n    backTabIndex () {\n      this.$refs.firstInput.focus()\n    },\n    // update status\n    changeStatus (idPosition) {\n      this.updateStatusPosition({\n        id: idPosition,\n        cb: (response) => {\n          this.showNotify({\n            color: 'success',\n            text: this.$t('alert.status-edit-position')\n          })\n        }\n      })\n    },\n    resetForm () {\n      this.clearFilter()\n      this.filter()\n    },\n    // dialog\n    openDialog () {\n      this.$validator.reset()\n      this.editTitle = -1\n      this.position.status = true\n      this.dialog = true\n    },\n    // show data edit\n    editItem (item, id) {\n      this.$validator.reset()\n      this.editTitle = -2\n      this.idPosition = id\n      this.editedIndex = this.positionDetail.indexOf(item)\n      this.position = Object.assign({}, item)\n      this.status_txt()\n      this.dialog = true\n    },\n    // remove position\n    removeConfirm (item) {\n      this.dataPosition = item\n      this.idPosition = item.id\n      this.dialogDelete = true\n    },\n    remove (confirm) {\n      if (confirm) {\n        this.deletePosition({\n          id: this.idPosition,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'position',\n              data: this.dataPosition,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.delete-position'),\n              color: 'success'\n            })\n            this.dialogDelete = false\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    },\n    /// close dialog\n    close () {\n      this.dialog = false\n      setTimeout(() => {\n        this.position = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      }, 300)\n    },\n    status_txt () {\n      if (this.position.status) {\n        this.status = 'Hiển thị'\n      } else {\n        this.status = 'Không hiển thị'\n      }\n    },\n    validateBeforeSubmit () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          this.submitFrom()\n        } else {\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.invalid'),\n            color: 'warning'\n          })\n        }\n      })\n    },\n    /// add and edit data position\n    submitFrom () {\n      if (this.editTitle === -1) {\n        let position = Object.assign({}, this.position)\n        position.status = position.status ? 1 : 0\n        this.createPosition({\n          position: position,\n          cb: (response) => {\n            this.dialog = false\n            setTimeout(() => {\n              console.log('data position :', position)\n              this.editedIndex = -1\n            }, 300)\n            this.showNotify({\n              color: 'success',\n              text: this.$t('alert.add-position')\n            })\n            this.resetForm()\n          }\n        })\n      } else {\n        // edit data\n        let position = Object.assign({}, this.position)\n        position.status = position.status ? 1 : 0\n        this.updatePosition({\n          id: this.idPosition,\n          position: position,\n          cb: (response) => {\n            this.updateDataviewEntry({\n              name: 'position',\n              data: response.data,\n              key: 'id'\n            })\n            this.showNotify({\n              color: 'success',\n              text: this.$t('alert.edit-position')\n            })\n            this.dialog = false\n            setTimeout(() => {\n              console.log('data position :', position)\n              this.editedIndex = -1\n            }, 300)\n          }\n        })\n      }\n    },\n    /// screach\n    changeSearch: debounce(function () {\n      this.filter()\n    }, 500),\n    filter () {\n      this.$refs[this.dataViewName].$emit('reload')\n    }\n  },\n  mounted () {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 104\n    let query = { ...this.$route.query }\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(() => {\n        this.$refs[this.dataViewName].$emit('reload')\n      })\n      delete query.reload\n      this.$router.replace({\n        query: query\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n  .v-input.v-text-field{\n    margin-top: 0px;\n  }\n  .title-position{\n    color: #67757c;\n    -webkit-transform: translateY(-25px) translateX(-12px);\n    transform: translateY(-25px) translateX(-12px);\n    top: 0;\n  }\n  .v-input--selection-controls{\n    margin-top: 0px;\n  }\n  .v-card__text{\n    padding: 0px !important\n  }\n  @media (min-width: 1264px){\n    .flex-basis{\n      flex-basis:55px;\n    }\n    .paddLeft-8{\n      padding-left: 8px;\n    }\n   /* .paddLeft{\n       padding-left: 3px;\n    }*/\n    .paddLeft-9{\n      padding-left: 9px;\n    }\n\n  }\n  @media (min-width: 960px){\n    .flex-basis{\n      flex-basis:55px;\n    }\n    .paddLeft-8{\n      padding-left: 8px;\n    }\n    .paddLeft-9{\n      padding-left: 12px;\n    }\n    .v-list-tile{\n       padding-top: 0px 16px;\n       height: none !important;\n      }\n  }\n  @media (min-width: 600px){\n    .flex-basis{\n      flex-basis:55px;\n    }\n    .paddLeft-9{\n      padding-left: 10px;\n    }\n    .v-list-tile{\n       padding-top: 0px !important;\n    height: 48px !important;\n    }\n    .paddLeft{\n      padding-left: 5px !important;\n    }\n  }\n   @media (min-width: 250px){\n    .flex-basis{\n      flex-basis:55px;\n    }\n    .v-list-tile{\n       padding-top: 14px;\n       height: 75px;\n    }\n    .paddLeft-9{\n      padding-left: 9px;\n    }\n    .paddLeft{\n      padding-left: 16px;\n    }\n   }\n</style>\n"]}]}