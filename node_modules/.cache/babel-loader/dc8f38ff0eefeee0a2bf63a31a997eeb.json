{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/account/ChangeInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/account/ChangeInformation.vue","mtime":1538377839386},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1534394480737},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":1534394476611},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":1536410629618}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'ChangeInformation',\n  data: function data() {\n    return {\n      account: {\n        name: '',\n        phone: '',\n        email: ''\n      }\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['isFetchingApi', 'userProfile'])),\n  methods: _objectSpread({}, mapActions(['showNotify', 'getProfile']), mapActions('Account', ['changeInformation']), {\n    validateBeforeSubmit: function validateBeforeSubmit() {\n      var _this = this;\n\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          var obj = {};\n          obj.name = _this.account.name;\n          obj.phone = _this.account.phone;\n\n          _this.changeInformation({\n            data: obj,\n            cb: function cb(response) {\n              _this.getProfile({\n                params: {\n                  include: 'roles'\n                }\n              });\n\n              _this.showNotify({\n                color: 'success',\n                text: 'Thay đổi thông tin cá nhân thành công'\n              });\n            }\n          });\n        } else {\n          _this.$store.dispatch('showNotify', {\n            text: _this.$t('alert.invalid'),\n            color: 'warning'\n          });\n        }\n      });\n    }\n  }),\n  watch: {\n    userProfile: {\n      handler: function handler(newVal) {\n        this.account = _objectSpread({}, this.account, newVal);\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    if (this.userProfile.id) {\n      this.account = _objectSpread({}, this.account, this.userProfile);\n    }\n  }\n};",{"version":3,"sources":["ChangeInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,eAAA;AAEA,QAAA,mBAFA;AAIA,MAJA,kBAIA;AACA,WAAA;AACA,eAAA;AACA,cAAA,EADA;AAEA,eAAA,EAFA;AAGA,eAAA;AAHA;AADA,KAAA;AAOA,GAZA;AAaA,8BACA,WAAA,CAAA,eAAA,EAAA,aAAA,CAAA,CADA,CAbA;AAgBA,6BACA,WAAA,CAAA,YAAA,EAAA,YAAA,CAAA,CADA,EAEA,WAAA,SAAA,EAAA,CAAA,mBAAA,CAAA,CAFA;AAGA,wBAHA,kCAGA;AAAA;;AACA,WAAA,UAAA,CAAA,WAAA,GAAA,IAAA,CAAA,kBAAA;AACA,YAAA,MAAA,EAAA;AACA,cAAA,MAAA,EAAA;AACA,cAAA,IAAA,GAAA,MAAA,OAAA,CAAA,IAAA;AACA,cAAA,KAAA,GAAA,MAAA,OAAA,CAAA,KAAA;;AACA,gBAAA,iBAAA,CAAA;AACA,kBAAA,GADA;AAEA,gBAAA,YAAA,QAAA,EAAA;AACA,oBAAA,UAAA,CAAA;AAAA,wBAAA;AAAA,2BAAA;AAAA;AAAA,eAAA;;AACA,oBAAA,UAAA,CAAA;AACA,uBAAA,SADA;AAEA,sBAAA;AAFA,eAAA;AAIA;AARA,WAAA;AAUA,SAdA,MAcA;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,kBAAA,MAAA,EAAA,CAAA,eAAA,CADA;AAEA,mBAAA;AAFA,WAAA;AAIA;AACA,OArBA;AAsBA;AA1BA,IAhBA;AA4CA,SAAA;AACA,iBAAA;AACA,eAAA,iBAAA,MAAA,EAAA;AACA,aAAA,OAAA,qBAAA,KAAA,OAAA,EAAA,MAAA;AACA,OAHA;AAIA,YAAA;AAJA;AADA,GA5CA;AAoDA,SApDA,qBAoDA;AACA,QAAA,KAAA,WAAA,CAAA,EAAA,EAAA;AACA,WAAA,OAAA,qBAAA,KAAA,OAAA,EAAA,KAAA,WAAA;AACA;AACA;AAxDA,CAAA","sourcesContent":["<template>\n  <v-card flat>\n    <v-form @submit.prevent=\"validateBeforeSubmit\">\n      <v-container>\n        <v-layout row wrap justify-content-center>\n          <v-flex xs12 sm6>\n            <!-- <div class=\"display-flex justify-content-center\">\n              <v-avatar\n                class=\"mb-3\"\n                size=\"100\"\n                color=\"grey lighten-4\"\n                >\n                <img :src=\"account.avatar_url\" :alt=\"account.name\">\n              </v-avatar>\n            </div> -->\n\n            <v-text-field\n              :error-messages=\"errors.has('name') ? errors.collect('name') : []\"\n              v-validate=\"'required|min:6|max:255'\"\n              :data-vv-as=\"$t('label.name')\"\n              name=\"name\"\n              :label=\"$t('label.name') + ' *'\"\n              autocomplete=\"off\"\n              v-model=\"account.name\">\n            </v-text-field>\n            <v-text-field\n              :error-messages=\"errors.has('phone') ? errors.collect('phone') : []\"\n              v-validate=\"'min:8|max:12'\"\n              :data-vv-as=\"$t('label.phone')\"\n              name=\"phone\"\n              autocomplete=\"off\"\n              :label=\"$t('label.phone')\"\n              v-model=\"account.phone\">\n            </v-text-field>\n            <v-text-field\n              disabled\n              name=\"email\"\n              :label=\"$t('label.email') + ' *'\"\n              autocomplete=\"off\"\n              v-model=\"account.email\">\n            </v-text-field>\n          </v-flex>\n          <v-flex xs12 text-xs-center>\n            <v-btn\n              :loading=\"isFetchingApi\"\n              :disabled=\"isFetchingApi\"\n              color=\"primary\"\n              type=\"submit\"\n              >\n                <v-icon left>save</v-icon> {{$t('control.save')}}\n            </v-btn>\n          </v-flex>\n        </v-layout>\n      </v-container>\n    </v-form>\n  </v-card>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nexport default {\n\n  name: 'ChangeInformation',\n\n  data () {\n    return {\n      account: {\n        name: '',\n        phone: '',\n        email: ''\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['isFetchingApi', 'userProfile'])\n  },\n  methods: {\n    ...mapActions(['showNotify', 'getProfile']),\n    ...mapActions('Account', ['changeInformation']),\n    validateBeforeSubmit () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          let obj = {}\n          obj.name = this.account.name\n          obj.phone = this.account.phone\n          this.changeInformation({\n            data: obj,\n            cb: (response) => {\n              this.getProfile({ params: { include: 'roles' } })\n              this.showNotify({\n                color: 'success',\n                text: 'Thay đổi thông tin cá nhân thành công'\n              })\n            }\n          })\n        } else {\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.invalid'),\n            color: 'warning'\n          })\n        }\n      })\n    }\n  },\n  watch: {\n    userProfile: {\n      handler: function (newVal) {\n        this.account = { ...this.account, ...newVal }\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    if (this.userProfile.id) {\n      this.account = { ...this.account, ...this.userProfile }\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n</style>\n"],"sourceRoot":"src/views/account"}]}