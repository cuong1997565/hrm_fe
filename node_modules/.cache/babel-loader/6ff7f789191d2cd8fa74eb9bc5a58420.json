{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/employeeHrm/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/employeeHrm/Detail.vue","mtime":1543199339376},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Listting from './Listting';\nimport { mapActions, mapGetters } from 'vuex';\nimport DialogConfirm from '@/components/DialogConfirm';\nexport default {\n  name: 'employeeDetail',\n  components: {\n    Listting: Listting,\n    DialogConfirm: DialogConfirm\n  },\n  computed: _objectSpread({\n    // title of form Contract modal\n    formTitle: function formTitle() {\n      return this.editedIndex === -1 ? 'Thêm hợp đồng' : 'Sửa hợp đồng';\n    }\n  }, mapGetters('Employee', ['employeeDetail'])),\n  data: function data() {\n    return {\n      dataViewHeight: 0,\n      // dialog contract\n      dialogEditContract: false,\n      editedIndex: -1,\n      sign: null,\n      expiration: null,\n      effective: null,\n      dialogDeleteContract: false,\n      dialogDeleteEmployee: false,\n      // tiêu đề của bảng chi nhánh phòng ban , chức vụ\n      headersPosition: [{\n        text: 'Chi nhánh',\n        value: 'branch',\n        sortable: false\n      }, {\n        text: 'Phòng ban',\n        value: 'department',\n        sortable: false\n      }, {\n        text: 'Chức vụ',\n        value: 'position',\n        sortable: false\n      }],\n      // tiêu đề của bảng hợp đồng\n      headersContract: [{\n        text: 'Tên hợp đồng',\n        value: 'title',\n        sortable: false\n      }, {\n        text: '',\n        sortable: false\n      }, {\n        text: 'Loai hợp đồng',\n        value: 'type',\n        sortable: false\n      }, {\n        text: 'Thời gian',\n        value: 'date_sign',\n        sortable: false\n      }, {\n        text: '',\n        sortable: false\n      }, {\n        text: '',\n        sortable: false\n      }, {\n        text: 'Hành động',\n        value: 'action',\n        sortable: false\n      }],\n      // các loại hợp đồng\n      typeContract: [{\n        name: 'Học việc',\n        value: 0\n      }, {\n        name: 'Cộng tác viên',\n        value: 1\n      }, {\n        name: 'Thử việc',\n        value: 2\n      }, {\n        name: 'Có thời hạn',\n        value: 3\n      }, {\n        name: 'Không thời hạn',\n        value: 4\n      }, {\n        name: 'Khác',\n        value: 5\n      }],\n      // các trạng thái của hợp đồng\n      statusContract: [{\n        name: 'Tiêu chuẩn',\n        value: 0\n      }, {\n        name: 'Chấm dứt',\n        value: 1\n      }, {\n        name: 'Gia hạn',\n        value: 2\n      }],\n      // data constracts\n      contracts: {\n        id: '',\n        employee_id: '',\n        status: 0,\n        type: 0,\n        date_sign: null,\n        date_effective: null,\n        date_expiration: null\n      }\n    };\n  },\n  watch: {},\n  methods: _objectSpread({}, mapActions('Employee', ['getEmployee', 'deleteEmployee']), mapActions('Contracts', ['createContract', 'updateContract', 'deleteContract']), mapActions('Dataview', ['removeDataviewEntry', 'updateDataviewEntry']), mapActions(['showNotify']), {\n    addContract: function addContract() {\n      this.$validator.reset();\n      this.editedIndex = -1;\n      this.contracts = Object.assign({}, this.defaultContract);\n      this.contracts.employee_id = this.employeeDetail.id;\n      this.dialogEditContract = true;\n    },\n    // edit contract\n    editContract: function editContract(item, id) {\n      this.$validator.reset();\n      this.idContract = id;\n      this.editedIndex = 1;\n      this.contracts = Object.assign({}, item);\n      this.dialogEditContract = true;\n    },\n    // them hoac sua contract employee\n    addAndEditContract: function addAndEditContract() {\n      var _this = this;\n\n      if (this.editedIndex === -1) {\n        this.createContract({\n          contract: this.contracts,\n          cb: function cb(response) {\n            setTimeout(function () {\n              _this.contracts = Object.assign({}, _this.defaultContract);\n              _this.editedIndex = -1;\n            }, 300);\n\n            _this.showNotify({\n              color: 'success',\n              text: _this.$t('alert.addContract')\n            });\n\n            _this.getEmployee({\n              employeeId: _this.$route.params.id,\n              params: {\n                include: 'roles,departments,contracts'\n              },\n              cb: function cb(response) {\n                _this.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                });\n              }\n            });\n\n            _this.dialogEditContract = false;\n          }\n        });\n      } else {\n        this.updateContract({\n          id: this.idContract,\n          contract: this.contracts,\n          cb: function cb(response) {\n            _this.showNotify({\n              color: 'success',\n              text: _this.$t('alert.updateContract')\n            });\n\n            setTimeout(function () {\n              _this.contracts = Object.assign({}, _this.defaultContract);\n              _this.editedIndex = -1;\n            }, 300);\n\n            _this.getEmployee({\n              employeeId: _this.$route.params.id,\n              params: {\n                include: 'roles,departments,contracts'\n              },\n              cb: function cb(response) {\n                _this.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                });\n              }\n            });\n\n            _this.dialogEditContract = false;\n          }\n        });\n      }\n    },\n    submitForm: function submitForm() {\n      var _this2 = this;\n\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          _this2.addAndEditContract();\n        }\n      });\n    },\n    // xóa contract\n    removeConfirmContract: function removeConfirmContract(idContract) {\n      this.contracts.id = idContract;\n      this.dialogDeleteContract = true;\n    },\n    removeContract: function removeContract(confirm) {\n      var _this3 = this;\n\n      if (confirm) {\n        this.deleteContract({\n          id: this.contracts.id,\n          cb: function cb(response) {\n            _this3.removeDataviewEntry({\n              name: 'contract',\n              data: _this3.contracts,\n              key: 'id'\n            });\n\n            _this3.$store.dispatch('showNotify', {\n              text: _this3.$t('alert.deleteContract'),\n              color: 'success'\n            });\n\n            _this3.dialogDeleteContract = false;\n\n            _this3.getEmployee({\n              employeeId: _this3.$route.params.id,\n              params: {\n                include: 'roles,departments,contracts'\n              },\n              cb: function cb(response) {\n                _this3.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                });\n              }\n            });\n          },\n          error: function error(_error) {\n            if (_error.status === 404) {\n              _this3.$store.dispatch('showNotify', {\n                text: _this3.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    },\n    removeConfirmEmployee: function removeConfirmEmployee() {\n      this.dialogDeleteEmployee = true;\n    },\n    removeEmployee: function removeEmployee(confirm) {\n      var _this4 = this;\n\n      if (confirm) {\n        this.deleteEmployee({\n          id: this.$route.params.id,\n          cb: function cb(response) {\n            _this4.removeDataviewEntry({\n              name: 'employee',\n              data: _this4.employeeDetail,\n              key: 'id'\n            });\n\n            _this4.$store.dispatch('showNotify', {\n              text: _this4.$t('alert.deleteEmployeeSuccess'),\n              color: 'success'\n            });\n\n            _this4.dialogDeleteEmployee = false;\n\n            _this4.$router.push({\n              name: 'employee'\n            });\n          },\n          error: function error(_error2) {\n            if (_error2.status === 404) {\n              _this4.$store.dispatch('showNotify', {\n                text: _this4.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    }\n  }),\n  created: function created() {\n    if (!this.employeeDetail.id) {\n      this.getEmployee({\n        employeeId: this.$route.params.id,\n        params: {\n          include: 'roles,departments,contracts'\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 50;\n  }\n};",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmUA,OAAA,QAAA,MAAA,YAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,OAAA,aAAA,MAAA,4BAAA;AACA,eAAA;AACA,QAAA,gBADA;AAEA,cAAA;AACA,sBADA;AAEA;AAFA,GAFA;AAMA;AACA;AACA,aAFA,uBAEA;AACA,aAAA,KAAA,WAAA,KAAA,CAAA,CAAA,GAAA,eAAA,GAAA,cAAA;AACA;AAJA,KAKA,WAAA,UAAA,EAAA,CAAA,gBAAA,CAAA,CALA,CANA;AAaA,MAbA,kBAaA;AACA,WAAA;AACA,sBAAA,CADA;AAEA;AACA,0BAAA,KAHA;AAIA,mBAAA,CAAA,CAJA;AAKA,YAAA,IALA;AAMA,kBAAA,IANA;AAOA,iBAAA,IAPA;AAQA,4BAAA,KARA;AASA,4BAAA,KATA;AAUA;AACA,uBAAA,CACA;AAAA,cAAA,WAAA;AAAA,eAAA,QAAA;AAAA,kBAAA;AAAA,OADA,EAEA;AAAA,cAAA,WAAA;AAAA,eAAA,YAAA;AAAA,kBAAA;AAAA,OAFA,EAGA;AAAA,cAAA,SAAA;AAAA,eAAA,UAAA;AAAA,kBAAA;AAAA,OAHA,CAXA;AAgBA;AACA,uBAAA,CACA;AAAA,cAAA,cAAA;AAAA,eAAA,OAAA;AAAA,kBAAA;AAAA,OADA,EAEA;AAAA,cAAA,EAAA;AAAA,kBAAA;AAAA,OAFA,EAGA;AAAA,cAAA,eAAA;AAAA,eAAA,MAAA;AAAA,kBAAA;AAAA,OAHA,EAIA;AAAA,cAAA,WAAA;AAAA,eAAA,WAAA;AAAA,kBAAA;AAAA,OAJA,EAKA;AAAA,cAAA,EAAA;AAAA,kBAAA;AAAA,OALA,EAMA;AAAA,cAAA,EAAA;AAAA,kBAAA;AAAA,OANA,EAOA;AAAA,cAAA,WAAA;AAAA,eAAA,QAAA;AAAA,kBAAA;AAAA,OAPA,CAjBA;AA0BA;AACA,oBAAA,CACA;AAAA,cAAA,UAAA;AAAA,eAAA;AAAA,OADA,EAEA;AAAA,cAAA,eAAA;AAAA,eAAA;AAAA,OAFA,EAGA;AAAA,cAAA,UAAA;AAAA,eAAA;AAAA,OAHA,EAIA;AAAA,cAAA,aAAA;AAAA,eAAA;AAAA,OAJA,EAKA;AAAA,cAAA,gBAAA;AAAA,eAAA;AAAA,OALA,EAMA;AAAA,cAAA,MAAA;AAAA,eAAA;AAAA,OANA,CA3BA;AAmCA;AACA,sBAAA,CACA;AAAA,cAAA,YAAA;AAAA,eAAA;AAAA,OADA,EAEA;AAAA,cAAA,UAAA;AAAA,eAAA;AAAA,OAFA,EAGA;AAAA,cAAA,SAAA;AAAA,eAAA;AAAA,OAHA,CApCA;AAyCA;AACA,iBACA;AACA,YAAA,EADA;AAEA,qBAAA,EAFA;AAGA,gBAAA,CAHA;AAIA,cAAA,CAJA;AAKA,mBAAA,IALA;AAMA,wBAAA,IANA;AAOA,yBAAA;AAPA;AA3CA,KAAA;AAqDA,GAnEA;AAoEA,SAAA,EApEA;AAuEA,6BACA,WAAA,UAAA,EAAA,CAAA,aAAA,EAAA,gBAAA,CAAA,CADA,EAEA,WAAA,WAAA,EAAA,CAAA,gBAAA,EAAA,gBAAA,EAAA,gBAAA,CAAA,CAFA,EAGA,WAAA,UAAA,EAAA,CAAA,qBAAA,EAAA,qBAAA,CAAA,CAHA,EAIA,WAAA,CAAA,YAAA,CAAA,CAJA;AAKA,eALA,yBAKA;AACA,WAAA,UAAA,CAAA,KAAA;AACA,WAAA,WAAA,GAAA,CAAA,CAAA;AACA,WAAA,SAAA,GAAA,OAAA,MAAA,CAAA,EAAA,EAAA,KAAA,eAAA,CAAA;AACA,WAAA,SAAA,CAAA,WAAA,GAAA,KAAA,cAAA,CAAA,EAAA;AACA,WAAA,kBAAA,GAAA,IAAA;AACA,KAXA;AAYA;AACA,gBAbA,wBAaA,IAbA,EAaA,EAbA,EAaA;AACA,WAAA,UAAA,CAAA,KAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,CAAA;AACA,WAAA,SAAA,GAAA,OAAA,MAAA,CAAA,EAAA,EAAA,IAAA,CAAA;AACA,WAAA,kBAAA,GAAA,IAAA;AACA,KAnBA;AAoBA;AACA,sBArBA,gCAqBA;AAAA;;AACA,UAAA,KAAA,WAAA,KAAA,CAAA,CAAA,EAAA;AACA,aAAA,cAAA,CAAA;AACA,oBAAA,KAAA,SADA;AAEA,cAAA,YAAA,QAAA,EAAA;AACA,uBAAA,YAAA;AACA,oBAAA,SAAA,GAAA,OAAA,MAAA,CAAA,EAAA,EAAA,MAAA,eAAA,CAAA;AACA,oBAAA,WAAA,GAAA,CAAA,CAAA;AACA,aAHA,EAGA,GAHA;;AAIA,kBAAA,UAAA,CAAA;AACA,qBAAA,SADA;AAEA,oBAAA,MAAA,EAAA,CAAA,mBAAA;AAFA,aAAA;;AAIA,kBAAA,WAAA,CAAA;AACA,0BAAA,MAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,sBAAA;AAAA,yBAAA;AAAA,eAFA;AAGA,kBAAA,YAAA,QAAA,EAAA;AACA,sBAAA,mBAAA,CAAA;AACA,wBAAA,UADA;AAEA,wBAAA,QAFA;AAGA,uBAAA;AAHA,iBAAA;AAKA;AATA,aAAA;;AAWA,kBAAA,kBAAA,GAAA,KAAA;AACA;AAvBA,SAAA;AAyBA,OA1BA,MA0BA;AACA,aAAA,cAAA,CAAA;AACA,cAAA,KAAA,UADA;AAEA,oBAAA,KAAA,SAFA;AAGA,cAAA,YAAA,QAAA,EAAA;AACA,kBAAA,UAAA,CAAA;AACA,qBAAA,SADA;AAEA,oBAAA,MAAA,EAAA,CAAA,sBAAA;AAFA,aAAA;;AAIA,uBAAA,YAAA;AACA,oBAAA,SAAA,GAAA,OAAA,MAAA,CAAA,EAAA,EAAA,MAAA,eAAA,CAAA;AACA,oBAAA,WAAA,GAAA,CAAA,CAAA;AACA,aAHA,EAGA,GAHA;;AAIA,kBAAA,WAAA,CAAA;AACA,0BAAA,MAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,sBAAA;AAAA,yBAAA;AAAA,eAFA;AAGA,kBAAA,YAAA,QAAA,EAAA;AACA,sBAAA,mBAAA,CAAA;AACA,wBAAA,UADA;AAEA,wBAAA,QAFA;AAGA,uBAAA;AAHA,iBAAA;AAKA;AATA,aAAA;;AAWA,kBAAA,kBAAA,GAAA,KAAA;AACA;AAxBA,SAAA;AA0BA;AACA,KA5EA;AA6EA,cA7EA,wBA6EA;AAAA;;AACA,WAAA,UAAA,CAAA,WAAA,GAAA,IAAA,CAAA,kBAAA;AACA,YAAA,MAAA,EAAA;AACA,iBAAA,kBAAA;AACA;AACA,OAJA;AAKA,KAnFA;AAoFA;AACA,yBArFA,iCAqFA,UArFA,EAqFA;AACA,WAAA,SAAA,CAAA,EAAA,GAAA,UAAA;AACA,WAAA,oBAAA,GAAA,IAAA;AACA,KAxFA;AAyFA,kBAzFA,0BAyFA,OAzFA,EAyFA;AAAA;;AACA,UAAA,OAAA,EAAA;AACA,aAAA,cAAA,CAAA;AACA,cAAA,KAAA,SAAA,CAAA,EADA;AAEA,cAAA,YAAA,QAAA,EAAA;AACA,mBAAA,mBAAA,CAAA;AACA,oBAAA,UADA;AAEA,oBAAA,OAAA,SAFA;AAGA,mBAAA;AAHA,aAAA;;AAKA,mBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,oBAAA,OAAA,EAAA,CAAA,sBAAA,CADA;AAEA,qBAAA;AAFA,aAAA;;AAIA,mBAAA,oBAAA,GAAA,KAAA;;AACA,mBAAA,WAAA,CAAA;AACA,0BAAA,OAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,sBAAA;AAAA,yBAAA;AAAA,eAFA;AAGA,kBAAA,YAAA,QAAA,EAAA;AACA,uBAAA,mBAAA,CAAA;AACA,wBAAA,UADA;AAEA,wBAAA,QAFA;AAGA,uBAAA;AAHA,iBAAA;AAKA;AATA,aAAA;AAWA,WAxBA;AAyBA,iBAAA,eAAA,MAAA,EAAA;AACA,gBAAA,OAAA,MAAA,KAAA,GAAA,EAAA;AACA,qBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,sBAAA,OAAA,EAAA,CAAA,iBAAA,CADA;AAEA,uBAAA;AAFA,eAAA;AAIA;AACA;AAhCA,SAAA;AAkCA;AACA,KA9HA;AA+HA,yBA/HA,mCA+HA;AACA,WAAA,oBAAA,GAAA,IAAA;AACA,KAjIA;AAkIA,kBAlIA,0BAkIA,OAlIA,EAkIA;AAAA;;AACA,UAAA,OAAA,EAAA;AACA,aAAA,cAAA,CAAA;AACA,cAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,cAAA,YAAA,QAAA,EAAA;AACA,mBAAA,mBAAA,CAAA;AACA,oBAAA,UADA;AAEA,oBAAA,OAAA,cAFA;AAGA,mBAAA;AAHA,aAAA;;AAKA,mBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,oBAAA,OAAA,EAAA,CAAA,6BAAA,CADA;AAEA,qBAAA;AAFA,aAAA;;AAIA,mBAAA,oBAAA,GAAA,KAAA;;AACA,mBAAA,OAAA,CAAA,IAAA,CAAA;AAAA,oBAAA;AAAA,aAAA;AACA,WAdA;AAeA,iBAAA,eAAA,OAAA,EAAA;AACA,gBAAA,QAAA,MAAA,KAAA,GAAA,EAAA;AACA,qBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,sBAAA,OAAA,EAAA,CAAA,iBAAA,CADA;AAEA,uBAAA;AAFA,eAAA;AAIA;AACA;AAtBA,SAAA;AAwBA;AACA;AA7JA,IAvEA;AAsOA,SAtOA,qBAsOA;AACA,QAAA,CAAA,KAAA,cAAA,CAAA,EAAA,EAAA;AACA,WAAA,WAAA,CAAA;AAAA,oBAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AAAA,gBAAA;AAAA,mBAAA;AAAA;AAAA,OAAA;AACA;AACA,GA1OA;AA2OA,SA3OA,qBA2OA;AACA,SAAA,cAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,YAAA,GAAA,EAAA;AACA;AA7OA,CAAA","sourcesContent":["<template>\n  <v-layout ref=\"laylout\" row fill-height>\n   <v-flex xs4>\n    <listting :is-mini=\"true\" />\n  </v-flex>\n  <v-flex xs8 class=\"border-e0-left\">\n   <v-toolbar dense color=\"white\" flat>\n    <v-toolbar-title class=\"text-uppercase\">{{employeeDetail.name}}</v-toolbar-title>\n    <v-spacer></v-spacer>\n    <v-tooltip bottom>\n      <v-btn slot='activator' v-if=\"canAccess('employee.update')\" icon>\n        <v-icon class=\"theme--light teal--text\">edit</v-icon>\n      </v-btn>\n      <span>Sửa</span>\n    </v-tooltip>\n    <v-tooltip bottom>\n      <v-btn slot=\"activator\" v-if=\"canAccess('employee.delete')\" icon @click=\"removeConfirmEmployee\">\n        <v-icon class='theme--light pink--text'>delete</v-icon>\n      </v-btn>\n      <span>Xóa</span>\n    </v-tooltip>\n    <v-tooltip bottom>\n      <v-btn slot=\"activator\" icon @click=\"$router.push({name: 'employee-hrm', query: { reload: true }} )\">\n        <v-icon>close</v-icon>\n      </v-btn>\n      <span>Đóng</span>\n    </v-tooltip>\n  </v-toolbar>\n  <v-container fluid class=\"white scroll-y border-e0-top\" :style=\"{height: dataViewHeight + 'px'}\">\n    <v-layout row>\n      <v-flex xs4 v-if=\"employeeDetail.avatar_path\">\n        <img width=\"100%\" style=\"max-height: 250px;\" :src=\"employeeDetail.avatar_path\" alt=\"\">\n      </v-flex>\n      <v-flex xs8 style=\"padding-left:10px;\">\n        <v-layout>\n          <v-flex xs4>\n           <b>Mã nhân viên</b>\n         </v-flex>\n         <v-flex xs8 class=\"copytext\">\n           <span @click.stop=\"clickToCopy\" class=\"click-copy\"><span class=\"text-uppercase\">{{ employeeDetail.code }}</span></span>\n         </v-flex>\n       </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n          <b>Tên nhân viên</b>\n        </v-flex>\n        <v-flex xs8>\n         <span class=\"text-capitalize\">{{ employeeDetail.name }}</span>\n       </v-flex> </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n         <b>Email</b>\n       </v-flex>\n       <v-flex xs8 class=\"copytext\">\n         <span @click.stop=\"clickToCopy\" class=\"click-copy text-capitalize\">{{ employeeDetail.email }}</span>\n       </v-flex> </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n         <b>Trình độ chuyên môn</b>\n       </v-flex>\n       <v-flex xs8>\n         {{ employeeDetail.qualification }}\n       </v-flex> </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n         <b>Địa chỉ</b>\n       </v-flex>\n       <v-flex xs8>\n         {{ employeeDetail.address }}\n       </v-flex> </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n         <b>Số điện thoại</b>\n       </v-flex>\n       <v-flex xs8 class=\"copytext\">\n         <span @click.stop=\"clickToCopy\" class=\"click-copy text-capitalize\">{{ employeeDetail.phone }}</span>\n       </v-flex> </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n          <b>Giới tính</b>\n        </v-flex>\n        <v-flex xs8>\n         {{ employeeDetail.gender_txt }}\n       </v-flex> </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n          <b>Ngày sinh</b>\n        </v-flex>\n        <v-flex xs8>\n         {{ employeeDetail.date_of_birth_format }}\n       </v-flex> </v-layout>\n       <v-layout class=\"mt-2\">\n        <v-flex xs4>\n          <b>Trạng thái</b>\n        </v-flex>\n        <v-flex xs8>\n         {{ employeeDetail.status_txt }}\n       </v-flex>\n     </v-layout>\n   </v-flex>\n </v-layout>\n <v-flex class=\"mt-4\" xs12 v-if=\"employeeDetail.departments\">\n  <h3>Vị trí , chức danh của nhân viên</h3>\n  <v-data-table\n  :headers = \"headersPosition\"\n  :items = \"employeeDetail.departments.data\"\n  hide-actions\n  class=\"elevation-1 mt-2\"\n  >\n  <template slot=\"items\" slot-scope=\"props\">\n    <td> {{ props.item.branch_name }} </td>\n    <td> {{ props.item.name }} </td>\n    <td> {{ props.item.position_name }} </td>\n  </template>\n</v-data-table>\n</v-flex>\n<v-flex class=\"mt-4\" xs12 v-if=\"employeeDetail.contracts\">\n  <h3>Hợp đồng\n    <v-tooltip bottom>\n      <v-btn slot=\"activator\" v-if=\"canAccess('employee.create')\"\n      class=\"mr-5\" icon color=\"primary\"\n      @click=\"addContract\"\n      >\n      <v-icon>add</v-icon\n        > </v-btn>\n        <span>Thêm hợp đồng</span>\n      </v-tooltip>\n    </h3>\n    <v-data-table\n    v-if = \"employeeDetail.contracts\"\n    id=\"tableContract\"\n    :headers=\"headersContract\"\n    :items=\"employeeDetail.contracts.data\"\n    hide-actions\n    class=\"elevation-1 mt-2\"\n    >\n    <template slot=\"items\" slot-scope=\"props\">\n      <td colspan=\"2\"> {{props.item.title}}  </td>\n      <td> {{props.item.type_txt}}<br><b>Trạng thái : </b>{{ props.item.status_txt }} </td>\n      <td colspan=\"3\">\n        <b>Ngày kí:</b> {{ props.item.date_sign_format }}<br>\n        <b>Hiệu lực</b> {{ props.item.date_effective_format }}<br>\n        <b>Kết thúc:</b> {{ props.item.date_expiration_format }}<br>\n      </td>\n      <td colspan=\"2\" style=\"padding:2px;\">\n        <v-tooltip bottom class=\"ml-3\">\n          <v-btn style=\"margin:0px;\" slot='activator' v-if=\"canAccess('employee.update')\" @click=\"editContract(props.item, props.item.id )\" icon>\n            <v-icon size=\"19px\" class='theme--light teal--text'>edit</v-icon>\n          </v-btn>\n          <span>Sửa</span>\n        </v-tooltip>\n        <v-tooltip bottom>\n          <v-btn style=\"margin: 0px;\" slot=\"activator\" v-if=\"canAccess('employee.delete')\" @click=\"removeConfirmContract(props.item.id)\" icon >\n            <v-icon size=\"19px\" class=\"theme--light pink--text\">delete</v-icon>\n          </v-btn>\n          <span>Xóa</span>\n        </v-tooltip>\n      </td>\n    </template>\n  </v-data-table>\n</v-flex>\n</v-container>\n<v-dialog v-model=\"dialogEditContract\" max-width=\"800px\">\n  <v-form  class=\"pa-0\" @submit.prevent=\"submitForm\" >\n    <v-card class=\"pa-0\">\n      <v-card-title class=\"pt-3\">\n        <span class=\"headline\" width=\"100%\" style=\"margin:0 auto\">{{ formTitle }}</span>\n      </v-card-title>\n      <v-divider></v-divider>\n      <!-- form edit -->\n      <v-card-text id=\"formSub\" class=\"pt-0\">\n        <v-container grid-list-md class=\"white scroll-y\">\n          <v-layout row wrap>\n            <v-flex xs6 class=\"pr-2\">\n             <!-- title contract -->\n             <v-text-field\n             tabindex=\"1\"\n             ref=\"firstInput\"\n             v-validate=\"'required'\"\n             class=\"input-required\"\n             placeholder=\"Nhập tiêu đề hợp đồng\"\n             :error-messages=\"errors.has('title') ? errors.collect('title') : []\"\n             :data-vv-as=\"$t('label.title')\"\n             name=\"title\"\n             :label=\"$t('label.title')\"\n             v-model=\"contracts.title\"> </v-text-field>\n             <!-- type contract -->\n             <v-select\n             tabindex=\"3\"\n             v-validate=\"'required'\"\n             :error-messages=\"errors.has('type') ? errors.collect('type') : []\"\n             :data-vv-as=\"$t('label.type')\"\n             name=\"type\"\n             :label=\"$t('label.type')\"\n             v-model=\"contracts.type\"\n             :items=\"typeContract\"\n             item-value=\"value\"\n             item-text=\"name\"> </v-select>\n             <!-- link contract -->\n             <!-- link contract -->\n             <v-text-field\n             placeholder=\"Nhập link hợp đồng\"\n             v-validate=\"'url:require_protocol'\"\n             :error-messages=\"errors.has('link_contract') ? errors.collect('link_contract') : []\"\n             :data-vv-as=\"$t('label.link_contract')\"\n             :tabindex=\"5\"\n             :label=\"'Link hợp đồng'\"\n             name=\"link_contract\"\n             v-model=\"contracts.link\"> </v-text-field>\n             <!-- status contract-->\n             <v-select\n             tabindex=\"7\"\n             v-validate=\"'required'\"\n             :error-messages=\"errors.has('status') ? errors.collect('status') : []\"\n             :data-vv-as=\"$t('label.status')\"\n             name=\"status\"\n             :label=\"$t('label.status')\"\n             v-model=\"contracts.status\"\n             :items=\"statusContract\"\n             item-value=\"value\"\n             item-text=\"name\"> </v-select>\n           </v-flex>\n           <v-flex xs6 class=\"pl-2\">\n            <!-- date_sign -->\n            <v-menu\n            ref=\"sign\"\n            :close-on-content-click=\"false\"\n            v-model=\"sign\"\n            :nudge-right=\"40\"\n            :return-value.sync=\"contracts.date_sign\"\n            lazy\n            transition=\"scale-transition\"\n            offset-y\n            full-width\n            min-width=\"290px\"\n            >\n            <v-text-field\n            slot=\"activator\"\n            v-model=\"contracts.date_sign\"\n            label=\"Ngày ký\"\n            :tabindex=\"5\"\n            readonly\n            ></v-text-field>\n            <v-date-picker v-model=\"contracts.date_sign\" no-title scrollable>\n              <v-spacer></v-spacer>\n              <v-btn flat color=\"primary\" @click=\"sign = false\">Cancel</v-btn>\n              <v-btn flat color=\"primary\" @click=\"$refs.sign.save(contracts.date_sign)\">OK</v-btn>\n            </v-date-picker>\n          </v-menu>\n\n          <!--date_expiration-->\n          <v-menu\n          ref=\"expiration\"\n          :close-on-content-click=\"false\"\n          v-model=\"expiration\"\n          :nudge-right=\"40\"\n          :return-value.sync=\"contracts.date_expiration\"\n          lazy\n          transition=\"scale-transition\"\n          offset-y\n          full-width\n          min-width=\"290px\"\n          >\n          <v-text-field\n          slot=\"activator\"\n          v-model=\"contracts.date_expiration\"\n          label=\"Ngày hết hạn\"\n          :tabindex=\"6\"\n          readonly\n          ></v-text-field>\n          <v-date-picker v-model=\"contracts.date_expiration\" no-title scrollable>\n            <v-spacer></v-spacer>\n            <v-btn flat color=\"primary\" @click=\"expiration = false\">Cancel</v-btn>\n            <v-btn flat color=\"primary\" @click=\"$refs.expiration.save(contracts.date_expiration)\">OK</v-btn>\n          </v-date-picker>\n        </v-menu>\n\n        <!-- date_effective -->\n        <v-menu\n        ref=\"effective\"\n        :close-on-content-click=\"false\"\n        v-model=\"effective\"\n        :nudge-right=\"40\"\n        :return-value.sync=\"contracts.date_effective\"\n        lazy\n        transition=\"scale-transition\"\n        offset-y\n        full-width\n        min-width=\"290px\"\n        >\n        <v-text-field\n        slot=\"activator\"\n        v-model=\"contracts.date_effective\"\n        :tabindex=\"7\"\n        label=\"Ngày  hiệu lực\"\n        readonly\n        ></v-text-field>\n        <v-date-picker v-model=\"contracts.date_effective\" no-title scrollable>\n          <v-spacer></v-spacer>\n          <v-btn flat color=\"primary\" @click=\"effective = false\">Cancel</v-btn>\n          <v-btn flat color=\"primary\" @click=\"$refs.effective.save(contracts.date_effective)\">OK</v-btn>\n        </v-date-picker>\n      </v-menu>\n    </v-flex>\n  </v-layout>\n</v-container>\n</v-card-text>\n<v-divider></v-divider>\n<v-card-actions>\n  <v-spacer></v-spacer>\n  <v-btn tabindex=\"9\" color=\"error\" flat>Hủy bỏ</v-btn>\n  <v-btn tabindex=\"8\" class=\"green--text text-uppercase\" flat type=\"submit\"><span v-if=\"editedIndex!==-1\">Lưu lại</span><span v-else>Thêm mới</span></v-btn>\n  <div :tabindex=\"8\" ></div>\n</v-card-actions>\n</v-card>\n</v-form>\n</v-dialog>\n</v-flex>\n<dialog-confirm v-model=\"dialogDeleteEmployee\" @input=\"removeEmployee\" />\n<dialog-confirm v-model=\"dialogDeleteContract\" @input=\"removeContract\" />\n</v-layout>\n</template>\n<script>\nimport Listting from './Listting'\nimport { mapActions, mapGetters } from 'vuex'\nimport DialogConfirm from '@/components/DialogConfirm'\nexport default{\n  name: 'employeeDetail',\n  components: {\n    Listting,\n    DialogConfirm\n  },\n  computed: {\n    // title of form Contract modal\n    formTitle () {\n      return this.editedIndex === -1 ? 'Thêm hợp đồng' : 'Sửa hợp đồng'\n    },\n    ...mapGetters('Employee', ['employeeDetail'])\n  },\n  data () {\n    return {\n      dataViewHeight: 0,\n      // dialog contract\n      dialogEditContract: false,\n      editedIndex: -1,\n      sign: null,\n      expiration: null,\n      effective: null,\n      dialogDeleteContract: false,\n      dialogDeleteEmployee: false,\n      // tiêu đề của bảng chi nhánh phòng ban , chức vụ\n      headersPosition: [\n        { text: 'Chi nhánh', value: 'branch', sortable: false },\n        { text: 'Phòng ban', value: 'department', sortable: false },\n        { text: 'Chức vụ', value: 'position', sortable: false }\n      ],\n      // tiêu đề của bảng hợp đồng\n      headersContract: [\n        { text: 'Tên hợp đồng', value: 'title', sortable: false },\n        { text: '', sortable: false },\n        { text: 'Loai hợp đồng', value: 'type', sortable: false },\n        { text: 'Thời gian', value: 'date_sign', sortable: false },\n        { text: '', sortable: false },\n        { text: '', sortable: false },\n        { text: 'Hành động', value: 'action', sortable: false }\n      ],\n      // các loại hợp đồng\n      typeContract: [\n        { name: 'Học việc', value: 0 },\n        { name: 'Cộng tác viên', value: 1 },\n        { name: 'Thử việc', value: 2 },\n        { name: 'Có thời hạn', value: 3 },\n        { name: 'Không thời hạn', value: 4 },\n        { name: 'Khác', value: 5 }\n      ],\n      // các trạng thái của hợp đồng\n      statusContract: [\n        { name: 'Tiêu chuẩn', value: 0 },\n        { name: 'Chấm dứt', value: 1 },\n        { name: 'Gia hạn', value: 2 }\n      ],\n      // data constracts\n      contracts:\n      {\n        id: '',\n        employee_id: '',\n        status: 0,\n        type: 0,\n        date_sign: null,\n        date_effective: null,\n        date_expiration: null\n      }\n    }\n  },\n  watch: {\n\n  },\n  methods: {\n    ...mapActions('Employee', ['getEmployee', 'deleteEmployee']),\n    ...mapActions('Contracts', ['createContract', 'updateContract', 'deleteContract']),\n    ...mapActions('Dataview', ['removeDataviewEntry', 'updateDataviewEntry']),\n    ...mapActions(['showNotify']),\n    addContract () {\n      this.$validator.reset()\n      this.editedIndex = -1\n      this.contracts = Object.assign({}, this.defaultContract)\n      this.contracts.employee_id = this.employeeDetail.id\n      this.dialogEditContract = true\n    },\n    // edit contract\n    editContract (item, id) {\n      this.$validator.reset()\n      this.idContract = id\n      this.editedIndex = 1\n      this.contracts = Object.assign({}, item)\n      this.dialogEditContract = true\n    },\n    // them hoac sua contract employee\n    addAndEditContract () {\n      if (this.editedIndex === -1) {\n        this.createContract({\n          contract: this.contracts,\n          cb: (response) => {\n            setTimeout(() => {\n              this.contracts = Object.assign({}, this.defaultContract)\n              this.editedIndex = -1\n            }, 300)\n            this.showNotify({\n              color: 'success',\n              text: this.$t('alert.addContract')\n            })\n            this.getEmployee({\n              employeeId: this.$route.params.id,\n              params: { include: 'roles,departments,contracts' },\n              cb: (response) => {\n                this.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                })\n              }\n            })\n            this.dialogEditContract = false\n          }\n        })\n      } else {\n        this.updateContract({\n          id: this.idContract,\n          contract: this.contracts,\n          cb: (response) => {\n            this.showNotify({\n              color: 'success',\n              text: this.$t('alert.updateContract')\n            })\n            setTimeout(() => {\n              this.contracts = Object.assign({}, this.defaultContract)\n              this.editedIndex = -1\n            }, 300)\n            this.getEmployee({\n              employeeId: this.$route.params.id,\n              params: { include: 'roles,departments,contracts' },\n              cb: (response) => {\n                this.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                })\n              }\n            })\n            this.dialogEditContract = false\n          }\n        })\n      }\n    },\n    submitForm () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          this.addAndEditContract()\n        }\n      })\n    },\n    // xóa contract\n    removeConfirmContract (idContract) {\n      this.contracts.id = idContract\n      this.dialogDeleteContract = true\n    },\n    removeContract (confirm) {\n      if (confirm) {\n        this.deleteContract({\n          id: this.contracts.id,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'contract',\n              data: this.contracts,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.deleteContract'),\n              color: 'success'\n            })\n            this.dialogDeleteContract = false\n            this.getEmployee({\n              employeeId: this.$route.params.id,\n              params: { include: 'roles,departments,contracts' },\n              cb: (response) => {\n                this.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                })\n              }\n            })\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    },\n    removeConfirmEmployee () {\n      this.dialogDeleteEmployee = true\n    },\n    removeEmployee (confirm) {\n      if (confirm) {\n        this.deleteEmployee({\n          id: this.$route.params.id,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'employee',\n              data: this.employeeDetail,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.deleteEmployeeSuccess'),\n              color: 'success'\n            })\n            this.dialogDeleteEmployee = false\n            this.$router.push({ name: 'employee' })\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    }\n  },\n  created () {\n    if (!this.employeeDetail.id) {\n      this.getEmployee({ employeeId: this.$route.params.id, params: { include: 'roles,departments,contracts' } })\n    }\n  },\n  mounted () {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 50\n  }\n\n}\n</script>\n<style scoped>\n  #tableContract td{\n    padding-top: 5px;\n    padding-bottom: 5px;\n  }\n</style>\n"],"sourceRoot":"src/views/employeeHrm"}]}