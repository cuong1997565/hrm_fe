{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/employee/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/employee/Detail.vue","mtime":1543199339376},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _slicedToArray from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/slicedToArray\";\nimport _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Listting from './Listting';\nimport { mapActions, mapGetters } from 'vuex';\nimport DialogConfirm from '@/components/DialogConfirm';\nexport default {\n  name: 'employeeDetail',\n  components: {\n    Listting: Listting,\n    DialogConfirm: DialogConfirm\n  },\n  data: function data() {\n    return {\n      contracts: {\n        id: '',\n        employee_id: '',\n        status: 0,\n        type: 0,\n        date_sign: null,\n        date_effective: null,\n        date_expiration: null\n      },\n      // các loại hợp đồng\n      typeContract: [{\n        name: 'Học việc',\n        value: 0\n      }, {\n        name: 'Cộng tác viên',\n        value: 1\n      }, {\n        name: 'Thử việc',\n        value: 2\n      }, {\n        name: 'Có thời hạn',\n        value: 3\n      }, {\n        name: 'Không thời hạn',\n        value: 4\n      }, {\n        name: 'Khác',\n        value: 5\n      }],\n      // các trạng thái của hợp đồng\n      statusContract: [{\n        name: 'Tiêu chuẩn',\n        value: 0\n      }, {\n        name: 'Chấm dứt',\n        value: 1\n      }, {\n        name: 'Gia hạn',\n        value: 2\n      }],\n      // tiêu đề của bảng chi nhánh phòng ban , chức vụ\n      headersPosition: [{\n        text: 'Chi nhánh',\n        value: 'branch',\n        sortable: false\n      }, {\n        text: 'Phòng ban',\n        value: 'department',\n        sortable: false\n      }, {\n        text: 'Chức vụ',\n        value: 'position',\n        sortable: false\n      }],\n      // tiêu đề của bảng hợp đồng\n      headersContract: [{\n        text: 'Tên hợp đồng',\n        value: 'title',\n        sortable: false\n      }, {\n        text: '',\n        sortable: false\n      }, {\n        text: 'Loai hợp đồng',\n        value: 'type',\n        sortable: false\n      }, {\n        text: 'Thời gian',\n        value: 'date_sign',\n        sortable: false\n      }, {\n        text: '',\n        sortable: false\n      }, {\n        text: '',\n        sortable: false\n      }, {\n        text: 'Hành động',\n        value: 'action',\n        sortable: false\n      }],\n      dataViewHeight: 0,\n      expiration: null,\n      dialogDeleteEmployee: false,\n      dialogEditContract: false,\n      dialogDeleteContract: false,\n      dateSign: false,\n      dateEffective: false,\n      dateExpiration: false,\n      editedIndex: -1,\n      defaultContract: {\n        status: 0,\n        type: 0\n      }\n    };\n  },\n  computed: _objectSpread({\n    // title of form Contract modal\n    formTitle: function formTitle() {\n      return this.editedIndex === -1 ? 'Thêm hợp đồng' : 'Sửa hợp đồng';\n    }\n  }, mapGetters('Employee', ['employeeDetail'])),\n  watch: {\n    dialogEditContract: function dialogEditContract(val) {\n      var _this = this;\n\n      if (!val) return;\n      requestAnimationFrame(function () {\n        _this.$refs.firstInput.focus();\n      });\n    },\n    dateSign: function dateSign(val) {\n      this.contracts.date_sign = this.formatDate(this.contracts.date_sign);\n    },\n    dateEffective: function dateEffective(val) {\n      this.contracts.date_effective = this.formatDate(this.contracts.date_effective);\n    },\n    dateExpiration: function dateExpiration(val) {\n      this.contracts.date_expiration = this.formatDate(this.contracts.date_expiration);\n    },\n    dataEmployee: function dataEmployee(val) {\n      this.employee = val;\n    }\n  },\n  methods: _objectSpread({}, mapActions(['setMiniDrawer']), mapActions('Contracts', ['createContract', 'updateContract', 'deleteContract']), mapActions('Employee', ['getEmployee', 'setEmployee', 'deleteEmployee']), mapActions('Dataview', ['removeDataviewEntry', 'updateDataviewEntry', 'reloadDataview']), mapActions(['showNotify']), {\n    editEmployee: function editEmployee() {\n      this.getEmployee({\n        employeeId: this.$route.params.id,\n        params: {\n          include: 'roles,departments.branch,contracts'\n        }\n      });\n      this.$router.push({\n        name: 'employee-edit',\n        params: {\n          id: this.$route.params.id\n        }\n      });\n    },\n    formatDate: function formatDate(date) {\n      if (!date) return null;\n\n      var _date$split = date.split('-'),\n          _date$split2 = _slicedToArray(_date$split, 3),\n          year = _date$split2[0],\n          month = _date$split2[1],\n          day = _date$split2[2];\n\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    },\n    parseDate: function parseDate(date) {\n      if (!date) return null;\n\n      var _date$split3 = date.split('-'),\n          _date$split4 = _slicedToArray(_date$split3, 3),\n          month = _date$split4[0],\n          day = _date$split4[1],\n          year = _date$split4[2];\n\n      return \"\".concat(year, \"-\").concat(month.padStart(2, '0'), \"-\").concat(day.padStart(2, '0'));\n    },\n    // xóa employee\n    removeConfirmEmployee: function removeConfirmEmployee() {\n      this.dialogDeleteEmployee = true;\n    },\n    removeEmployee: function removeEmployee(confirm) {\n      var _this2 = this;\n\n      if (confirm) {\n        this.deleteEmployee({\n          id: this.$route.params.id,\n          cb: function cb(response) {\n            _this2.removeDataviewEntry({\n              name: 'employee',\n              data: _this2.employeeDetail,\n              key: 'id'\n            });\n\n            _this2.$store.dispatch('showNotify', {\n              text: _this2.$t('alert.deleteEmployeeSuccess'),\n              color: 'success'\n            });\n\n            _this2.dialogDeleteEmployee = false;\n\n            _this2.$router.push({\n              name: 'employee'\n            });\n          },\n          error: function error(_error) {\n            if (_error.status === 404) {\n              _this2.$store.dispatch('showNotify', {\n                text: _this2.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    },\n    // xóa contract\n    removeConfirmContract: function removeConfirmContract(idContract) {\n      this.contracts.id = idContract;\n      this.dialogDeleteContract = true;\n    },\n    removeContract: function removeContract(confirm) {\n      var _this3 = this;\n\n      if (confirm) {\n        this.deleteContract({\n          id: this.contracts.id,\n          cb: function cb(response) {\n            _this3.removeDataviewEntry({\n              name: 'contract',\n              data: _this3.contracts,\n              key: 'id'\n            });\n\n            _this3.$store.dispatch('showNotify', {\n              text: _this3.$t('alert.deleteContract'),\n              color: 'success'\n            });\n\n            _this3.dialogDeleteContract = false;\n\n            _this3.getEmployee({\n              employeeId: _this3.$route.params.id,\n              params: {\n                include: 'roles,departments,contracts'\n              },\n              cb: function cb(response) {\n                _this3.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                });\n              }\n            });\n          },\n          error: function error(_error2) {\n            if (_error2.status === 404) {\n              _this3.$store.dispatch('showNotify', {\n                text: _this3.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    },\n    // contract\n    editContract: function editContract(item, id) {\n      this.$validator.reset();\n      this.idContract = id;\n      this.editedIndex = 1;\n      this.contracts = Object.assign({}, item);\n      this.dialogEditContract = true;\n    },\n    addContract: function addContract() {\n      this.$validator.reset();\n      this.editedIndex = -1;\n      this.contracts = Object.assign({}, this.defaultContract);\n      this.dateExpirationConstract();\n      this.dateSignContract();\n      this.contracts.employee_id = this.employeeDetail.id;\n      this.dialogEditContract = true;\n    },\n    closeContract: function closeContract() {\n      var _this4 = this;\n\n      this.dialogEditContract = false;\n      setTimeout(function () {\n        if (_this4.editedIndex === -1) {\n          _this4.editedIndex = -1;\n        } else {\n          _this4.contracts = Object.assign({}, _this4.defaultContract);\n          _this4.editedIndex = -1;\n        }\n      }, 300);\n    },\n    submitForm: function submitForm() {\n      var _this5 = this;\n\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          if (_this5.editedIndex === -1) {\n            _this5.createContract({\n              contract: _this5.contracts,\n              cb: function cb(response) {\n                _this5.dialog = false;\n                setTimeout(function () {\n                  _this5.contracts = Object.assign({}, _this5.defaultContract);\n                  _this5.editedIndex = -1;\n                }, 300);\n\n                _this5.showNotify({\n                  color: 'success',\n                  text: _this5.$t('alert.addContract')\n                });\n\n                _this5.getEmployee({\n                  employeeId: _this5.$route.params.id,\n                  params: {\n                    include: 'roles,departments,contracts'\n                  },\n                  cb: function cb(response) {\n                    _this5.updateDataviewEntry({\n                      name: 'employee',\n                      data: response,\n                      key: 'id'\n                    });\n                  }\n                });\n\n                _this5.dialogEditContract = false;\n              }\n            });\n          } else {\n            _this5.updateContract({\n              id: _this5.idContract,\n              contract: _this5.contracts,\n              cb: function cb(response) {\n                _this5.showNotify({\n                  color: 'success',\n                  text: _this5.$t('alert.updateContract')\n                });\n\n                setTimeout(function () {\n                  _this5.contracts = Object.assign({}, _this5.defaultContract);\n                  _this5.editedIndex = -1;\n                }, 300);\n\n                _this5.getEmployee({\n                  employeeId: _this5.$route.params.id,\n                  params: {\n                    include: 'roles,departments,contracts'\n                  },\n                  cb: function cb(response) {\n                    _this5.updateDataviewEntry({\n                      name: 'employee',\n                      data: response,\n                      key: 'id'\n                    });\n                  }\n                });\n\n                _this5.dialogEditContract = false;\n              }\n            });\n          }\n        }\n      });\n    },\n    // thời gian đăng kí , có hiệu lực hợp đồng\n    dateSignContract: function dateSignContract() {\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth() + 1;\n      var yyyy = today.getFullYear();\n\n      if (dd < 10) {\n        dd = '0' + dd;\n      }\n\n      if (mm < 10) {\n        mm = '0' + mm;\n      }\n\n      today = yyyy + '-' + mm + '-' + dd;\n      this.contracts.date_sign = today;\n      this.contracts.date_effective = today;\n    },\n    // thời gian kết thúc hợp đồng\n    dateExpirationConstract: function dateExpirationConstract() {\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth() + 3;\n      var yyyy = today.getFullYear();\n\n      if (dd < 10) {\n        dd = '0' + dd;\n      }\n\n      if (mm < 10) {\n        mm = '0' + mm;\n      }\n\n      today = yyyy + '-' + mm + '-' + dd;\n      this.contracts.date_expiration = today;\n    },\n    backTabIndex: function backTabIndex() {\n      this.$refs.firstInput.focus();\n    }\n  }),\n  created: function created() {\n    this.setMiniDrawer(true);\n\n    if (!this.employeeDetail.id) {\n      this.getEmployee({\n        employeeId: this.$route.params.id,\n        params: {\n          include: 'roles,departments,contracts'\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 50;\n  }\n};",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":"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","sourcesContent":["\n<template>\n  <v-layout ref=\"laylout\" row fill-height>\n   <v-flex xs4>\n    <listting :is-mini=\"true\" />\n  </v-flex>\n  <v-flex xs8 class=\"border-e0-left\">\n    <v-toolbar height=\"50px\" dense color=\"white\" flat>\n      <v-toolbar-title class=\"text-uppercase\">{{employeeDetail.name}}</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-tooltip bottom>\n        <v-btn slot='activator' v-if=\"canAccess('employee.update')\" icon @click=\"editEmployee\">\n          <v-icon class=\"theme--light teal--text\">edit</v-icon>\n        </v-btn>\n        <span>Sửa</span>\n      </v-tooltip>\n      <v-tooltip bottom>\n        <v-btn slot=\"activator\" v-if=\"canAccess('employee.delete')\" icon @click=\"removeConfirmEmployee\">\n          <v-icon class='theme--light pink--text'>delete</v-icon>\n        </v-btn>\n        <span>Xóa</span>\n      </v-tooltip>\n      <v-tooltip bottom>\n        <v-btn slot=\"activator\" icon @click=\"$router.push({name: 'employee', query: { reload: true }} )\">\n          <v-icon>close</v-icon>\n        </v-btn>\n        <span>Đóng</span>\n      </v-tooltip>\n    </v-toolbar>\n    <v-container fluid class=\"white scroll-y border-e0-top\" :style=\"{height: dataViewHeight + 'px'}\">\n      <v-layout row>\n        <v-flex xs4 v-if=\"employeeDetail.avatar_path\">\n          <img width=\"100%\" style=\"max-height: 250px;\" :src=\"employeeDetail.avatar_path\" alt=\"\">\n        </v-flex>\n        <v-flex xs8 style=\"padding-left:10px;\">\n          <v-layout>\n            <v-flex xs4>\n             <b>Mã nhân viên</b>\n           </v-flex>\n           <v-flex xs8 class=\"copytext\">\n             <span @click.stop=\"clickToCopy\" class=\"click-copy\"><span class=\"text-uppercase\">{{ employeeDetail.code }}</span></span>\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n              <b>Tên nhân viên</b>\n            </v-flex>\n            <v-flex xs8>\n             <span class=\"text-capitalize\">{{ employeeDetail.name }}</span>\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n             <b>Email</b>\n           </v-flex>\n           <v-flex xs8 class=\"copytext\">\n             <span @click.stop=\"clickToCopy\" class=\"click-copy click-copy-email text-capitalize\">{{ employeeDetail.email }}</span>\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n             <b>Trình độ chuyên môn</b>\n           </v-flex>\n           <v-flex xs8>\n             {{ employeeDetail.qualification }}\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n             <b>Địa chỉ</b>\n           </v-flex>\n           <v-flex xs8>\n             {{ employeeDetail.address }}\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n             <b>Số điện thoại</b>\n           </v-flex>\n           <v-flex xs8 class=\"copytext\">\n             <span @click.stop=\"clickToCopy\" class=\"click-copy click-copy-phone text-capitalize\">{{ employeeDetail.phone }}</span>\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n              <b>Giới tính</b>\n            </v-flex>\n            <v-flex xs8>\n             {{ employeeDetail.gender_txt }}\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n              <b>Ngày sinh</b>\n            </v-flex>\n            <v-flex xs8>\n             {{ employeeDetail.date_of_birth_format }}\n           </v-flex> </v-layout>\n           <v-layout class=\"mt-2\">\n            <v-flex xs4>\n              <b>Trạng thái</b>\n            </v-flex>\n            <v-flex xs8>\n             {{ employeeDetail.status_txt }}\n           </v-flex>\n         </v-layout>\n       </v-flex>\n     </v-layout>\n     <v-flex class=\"mt-4\" xs12 v-if=\"employeeDetail.departments\">\n      <h3>Vị trí , chức danh của nhân viên</h3>\n      <v-data-table\n      :headers=\"headersPosition\"\n      :items=\"employeeDetail.departments.data\"\n      hide-actions\n      class=\"elevation-1 mt-2\"\n      >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td>{{ props.item.branch_name }}</td>\n        <td>{{ props.item.name }}</td>\n        <td>{{ props.item.position_name }}</td>\n      </template>\n    </v-data-table>\n  </v-flex>\n  <v-flex class=\"mt-4\" xs12 v-if=\"employeeDetail.contracts\">\n    <h3>Hợp đồng\n      <v-tooltip bottom>\n        <v-btn slot=\"activator\" v-if=\"canAccess('employee.create')\"\n        class=\"mr-5\" icon color=\"primary\"\n        @click=\"addContract\">\n        <v-icon>add</v-icon\n          > </v-btn>\n          <span>Thêm hợp đồng</span>\n        </v-tooltip>\n      </h3>\n      <v-data-table\n      v-if=\"employeeDetail.contracts\"\n      id=\"tableContract\"\n      :headers=\"headersContract\"\n      :items=\"employeeDetail.contracts.data\"\n      hide-actions\n      class=\"elevation-1 mt-2\"\n      >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td colspan=\"2\">{{ props.item.title }}</td>\n        <td>{{ props.item.type_txt }}<br><b> Trạng thái:</b>{{ props.item.status_txt }}</td>\n        <td colspan=\"3\">\n          <b>Ngày kí:</b> {{ props.item.date_sign_format }}<br>\n          <b>Hiệu lực</b> {{ props.item.date_effective_format }}<br>\n          <b>Kết thúc:</b> {{ props.item.date_expiration_format }}<br>\n        </td>\n        <td colspan=\"2\" style=\"padding:2px;\">\n          <v-tooltip bottom class=\"ml-3\">\n            <v-btn style=\"margin:0px;\" slot='activator' v-if=\"canAccess('employee.update')\" icon @click=\"editContract(props.item,props.item.id)\">\n              <v-icon size=\"19px\" class='theme--light teal--text'>edit</v-icon>\n            </v-btn>\n            <span>Sửa</span>\n          </v-tooltip>\n          <v-tooltip bottom>\n            <v-btn style=\"margin: 0px;\" slot=\"activator\" v-if=\"canAccess('employee.delete')\" icon @click=\"removeConfirmContract(props.item.id)\">\n              <v-icon size=\"19px\" class=\"theme--light pink--text\">delete</v-icon>\n            </v-btn>\n            <span>Xóa</span>\n          </v-tooltip>\n        </td>\n      </template>\n    </v-data-table> </v-flex>\n  </v-container>\n  <v-dialog v-model=\"dialogEditContract\" max-width=\"800px\">\n    <v-form @submit.prevent=\"submitForm\" class=\"pa-0\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"pt-3\">\n          <span class=\"headline\" width=\"100%\" style=\"margin:0 auto\">{{ formTitle }}</span>\n        </v-card-title>\n        <v-divider></v-divider>\n        <!-- form edit -->\n        <v-card-text id=\"formSub\" class=\"pt-0\">\n          <v-container grid-list-md class=\"white scroll-y\">\n            <v-layout row wrap>\n              <v-flex xs6 class=\"pr-2\">\n                <!-- title contract -->\n                <v-text-field\n                tabindex=\"1\"\n                ref=\"firstInput\"\n                v-validate=\"'required'\"\n                class=\"input-required\"\n                placeholder=\"Nhập tiêu đề hợp đồng\"\n                :error-messages=\"errors.has('title') ? errors.collect('title') : []\"\n                :data-vv-as=\"$t('label.title')\"\n                name=\"title\"\n                :label=\"$t('label.title')\"\n                v-model=\"contracts.title\"> </v-text-field>\n                <!-- type contract -->\n                <v-select\n                tabindex=\"3\"\n                v-validate=\"'required'\"\n                :error-messages=\"errors.has('type') ? errors.collect('type') : []\"\n                :data-vv-as=\"$t('label.type')\"\n                name=\"type\"\n                placeholder=\"Nhập kiểu hợp đồng\"\n                :label=\"$t('label.type')\"\n                v-model=\"contracts.type\"\n                :items=\"typeContract\"\n                item-value=\"value\"\n                item-text=\"name\"> </v-select>\n                <!-- link contract -->\n                <v-text-field\n                placeholder=\"Nhập link hợp đồng\"\n                v-validate=\"'url:require_protocol'\"\n                :error-messages=\"errors.has('link_contract') ? errors.collect('link_contract') : []\"\n                :data-vv-as=\"$t('label.link_contract')\"\n                :tabindex=\"5\"\n                :label=\"'Link hợp đồng'\"\n                name=\"link_contract\"\n                v-model=\"contracts.link\"> </v-text-field>\n                <!-- status contract-->\n                <v-select\n                tabindex=\"7\"\n                v-validate=\"'required'\"\n                :error-messages=\"errors.has('status') ? errors.collect('status') : []\"\n                :data-vv-as=\"$t('label.status')\"\n                name=\"status\"\n                placeholder=\"Nhập trạng thái hợp đồng\"\n                :label=\"$t('label.status')\"\n                v-model=\"contracts.status\"\n                :items=\"statusContract\"\n                item-value=\"value\"\n                item-text=\"name\"> </v-select>\n              </v-flex>\n              <v-flex xs6 class=\"pl-2\">\n                <!-- date_sign -->\n                <template>\n                  <v-menu\n                  v-validate=\"'required'\"\n                  class=\"input-required\"\n                  ref=\"dateSign\"\n                  :close-on-content-click=\"false\"\n                  v-model=\"dateSign\"\n                  :nudge-right=\"40\"\n                  lazy transition=\"scale-transition\"\n                  offset-y\n                  full-width\n                  min-width=\"290px\">\n                  <v-text-field\n                  tabindex=\"2\"\n                  placeholder=\"Nhập ngày ký\"\n                  slot=\"activator\"\n                  v-model=\"contracts.date_sign\"\n                  label=\"Ngày ký\"\n                  readonly > </v-text-field>\n                  <v-date-picker\n                  v-model=\"contracts.date_sign\"\n                  :min=\"new Date().toISOString().substr(0, 10)\"\n                  no-title @input=\"dateSign = false\"\n                  ></v-date-picker> </v-menu>\n                </template>\n                <!-- date_effective -->\n                <template>\n                  <v-menu\n                  v-validate=\"'required'\"\n                  class=\"input-required\"\n                  ref=\"dateEffective\"\n                  :close-on-content-click=\"false\"\n                  v-model=\"dateEffective\"\n                  :nudge-right=\"40\"\n                  lazy transition=\"scale-transition\"\n                  offset-y\n                  full-width\n                  min-width=\"290px\">\n                  <v-text-field\n                  tabindex=\"4\"\n                  placeholder=\"Ngày có hiệu lực\"\n                  slot=\"activator\"\n                  v-model=\"contracts.date_effective\"\n                  label=\"Ngày có hiệu lực\"\n                  readonly > </v-text-field>\n                  <v-date-picker\n                  v-model=\"contracts.date_effective\"\n                  :min=\"new Date().toISOString().substr(0, 10)\"\n                  no-title @input=\"dateEffective = false\"\n                  > </v-date-picker> </v-menu>\n                </template>\n\n                <!--date_expiration-->\n                <v-menu\n                ref=\"expiration\"\n                :close-on-content-click=\"false\"\n                v-model=\"expiration\"\n                :nudge-right=\"40\"\n                :return-value.sync=\"contracts.date_expiration\"\n                lazy\n                transition=\"scale-transition\"\n                offset-y\n                full-width\n                min-width=\"290px\"\n                >\n                <v-text-field\n                slot=\"activator\"\n                v-model=\"contracts.date_expiration\"\n                label=\"Ngày hết hạn\"\n                :tabindex=\"6\"\n                readonly\n                ></v-text-field>\n                <v-date-picker v-model=\"contracts.date_expiration\" no-title scrollable>\n                  <v-spacer></v-spacer>\n                  <v-btn flat color=\"primary\" @click=\"expiration = false\">Cancel</v-btn>\n                  <v-btn flat color=\"primary\" @click=\"$refs.expiration.save(contracts.date_expiration)\">OK</v-btn>\n                </v-date-picker>\n              </v-menu>\n            </v-flex>\n          </v-layout>\n        </v-container>\n      </v-card-text>\n      <!-- end form edit -->\n      <v-divider></v-divider>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn tabindex=\"9\" color=\"error\" flat @click.native=\"closeContract\">Hủy bỏ</v-btn>\n        <v-btn tabindex=\"8\" class=\"green--text text-uppercase\" flat type=\"submit\"><span v-if=\"editedIndex!==-1\">Lưu lại</span><span v-else>Thêm mới</span></v-btn>\n        <div :tabindex=\"8\"  @focus=\"backTabIndex\"></div>\n      </v-card-actions>\n    </v-card>\n  </v-form>\n</v-dialog>\n</v-flex>\n<dialog-confirm v-model=\"dialogDeleteEmployee\" @input=\"removeEmployee\" />\n<dialog-confirm v-model=\"dialogDeleteContract\" @input=\"removeContract\" />\n</v-layout>\n</template>\n\n<script>\nimport Listting from './Listting'\nimport { mapActions, mapGetters } from 'vuex'\nimport DialogConfirm from '@/components/DialogConfirm'\nexport default{\n  name: 'employeeDetail',\n  components: {\n    Listting,\n    DialogConfirm\n  },\n  data () {\n    return {\n      contracts:\n        {\n          id: '',\n          employee_id: '',\n          status: 0,\n          type: 0,\n          date_sign: null,\n          date_effective: null,\n          date_expiration: null\n        },\n      // các loại hợp đồng\n      typeContract: [\n        { name: 'Học việc', value: 0 },\n        { name: 'Cộng tác viên', value: 1 },\n        { name: 'Thử việc', value: 2 },\n        { name: 'Có thời hạn', value: 3 },\n        { name: 'Không thời hạn', value: 4 },\n        { name: 'Khác', value: 5 }\n      ],\n      // các trạng thái của hợp đồng\n      statusContract: [\n        { name: 'Tiêu chuẩn', value: 0 },\n        { name: 'Chấm dứt', value: 1 },\n        { name: 'Gia hạn', value: 2 }\n      ],\n      // tiêu đề của bảng chi nhánh phòng ban , chức vụ\n      headersPosition: [\n        { text: 'Chi nhánh', value: 'branch', sortable: false },\n        { text: 'Phòng ban', value: 'department', sortable: false },\n        { text: 'Chức vụ', value: 'position', sortable: false }\n      ],\n      // tiêu đề của bảng hợp đồng\n      headersContract: [\n        { text: 'Tên hợp đồng', value: 'title', sortable: false },\n        { text: '', sortable: false },\n        { text: 'Loai hợp đồng', value: 'type', sortable: false },\n        { text: 'Thời gian', value: 'date_sign', sortable: false },\n        { text: '', sortable: false },\n        { text: '', sortable: false },\n        { text: 'Hành động', value: 'action', sortable: false }\n      ],\n      dataViewHeight: 0,\n      expiration: null,\n      dialogDeleteEmployee: false,\n      dialogEditContract: false,\n      dialogDeleteContract: false,\n      dateSign: false,\n      dateEffective: false,\n      dateExpiration: false,\n      editedIndex: -1,\n      defaultContract: {\n        status: 0,\n        type: 0\n      }\n    }\n  },\n  computed: {\n    // title of form Contract modal\n    formTitle () {\n      return this.editedIndex === -1 ? 'Thêm hợp đồng' : 'Sửa hợp đồng'\n    },\n    ...mapGetters('Employee', ['employeeDetail'])\n  },\n  watch: {\n    dialogEditContract (val) {\n      if (!val) return\n      requestAnimationFrame(() => {\n        this.$refs.firstInput.focus()\n      })\n    },\n    dateSign (val) {\n      this.contracts.date_sign = this.formatDate(this.contracts.date_sign)\n    },\n    dateEffective (val) {\n      this.contracts.date_effective = this.formatDate(this.contracts.date_effective)\n    },\n    dateExpiration (val) {\n      this.contracts.date_expiration = this.formatDate(this.contracts.date_expiration)\n    },\n    dataEmployee (val) {\n      this.employee = val\n    }\n  },\n  methods: {\n    ...mapActions(['setMiniDrawer']),\n    ...mapActions('Contracts', ['createContract', 'updateContract', 'deleteContract']),\n    ...mapActions('Employee', ['getEmployee', 'setEmployee', 'deleteEmployee']),\n    ...mapActions('Dataview', ['removeDataviewEntry', 'updateDataviewEntry', 'reloadDataview']),\n    ...mapActions(['showNotify']),\n    editEmployee () {\n      this.getEmployee({ employeeId: this.$route.params.id, params: { include: 'roles,departments.branch,contracts' } })\n      this.$router.push({ name: 'employee-edit', params: { id: this.$route.params.id } })\n    },\n    formatDate (date) {\n      if (!date) return null\n      const [year, month, day] = date.split('-')\n      return `${year}-${month}-${day}`\n    },\n    parseDate (date) {\n      if (!date) return null\n      const [month, day, year] = date.split('-')\n      return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`\n    },\n    // xóa employee\n    removeConfirmEmployee () {\n      this.dialogDeleteEmployee = true\n    },\n    removeEmployee (confirm) {\n      if (confirm) {\n        this.deleteEmployee({\n          id: this.$route.params.id,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'employee',\n              data: this.employeeDetail,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.deleteEmployeeSuccess'),\n              color: 'success'\n            })\n            this.dialogDeleteEmployee = false\n            this.$router.push({ name: 'employee' })\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    },\n    // xóa contract\n    removeConfirmContract (idContract) {\n      this.contracts.id = idContract\n      this.dialogDeleteContract = true\n    },\n    removeContract (confirm) {\n      if (confirm) {\n        this.deleteContract({\n          id: this.contracts.id,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'contract',\n              data: this.contracts,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.deleteContract'),\n              color: 'success'\n            })\n            this.dialogDeleteContract = false\n            this.getEmployee({\n              employeeId: this.$route.params.id,\n              params: { include: 'roles,departments,contracts' },\n              cb: (response) => {\n                this.updateDataviewEntry({\n                  name: 'employee',\n                  data: response,\n                  key: 'id'\n                })\n              }\n            })\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    },\n    // contract\n    editContract (item, id) {\n      this.$validator.reset()\n      this.idContract = id\n      this.editedIndex = 1\n      this.contracts = Object.assign({}, item)\n      this.dialogEditContract = true\n    },\n    addContract () {\n      this.$validator.reset()\n      this.editedIndex = -1\n      this.contracts = Object.assign({}, this.defaultContract)\n      this.dateExpirationConstract()\n      this.dateSignContract()\n      this.contracts.employee_id = this.employeeDetail.id\n      this.dialogEditContract = true\n    },\n    closeContract () {\n      this.dialogEditContract = false\n      setTimeout(() => {\n        if (this.editedIndex === -1) {\n          this.editedIndex = -1\n        } else {\n          this.contracts = Object.assign({}, this.defaultContract)\n          this.editedIndex = -1\n        }\n      }, 300)\n    },\n    submitForm () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          if (this.editedIndex === -1) {\n            this.createContract({\n              contract: this.contracts,\n              cb: (response) => {\n                this.dialog = false\n                setTimeout(() => {\n                  this.contracts = Object.assign({}, this.defaultContract)\n                  this.editedIndex = -1\n                }, 300)\n                this.showNotify({\n                  color: 'success',\n                  text: this.$t('alert.addContract')\n                })\n                this.getEmployee({\n                  employeeId: this.$route.params.id,\n                  params: { include: 'roles,departments,contracts' },\n                  cb: (response) => {\n                    this.updateDataviewEntry({\n                      name: 'employee',\n                      data: response,\n                      key: 'id'\n                    })\n                  }\n                })\n                this.dialogEditContract = false\n              }\n            })\n          } else {\n            this.updateContract({\n              id: this.idContract,\n              contract: this.contracts,\n              cb: (response) => {\n                this.showNotify({\n                  color: 'success',\n                  text: this.$t('alert.updateContract')\n                })\n                setTimeout(() => {\n                  this.contracts = Object.assign({}, this.defaultContract)\n                  this.editedIndex = -1\n                }, 300)\n                this.getEmployee({\n                  employeeId: this.$route.params.id,\n                  params: { include: 'roles,departments,contracts' },\n                  cb: (response) => {\n                    this.updateDataviewEntry({\n                      name: 'employee',\n                      data: response,\n                      key: 'id'\n                    })\n                  }\n                })\n                this.dialogEditContract = false\n              }\n            })\n          }\n        }\n      })\n    },\n    // thời gian đăng kí , có hiệu lực hợp đồng\n    dateSignContract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 1\n      let yyyy = today.getFullYear()\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.contracts.date_sign = today\n      this.contracts.date_effective = today\n    },\n    // thời gian kết thúc hợp đồng\n    dateExpirationConstract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 3\n      let yyyy = today.getFullYear()\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.contracts.date_expiration = today\n    },\n    backTabIndex () {\n      this.$refs.firstInput.focus()\n    }\n  },\n  created () {\n    this.setMiniDrawer(true)\n    if (!this.employeeDetail.id) {\n      this.getEmployee({ employeeId: this.$route.params.id, params: { include: 'roles,departments,contracts' } })\n    }\n  },\n  mounted () {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 50\n  }\n}\n</script>\n<style scoped>\n  #tableContract td{\n    padding-top: 5px;\n    padding-bottom: 5px;\n  }\n</style>\n"],"sourceRoot":"src/views/employee"}]}