{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/contracts/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/contracts/Detail.vue","mtime":1541476636560},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Listting from './Listting';\nimport { mapActions, mapGetters } from 'vuex';\nimport DialogConfirm from '@/components/DialogConfirm';\nexport default {\n  name: 'ContractDetail',\n  components: {\n    Listting: Listting,\n    DialogConfirm: DialogConfirm\n  },\n  data: function data() {\n    return {\n      dataViewHeight: 0,\n      dialogDelete: false,\n      dataViewName: 'contract'\n    };\n  },\n  computed: _objectSpread({}, mapGetters('Contracts', ['contractDetail'])),\n  methods: _objectSpread({}, mapActions(['setMiniDrawer']), mapActions('Contracts', ['getContract', 'deleteContract']), mapActions('Dataview', ['removeDataviewEntry']), mapActions('Employee', ['getEmployee', 'getEmployees']), {\n    /// detail employee\n    editEmployee: function editEmployee(id) {\n      this.getEmployee({\n        employeeId: id,\n        params: {\n          include: 'roles,departments,contracts'\n        }\n      });\n      this.$router.push({\n        name: 'employee-detail',\n        params: {\n          id: id\n        }\n      });\n    },\n    editContract: function editContract(contractDetail) {\n      this.getContract({\n        params: {\n          include: 'employee'\n        },\n        contractId: contractDetail.id\n      });\n      this.getEmployees({\n        q: contractDetail.employee_name\n      });\n      this.$router.push({\n        name: 'contract-edit',\n        params: {\n          id: contractDetail.id\n        }\n      });\n    },\n    removeConfirm: function removeConfirm() {\n      this.dialogDelete = true;\n    },\n    closeContract: function closeContract() {\n      this.setMiniDrawer(false);\n      this.$router.push({\n        name: 'contract'\n      });\n    },\n    remove: function remove(confirm) {\n      var _this = this;\n\n      if (confirm) {\n        this.deleteContract({\n          id: this.$route.params.id,\n          cb: function cb(response) {\n            _this.removeDataviewEntry({\n              name: 'contract',\n              data: _this.contractDetail,\n              key: 'id'\n            });\n\n            _this.$store.dispatch('showNotify', {\n              text: _this.$t('alert.delete-contract'),\n              color: 'success'\n            });\n\n            _this.dialogDelete = false;\n\n            _this.$router.push({\n              name: 'contract'\n            });\n          },\n          error: function error(_error) {\n            if (_error.status === 404) {\n              _this.$store.dispatch('showNotify', {\n                text: _this.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    }\n  }),\n  created: function created() {\n    this.setMiniDrawer(true);\n\n    if (!this.contractDetail.id) {\n      this.getContract({\n        params: {\n          include: 'employee'\n        },\n        contractId: this.$route.params.id\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 50;\n  }\n};",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-layout ref=\"laylout\" row fill-height>\n    <v-flex xl4 lg4 md4  sm4 class=\"display-detail\">\n      <listting type=\"detail\" :is-mini=\"true\" />\n    </v-flex>\n    <v-flex xl8 lg8 md8 sm8 xs12 class=\"border-e0-left\">\n     <v-toolbar dense color=\"white\" flat>\n       <v-toolbar-title>{{contractDetail.title}} </v-toolbar-title>\n       <v-spacer></v-spacer>\n       <v-menu :nudge-width=\"100\" offset-y>\n        <v-list>\n          <v-list-tile\n          v-for=\"item in 10\"\n          :key=\"item\"\n          >\n          <v-list-tile-title v-text=\"item\"></v-list-tile-title>\n        </v-list-tile>\n      </v-list>\n    </v-menu>\n    <v-tooltip bottom>\n      <v-btn slot=\"activator\"  v-if=\"canAccess('contract.update')\" icon @click=\"editContract(contractDetail)\">\n        <v-icon class='theme--light teal--text'>edit</v-icon>\n      </v-btn>\n      <span>Sửa</span>\n    </v-tooltip>\n    <v-tooltip bottom>\n      <v-btn slot=\"activator\" class=\"theme--light pink--text\" v-if=\"canAccess('contract.delete')\" @click=\"removeConfirm()\" icon>\n        <v-icon>delete</v-icon>\n      </v-btn>\n      <span>Xóa</span>\n    </v-tooltip>\n    <v-tooltip bottom>\n      <v-btn slot=\"activator\" icon @click=\"closeContract\" >\n        <v-icon>close</v-icon>\n      </v-btn>\n      <span>Đóng</span>\n    </v-tooltip>\n  </v-toolbar>\n  <v-container fluid class=\"white scroll-y border-e0-top\" :style=\"{height: dataViewHeight + 'px'}\">\n    <v-layout row wrap>\n      <v-flex xl4 lg4 md4  sm4 xs5>\n           <p class=\"fontSize\"><b>Tiêu đề</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n           <p class=\"fontSize\"> {{ contractDetail.title }}</p>\n      </v-flex>\n      <v-flex xl4 lg4 md4  sm4 xs5>\n          <p class=\"fontSize\"><b>Link</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n            <p class=\"fontSize\"><a v-bind:href=\"contractDetail.link\" target=\"_blank\">{{ contractDetail.link }} </a></p>\n      </v-flex>\n       <v-flex xl4 lg4 md4  sm4 xs5>\n        <p class=\"fontSize\"><b>Loại hợp đồng</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n        <p class=\"fontSize\">{{ contractDetail.type_txt }}</p>\n      </v-flex>\n       <v-flex xl4 lg4 md4  sm4 xs5>\n          <p class=\"fontSize\"> <b>Trạng thái</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n          <p class=\"fontSize\" style=\" color:#03A9F4\" v-if=\"contractDetail.status == 0\" >{{ contractDetail.status_txt }}</p>\n          <p class=\"fontSize\" style=\"color:#FF5722\" v-else-if=\"contractDetail.status == 1\" >{{ contractDetail.status_txt }}</p>\n          <p class=\"fontSize\" style=\"color:green\" v-else-if=\"contractDetail.status == 2\" >{{ contractDetail.status_txt }}</p>\n      </v-flex>\n      <v-flex xl4 lg4 md4  sm4 xs5>\n        <p class=\"fontSize\"><b>Ngày ký</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n        <p class=\"fontSize\"> {{contractDetail.date_sign_format}}</p>\n      </v-flex>\n       <v-flex xl4 lg4 md4  sm4 xs5>\n        <p class=\"fontSize\"><b>Ngày hiệu lực</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n        <p class=\"fontSize\">{{ contractDetail.date_effective_format }}</p>\n      </v-flex>\n      <v-flex xl4 lg4 md4  sm4 xs5>\n          <p class=\"fontSize\"><b>Ngày kết thúc hợp đồng</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n          <p class=\"fontSize\"> {{contractDetail.date_expiration_format}}</p>\n      </v-flex>\n      <v-flex xl4 lg4 md4  sm4 xs5>\n         <p class=\"fontSize\"><b>Tên nhân viên</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n          <p class=\"fontSize\"> <a @click.stop=\"editEmployee(contractDetail.employee_id)\">{{contractDetail.employee_name}}</a></p>\n      </v-flex>\n       <v-flex xl4 lg4 md4  sm4 xs5>\n        <p class=\"fontSize\"><b>Số điện thoại</b></p>\n      </v-flex>\n      <v-flex xl8 lg8 md8  sm8 xs7>\n         <p class=\"fontSize\"> {{contractDetail.employee_phone}}</p>\n       </v-flex>\n    </v-layout>\n  </v-container>\n</v-flex>\n  <dialog-confirm v-model=\"dialogDelete\" @input=\"remove\" />\n</v-layout>\n</template>\n<script type=\"text/javascript\">\nimport Listting from './Listting'\nimport { mapActions, mapGetters } from 'vuex'\nimport DialogConfirm from '@/components/DialogConfirm'\nexport default{\n  name: 'ContractDetail',\n  components: {\n    Listting,\n    DialogConfirm\n  },\n  data () {\n    return {\n      dataViewHeight: 0,\n      dialogDelete: false,\n      dataViewName: 'contract'\n    }\n  },\n  computed: {\n    ...mapGetters('Contracts', ['contractDetail'])\n  },\n  methods: {\n    ...mapActions(['setMiniDrawer']),\n    ...mapActions('Contracts', ['getContract', 'deleteContract']),\n    ...mapActions('Dataview', ['removeDataviewEntry']),\n    ...mapActions('Employee', ['getEmployee', 'getEmployees']),\n    /// detail employee\n    editEmployee (id) {\n      this.getEmployee({ employeeId: id, params: { include: 'roles,departments,contracts' } })\n      this.$router.push({ name: 'employee-detail', params: { id: id } })\n    },\n    editContract (contractDetail) {\n      this.getContract({ params: { include: 'employee' }, contractId: contractDetail.id })\n      this.getEmployees({ q: contractDetail.employee_name })\n      this.$router.push({ name: 'contract-edit', params: { id: contractDetail.id } })\n    },\n    removeConfirm () {\n      this.dialogDelete = true\n    },\n    closeContract () {\n      this.setMiniDrawer(false)\n      this.$router.push({ name: 'contract' })\n    },\n    remove (confirm) {\n      if (confirm) {\n        this.deleteContract({\n          id: this.$route.params.id,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'contract',\n              data: this.contractDetail,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.delete-contract'),\n              color: 'success'\n            })\n            this.dialogDelete = false\n            this.$router.push({ name: 'contract' })\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    }\n\n  },\n  created () {\n    this.setMiniDrawer(true)\n    if (!this.contractDetail.id) {\n      this.getContract({ params: { include: 'employee' }, contractId: this.$route.params.id })\n    }\n  },\n  mounted () {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 50\n  }\n}\n</script>\n<style scoped>\n  @media (min-width: 250px){\n    .display-detail{\n      display: none;\n    }\n    .fontSize{\n      font-size: 16px;\n    }\n  }\n  @media (min-width: 600px){\n     .display-detail{\n       display: block ;\n     }\n  }\n</style>\n"],"sourceRoot":"src/views/contracts"}]}