{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/user/Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/user/Form.vue","mtime":1539654451871},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions } from 'vuex';\nimport { map, isTypedArray } from 'lodash';\nimport formSub from './FormSub';\nimport imageUpload from '@/components/UploadMultipleImage/UploadMultipleImage';\nexport default {\n  name: 'UserForm',\n  components: {\n    formSub: formSub,\n    imageUpload: imageUpload\n  },\n  computed: _objectSpread({}, mapGetters(['isFetchingApi']), mapGetters('Contracts', ['contractDetail']), {\n    isCreate: function isCreate() {\n      return this.type === 'create';\n    }\n  }),\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataUser: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      status: 'Kích hoạt',\n      dateOfBirth: false,\n      dateSign: false,\n      dateEffective: false,\n      dateExpiration: false,\n      genderUser: [{\n        name: 'Nam',\n        value: 1\n      }, {\n        name: 'Nữ',\n        value: 0\n      }, {\n        name: 'Khác',\n        value: 2\n      }],\n      typeContract: [{\n        name: 'Học việc',\n        value: 0\n      }, {\n        name: 'Cộng tác viên',\n        value: 1\n      }, {\n        name: 'Thử việc',\n        value: 2\n      }, {\n        name: 'Có thời hạn',\n        value: 3\n      }, {\n        name: 'Không thời hạn',\n        value: 4\n      }, {\n        name: 'Khác',\n        value: 5\n      }],\n      statusContract: [{\n        name: 'Tiêu chuẩn',\n        value: 0\n      }, {\n        name: 'Chấm dứt',\n        value: 1\n      }, {\n        name: 'Gia hạn',\n        value: 2\n      }],\n      user: {\n        avatar: '',\n        gender: 1,\n        status: true,\n        roles: [],\n        departments: [],\n        contracts: {\n          status: 0,\n          type: 0,\n          date_sign: null,\n          date_effective: null,\n          date_expiration: null\n        }\n      },\n      roles: []\n    };\n  },\n  watch: {\n    dataUser: function dataUser(val) {\n      this.user = val;\n    },\n    dateOfBirth: function dateOfBirth(val) {\n      var _this = this;\n\n      val && this.$nextTick(function () {\n        return _this.$refs.picker.activePicker = 'YEAR';\n      });\n    },\n    dateSign: function dateSign(val) {\n      var _this2 = this;\n\n      val && this.$nextTick(function () {\n        return _this2.$refs.picker.activePicker = 'YEAR';\n      });\n    },\n    dateEffective: function dateEffective(val) {\n      var _this3 = this;\n\n      val && this.$nextTick(function () {\n        return _this3.$refs.picker.activePicker = 'YEAR';\n      });\n    },\n    dateExpiration: function dateExpiration(val) {\n      var _this4 = this;\n\n      val && this.$nextTick(function () {\n        return _this4.$refs.picker.activePicker = 'YEAR';\n      });\n    }\n  },\n  methods: _objectSpread({}, mapActions(['fetchApi']), {\n    setInitData: function setInitData() {\n      var dataUser = _objectSpread({}, this.dataUser);\n\n      if (dataUser.roles) {\n        dataUser.roles = map(dataUser.roles.data, function (role) {\n          return role.id;\n        });\n      }\n\n      this.user = _objectSpread({}, this.user, dataUser);\n    },\n    save: function save(date) {\n      this.$refs.dateOfBirth.save(date);\n      this.$refs.dateSign.save(date);\n      this.$refs.dateEffective.save(date);\n      this.$refs.dateExpiration.save(date);\n    },\n    status_txt: function status_txt() {\n      if (this.user.status) {\n        this.status = 'Kích hoạt';\n      } else {\n        this.status = 'Không kích hoạt';\n      }\n    },\n    // thời gian đăng kí , có hiệu lực hợp đồng\n    dateConstract: function dateConstract() {\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth() + 1;\n      var yyyy = today.getFullYear();\n\n      if (dd < 10) {\n        dd = '0' + dd;\n      }\n\n      if (mm < 10) {\n        mm = '0' + mm;\n      }\n\n      today = yyyy + '-' + mm + '-' + dd;\n      this.user.contracts.date_sign = today;\n      this.user.contracts.date_effective = today;\n    },\n    // thời gian kết thúc hợp đồng\n    dateExpirationConstract: function dateExpirationConstract() {\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth() + 3;\n      var yyyy = today.getFullYear();\n\n      if (dd < 10) {\n        dd = '0' + dd;\n      }\n\n      if (mm < 10) {\n        mm = '0' + mm;\n      }\n\n      today = yyyy + '-' + mm + '-' + dd;\n      this.user.contracts.date_expiration = today;\n    },\n    validateBeforeSubmit: function validateBeforeSubmit() {\n      var _this5 = this;\n\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          var user = Object.assign({}, _this5.user);\n          user.status = user.status ? 1 : 0;\n\n          _this5.$emit('submit', _this5.user);\n        } else {\n          _this5.$store.dispatch('showNotify', {\n            text: _this5.$t('alert.invalid'),\n            color: 'warning'\n          });\n        }\n      });\n    },\n    positionAndDepartment: function positionAndDepartment(updated) {\n      this.user.departments = updated;\n    }\n  }),\n  mounted: function mounted() {\n    var _this6 = this;\n\n    this.fetchApi({\n      url: 'roles',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: function success(response) {\n        _this6.roles = response.data;\n      }\n    });\n  },\n  created: function created() {\n    this.dateExpirationConstract();\n    this.dateConstract();\n    this.dataUser && this.setInitData();\n    this.status_txt();\n  }\n};",{"version":3,"sources":["Form.vue"],"names":[],"mappings":"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","sourcesContent":["\n<template>\n  <v-form @submit.prevent=\"validateBeforeSubmit\">\n    <v-tabs centered color=\"cyan\" dark icons-and-text >\n      <v-tabs-slider color=\"yellow\"></v-tabs-slider>\n      <!-- thông tin tài khoản -->\n      <v-tab href=\"#tab-1\">\n        Thông tin tài khoản\n      </v-tab>\n      <!-- Thông tin cá nhân -->\n      <v-tab href=\"#tab-2\">\n        Thông tin cá nhân\n      </v-tab>\n      <!-- công việc -->\n      <v-tab href=\"#tab-3\">\n        Công việc\n      </v-tab>\n      <!-- tab1 -->\n      <v-tab-item id=\"tab-1\" style=\"margin:30px 0px\">\n        <v-card flat row>\n         <v-layout>\n          <v-flex md6 style=\"margin-right:10px\">\n            <!-- email -->\n            <v-text-field\n            placeholder=\"vd:trongdong717@gmail.com\"\n            :error-messages=\"errors.has('email') ? errors.collect('email') : []\"\n            v-validate=\"'required|email'\"\n            :data-vv-as=\"$t('label.email')\"\n            name=\"email\"\n            :label=\"$t('label.email') + '*'\"\n            type=\"email\"\n            :disabled=\"!isCreate\"\n            v-model=\"user.email\"> </v-text-field>\n            <!-- password -->\n            <v-text-field\n            placeholder=\"Nhập mật khẩu\"\n            v-if=\"isCreate\"\n            :error-messages=\"errors.has('password') ? errors.collect('password') : []\" v-validate=\"'required|min:6'\"\n            :data-vv-as=\"$t('label.password')\"\n            name=\"password\"\n            :label=\"$t('label.password') + '*'\"\n            type=\"password\"\n            v-model=\"user.password\"> </v-text-field>\n            <!-- status -->\n            <v-flex style=\"margin-top:12px;\">\n              <label>Trạng Thái</label>\n              <v-flex row>\n                <v-checkbox\n                style=\"margin-top:0px\"\n                @change=\"status_txt\"\n                :label=\"status\"\n                class=\"checkbox\"\n                name=\"status\"\n                v-model=\"user.status\">\n              </v-checkbox>\n            </v-flex></v-flex>\n          </v-flex>\n          <v-spacer></v-spacer>\n          <v-flex md6 style=\"margin-left:10px\">\n            <!-- name -->\n            <v-text-field\n            placeholder=\"Nhập vào tên\"\n            :error-messages=\"errors.has('name') ? errors.collect('name') : []\"\n            v-validate=\"'required|min:3'\"\n            :data-vv-as=\"$t('label.name')\"\n            name=\"name\"\n            :label=\"$t('label.name') + '*'\"\n            v-model=\"user.name\"></v-text-field>\n            <!-- password confirm -->\n            <v-text-field\n            placeholder=\"Nhập lại password\"\n            v-if=\"isCreate\"\n            :error-messages=\"errors.has('password_confirmation') ? errors.collect('password_confirmation') : []\"\n            v-validate=\"'required|min:6'\"\n            :data-vv-as=\"$t('label.password_confirmation')\"\n            name=\"password_confirmation\"\n            :label=\"$t('label.password_confirmation') + '*'\"\n            type=\"password\"\n            v-model=\"user.password_confirmation\"> </v-text-field>\n            <!-- quyền truy cập -->\n            <v-autocomplete\n            multiple\n            label=\"Quyền truy cập\"\n            v-model=\"user.roles\"\n            :items=\"roles\"\n            chips\n            item-text=\"name\"\n            item-value=\"id\"\n            color=\"white\"\n            hide-no-data\n            hide-selected\n            placeholder=\"tìm kiếm\"\n            style=\"margin-left:-30px\"\n            prepend-icon=\"mdi-database-search\">\n            <template slot=\"selection\" slot-scope=\"data\">\n              <v-chip\n              :selected=\"data.selected\"\n              close class=\"chip--select-multi\"\n              @input=\"data.parent.selectItem(data.item)\">\n              {{ data.item.name }}\n            </v-chip></template></v-autocomplete>\n          </v-flex>\n        </v-layout>\n      </v-card>\n    </v-tab-item>\n    <!-- tab2 -->\n    <v-tab-item id=\"tab-2\" style=\"margin-top:30px\">\n      <v-layout>\n        <v-flex md6 style=\"margin-right:10px\">\n          <!-- phone -->\n          <v-text-field\n          placeholder=\"nhập số điện thoại\"\n          :error-messages=\"errors.has('phone') ? errors.collect('phone') : []\"\n          :data-vv-as=\"$t('label.phone')\"\n          name=\"phone\"\n          :label=\"$t('label.phone')\"\n          v-model=\"user.phone\"></v-text-field>\n          <!-- address -->\n          <v-text-field\n          :error-messages=\"errors.has('address') ? errors.collect('address') : []\"\n          placeholder=\"Nhập địa chỉ\"\n          :data-vv-as=\"$t('label.address')\"\n          name=\"address\"\n          :label=\"$t('label.address')\"\n          v-model=\"user.address\"> </v-text-field>\n          <!-- qualification -->\n          <v-text-field\n          placeholder=\"nhập trình độ học vấn\"\n          :error-messages=\"errors.has('qualification') ? errors.collect('qualification') : []\"\n          :data-vv-as=\"$t('label.qualification')\"\n          name=\"qualification\"\n          :label=\"$t('label.qualification')\"\n          v-model=\"user.qualification\"></v-text-field>\n          <!-- gender -->\n          <v-flex md12 row>\n            <v-flex style=\"margin-top:12px\">\n              <v-select\n              :items=\"genderUser\"\n              item-text=\"name\"\n              item-value=\"value\"\n              v-model=\"user.gender\"\n              label=\"Giới tính\"\n              ></v-select>\n            </v-flex> </v-flex>\n          </v-flex>\n          <v-flex md6 style=\"margin-left:10px\">\n            <!-- birth_day -->\n            <template>\n              <v-menu\n              ref=\"dateOfBirth\"\n              :close-on-content-click=\"false\"\n              v-model=\"dateOfBirth\"\n              :nudge-right=\"40\"\n              lazy transition=\"scale-transition\"\n              offset-y\n              full-width\n              min-width=\"290px\">\n              <v-text-field\n              placeholder=\"Nhập ngày sinh\"\n              slot=\"activator\"\n              v-model=\"user.date_of_birth\"\n              label=\"Ngày sinh\"\n              readonly > </v-text-field>\n              <v-date-picker\n              ref=\"picker\"\n              v-model=\"user.date_of_birth\"\n              :max=\"new Date().toISOString().substr(0, 10)\"\n              min=\"1950-01-01\"\n              @change=\"save\"> </v-date-picker> </v-menu>\n            </template>\n            <!-- image -->\n            <v-flex class=\"mt-3\">\n              <label style=\"color: #7f8c91;\">Ảnh đại diện</label>\n              <imageUpload/>\n            </v-flex> </v-flex>\n          </v-layout>\n        </v-tab-item>\n        <v-tab-item id=\"tab-3\" style=\"margin-top:30px\">\n          <h3 v-if=\"isCreate\">Hợp đồng</h3>\n          <v-layout row wrap v-if=\"isCreate\">\n            <v-flex xs6 class=\"pr-2\">\n              <!-- title contract -->\n              <v-text-field\n              placeholder=\"Nhập tiêu đề hợp đồng\"\n              :error-messages=\"errors.has('title') ? errors.collect('title') : []\"\n              :data-vv-as=\"$t('label.title')\"\n              name=\"title\"\n              :label=\"$t('label.title') + ' * '\"\n              v-model=\"user.contracts.title\"> </v-text-field>\n              <!-- type contract -->\n              <v-select\n              :error-messages=\"errors.has('type') ? errors.collect('type') : []\"\n              :data-vv-as=\"$t('label.type')\"\n              name=\"type\"\n              :label=\"$t('label.type')\"\n              v-model=\"user.contracts.type\"\n              :items=\"typeContract\"\n              item-value=\"value\"\n              item-text=\"name\"> </v-select>\n              <!-- status contract-->\n              <v-select\n              :error-messages=\"errors.has('status') ? errors.collect('status') : []\"\n              :data-vv-as=\"$t('label.status')\"\n              name=\"status\"\n              :label=\"$t('label.status')\"\n              v-model=\"user.contracts.status\"\n              :items=\"statusContract\"\n              item-value=\"value\"\n              item-text=\"name\"> </v-select>\n            </v-flex>\n            <v-flex xs6 class=\"pl-2\">\n              <!-- date_sign -->\n              <template>\n                <v-menu\n                ref=\"dateSign\"\n                :close-on-content-click=\"false\"\n                v-model=\"dateSign\"\n                :nudge-right=\"40\"\n                lazy transition=\"scale-transition\"\n                offset-y\n                full-width\n                min-width=\"290px\">\n                <v-text-field\n                placeholder=\"Nhập ngày ký\"\n                slot=\"activator\"\n                v-model=\"user.contracts.date_sign\"\n                label=\"Ngày ký\"\n                readonly > </v-text-field>\n                <v-date-picker\n                ref=\"picker\"\n                v-model=\"user.contracts.date_sign\"\n                :max=\"new Date().toISOString().substr(0, 10)\"\n                min=\"1950-01-01\"\n                @change=\"save\"> </v-date-picker> </v-menu>\n              </template>\n              <!-- date_effective -->\n              <template>\n                <v-menu\n                ref=\"dateEffective\"\n                :close-on-content-click=\"false\"\n                v-model=\"dateEffective\"\n                :nudge-right=\"40\"\n                lazy transition=\"scale-transition\"\n                offset-y\n                full-width\n                min-width=\"290px\">\n                <v-text-field\n                placeholder=\"Ngày có hiệu lực\"\n                slot=\"activator\"\n                v-model=\"user.contracts.date_effective\"\n                label=\"Ngày có hiệu lực\"\n                readonly > </v-text-field>\n                <v-date-picker\n                ref=\"picker\"\n                v-model=\"user.contracts.date_effective\"\n                :max=\"new Date().toISOString().substr(0, 10)\"\n                min=\"1950-01-01\"\n                @change=\"save\"> </v-date-picker> </v-menu>\n              </template>\n              <!-- date_expiration -->\n              <template>\n                <v-menu\n                ref=\"dateExpiration\"\n                :close-on-content-click=\"false\"\n                v-model=\"dateExpiration\"\n                :nudge-right=\"40\"\n                lazy transition=\"scale-transition\"\n                offset-y\n                full-width\n                min-width=\"290px\">\n                <v-text-field\n                placeholder=\"Ngày có hết hạn\"\n                slot=\"activator\"\n                v-model=\"user.contracts.date_expiration\"\n                label=\"Ngày có hết hạn\"\n                readonly > </v-text-field>\n                <v-date-picker\n                ref=\"picker\"\n                v-model=\"user.contracts.date_expiration\"\n                :max=\"new Date().toISOString().substr(0, 10)\"\n                min=\"1950-01-01\"\n                @change=\"save\"> </v-date-picker> </v-menu>\n              </template>\n            </v-flex>\n\n          </v-layout>\n          <v-layout row wrap>\n            <!-- form sub -->\n            <formSub\n            :dataUser=\"user\"\n            v-on:positionAndDepartment=\"positionAndDepartment($event)\">\n          </formSub> </v-flex>\n        </v-layout>\n        <!-- tab3 -->\n      </v-tab-item>\n    </v-tabs>\n    <!-- end tab -->\n    <!-- button create or update -->\n    <v-flex md12 text-md-center>\n      <v-btn\n      :loading=\"isFetchingApi\"\n      :disabled=\"isFetchingApi\"\n      color=\"primary\"\n      type=\"submit\"\n      >\n      <template v-if=\"isCreate\">\n        <v-icon left>add</v-icon> {{$t('control.create')}}\n      </template>\n      <template v-else>\n        <v-icon left>save</v-icon> {{$t('control.save')}}\n      </template>\n    </v-btn>\n  </v-flex>\n</v-form>\n</template>\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { map, isTypedArray } from 'lodash'\nimport formSub from './FormSub'\nimport imageUpload from '@/components/UploadMultipleImage/UploadMultipleImage'\nexport default{\n  name: 'UserForm',\n  components: { formSub, imageUpload },\n  computed: {\n    ...mapGetters(['isFetchingApi']),\n    ...mapGetters('Contracts', ['contractDetail']),\n    isCreate () {\n      return this.type === 'create'\n    }\n  },\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataUser: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  data () {\n    return {\n      status: 'Kích hoạt',\n      dateOfBirth: false,\n      dateSign: false,\n      dateEffective: false,\n      dateExpiration: false,\n      genderUser: [\n        { name: 'Nam', value: 1 },\n        { name: 'Nữ', value: 0 },\n        { name: 'Khác', value: 2 }\n      ],\n      typeContract: [\n        { name: 'Học việc', value: 0 },\n        { name: 'Cộng tác viên', value: 1 },\n        { name: 'Thử việc', value: 2 },\n        { name: 'Có thời hạn', value: 3 },\n        { name: 'Không thời hạn', value: 4 },\n        { name: 'Khác', value: 5 }\n      ],\n      statusContract: [\n        { name: 'Tiêu chuẩn', value: 0 },\n        { name: 'Chấm dứt', value: 1 },\n        { name: 'Gia hạn', value: 2 }\n      ],\n      user: {\n        avatar: '',\n        gender: 1,\n        status: true,\n        roles: [],\n        departments: [],\n        contracts:\n        {\n          status: 0,\n          type: 0,\n          date_sign: null,\n          date_effective: null,\n          date_expiration: null\n        }\n      },\n      roles: []\n    }\n  },\n  watch: {\n    dataUser (val) {\n      this.user = val\n    },\n    dateOfBirth (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateSign (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateEffective (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateExpiration (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    }\n  },\n  methods: {\n    ...mapActions(['fetchApi']),\n    setInitData () {\n      let dataUser = { ...this.dataUser }\n      if (dataUser.roles) {\n        dataUser.roles = map(dataUser.roles.data, (role) => {\n          return role.id\n        })\n      }\n      this.user = { ...this.user, ...dataUser }\n    },\n    save (date) {\n      this.$refs.dateOfBirth.save(date)\n      this.$refs.dateSign.save(date)\n      this.$refs.dateEffective.save(date)\n      this.$refs.dateExpiration.save(date)\n    },\n    status_txt () {\n      if (this.user.status) { this.status = 'Kích hoạt' } else { this.status = 'Không kích hoạt' }\n    },\n    // thời gian đăng kí , có hiệu lực hợp đồng\n    dateConstract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 1\n      let yyyy = today.getFullYear()\n\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.user.contracts.date_sign = today\n      this.user.contracts.date_effective = today\n    },\n    // thời gian kết thúc hợp đồng\n    dateExpirationConstract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 3\n      let yyyy = today.getFullYear()\n\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.user.contracts.date_expiration = today\n    },\n    validateBeforeSubmit () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          let user = Object.assign({}, this.user)\n          user.status = user.status ? 1 : 0\n          this.$emit('submit', this.user)\n        } else {\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.invalid'),\n            color: 'warning'\n          })\n        }\n      })\n    },\n    positionAndDepartment (updated) {\n      this.user.departments = updated\n    }\n  },\n  mounted () {\n    this.fetchApi({\n      url: 'roles',\n      method: 'GET',\n      params: {\n        limit: -1\n      },\n      success: (response) => {\n        this.roles = response.data\n      }\n    })\n  },\n  created () {\n    this.dateExpirationConstract()\n    this.dateConstract()\n    this.dataUser && this.setInitData()\n    this.status_txt()\n  }\n}\n</script>\n<style coped>\nlabel{\n  color: #5b5a5a;\n  font-size:15px;\n}\n.image-list-container, align-items-center{\n  display:none !important;\n}\n.image-icon-info{\n  display:none !important;\n}\n</style>\n"],"sourceRoot":"src/views/user"}]}