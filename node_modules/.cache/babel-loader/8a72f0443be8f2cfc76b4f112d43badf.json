{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/employee/Listting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/employee/Listting.vue","mtime":1543214822806},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _slicedToArray from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/slicedToArray\";\nimport _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DialogConfirm from '@/components/DialogConfirm';\nimport { debounce } from 'lodash';\nimport DataView from '@/components/DataView/DataView';\nimport { mapActions, mapGetters } from 'vuex';\nimport { mapFields } from 'vuex-map-fields';\nexport default {\n  name: 'employeeListting',\n  props: {\n    isMini: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    DataView: DataView,\n    DialogConfirm: DialogConfirm\n  },\n  data: function data() {\n    return {\n      copyToText: true,\n      // lọc nhiều hơn\n      filterMore: false,\n      isLoadingBranch: false,\n      isLoadingContract: false,\n      isLoadingPosition: false,\n      // filter by date\n      dialog: false,\n      dialogAccount: false,\n      valAccount: {\n        email: null\n      },\n      accountUser: {\n        password: null,\n        password_confirmation: null\n      },\n      date: null,\n      monthBirths: [{\n        name: 'Tháng một',\n        value: 1\n      }, {\n        name: 'Tháng hai',\n        value: 2\n      }, {\n        name: 'Tháng ba',\n        value: 3\n      }, {\n        name: 'Tháng bốn',\n        value: 4\n      }, {\n        name: 'Tháng năm',\n        value: 5\n      }, {\n        name: 'Tháng sáu',\n        value: 6\n      }, {\n        name: 'Tháng bảy',\n        value: 7\n      }, {\n        name: 'Tháng tám',\n        value: 8\n      }, {\n        name: 'Tháng chín',\n        value: 9\n      }, {\n        name: 'Tháng mười',\n        value: 10\n      }, {\n        name: 'Tháng mười một',\n        value: 11\n      }, {\n        name: 'Tháng mưới hai',\n        value: 12\n      }],\n      dateOfBirth: false,\n      // end filter by date\n      branches: [],\n      contracts: [],\n      dateContract: '',\n      positions: [],\n      dialogDelete: false,\n      dateFirst: false,\n      dateExpiration: false,\n      dataViewHeight: 0,\n      dataViewName: 'employee',\n      departments: [],\n      idEmployee: null,\n      dataEmployee: {},\n      employee: {\n        status: true\n      },\n      statusEmployee: [{\n        status_txt: 'Kích hoạt',\n        status: 1\n      }, {\n        status_txt: 'Không kích hoạt',\n        status: 0\n      }]\n    };\n  },\n  computed: _objectSpread({}, mapGetters('Department', ['departmentByBranch']), mapGetters('Branch', ['branchAll']), mapGetters('Employee', ['filterParams']), mapGetters('Contracts', ['contractDetail']), mapGetters('Position', ['positionAll']), mapGetters(['isFetchingApi']), mapFields(\"Employee\", {\n    filterQ: 'params.q',\n    filterByStatus: 'params.status',\n    filterByBranch: 'params.branchId',\n    filterByDepartment: 'params.departmentId',\n    filterByPosition: 'params.positionId',\n    filterByDateOfBirth: 'params.dateOfBirth',\n    filterByMonthBirth: 'params.monthOfBirth',\n    filterByTypeContract: 'params.contractType',\n    filterByDateFirstContract: 'params.dateOfFirstContract',\n    filterByDateExpirationContract: 'params.dateExpiration'\n  })),\n  watch: {\n    // auto focue when create accoute\n    dialogAccount: function dialogAccount(val) {\n      var _this = this;\n\n      if (!val) return;\n      requestAnimationFrame(function () {\n        _this.$refs.password.focus();\n      });\n    },\n    dateOfBirth: function dateOfBirth(val) {\n      var _this2 = this;\n\n      val && this.$nextTick(function () {\n        return _this2.$refs.picker.activePicker = 'YEAR';\n      });\n    },\n    // filterByDateFirstContract (val) {\n    //   this.dateFirst = this.formatDate(this.date)\n    // },\n    filterByDateExpirationContract: function filterByDateExpirationContract(val) {\n      this.dateExpiration = this.formatDate(this.date);\n    },\n    filterParams: function filterParams(val) {\n      this.filterParams = val;\n    }\n  },\n  methods: _objectSpread({}, mapActions('Dataview', ['removeDataviewEntry', 'updateDataviewEntry', 'setDataview']), mapActions('Employee', ['getEmployee', 'deleteEmployee', 'updateStatusEmployee', 'clearFilter', 'clearFilterBranch', 'clearFilterDateBirth', 'clearFilterDateFirstContract']), mapActions(['showNotify']), mapActions('Department', ['getDepartmentForEmployee']), mapActions('Branch', ['getBranchs']), mapActions('Contracts', ['fetchContract']), mapActions('Position', ['fetchPosition']), mapActions('User', ['createUser']), mapActions(['fetchApi']), {\n    addAccount: function addAccount(valueAccount) {\n      this.$validator.reset();\n      this.accountUser.password = '';\n      this.accountUser.password_confirmation = '';\n      this.valAccount = valueAccount;\n      this.dialogAccount = true;\n      this.passWordDialog = true;\n    },\n    // địng dạng hiển thị cho các trường date\n    formatDate: function formatDate(date) {\n      if (!date) return null;\n\n      var _date$split = date.split('-'),\n          _date$split2 = _slicedToArray(_date$split, 3),\n          year = _date$split2[0],\n          month = _date$split2[1],\n          day = _date$split2[2];\n\n      return \"\".concat(month, \"/\").concat(day, \"/\").concat(year);\n    },\n    parseDate: function parseDate(date) {\n      if (!date) return null;\n\n      var _date$split3 = date.split('/'),\n          _date$split4 = _slicedToArray(_date$split3, 3),\n          month = _date$split4[0],\n          day = _date$split4[1],\n          year = _date$split4[2];\n\n      return \"\".concat(day.padStart(2, '0'), \"-\").concat(month.padStart(2, '0'), \"-\").concat(year);\n    },\n    backTabIndex: function backTabIndex() {\n      this.$refs.firstInput.focus();\n    },\n    closeAccount: function closeAccount() {\n      this.dialogAccount = false;\n    },\n    submitFormAccount: function submitFormAccount() {\n      var _this3 = this;\n\n      this.accountUser.name = this.valAccount.name;\n      this.accountUser.email = this.valAccount.email;\n      this.accountUser.phone = this.valAccount.phone;\n      console.log('this.accountUser', this.accountUser);\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          _this3.createUser({\n            user: _this3.accountUser,\n            cb: function cb(response) {\n              var object = Object.assign({}, _this3.valAccount);\n              console.log('this.accountUser', _this3.valAccount);\n              object.has_account = true;\n\n              _this3.updateDataviewEntry({\n                name: 'employee',\n                data: object,\n                key: 'id'\n              });\n\n              _this3.showNotify({\n                color: 'success',\n                text: _this3.$t('alert.accountSuccess')\n              });\n\n              _this3.setDataview({\n                name: 'user',\n                data: [],\n                uniqueKey: 'id'\n              });\n\n              _this3.dialogAccount = false;\n            }\n          });\n        }\n      });\n    },\n    employeeDetail: function employeeDetail(employee) {\n      this.clearFilter();\n      this.filter();\n      this.getEmployee({\n        employeeId: employee.id,\n        params: {\n          include: 'roles,departments,contracts'\n        }\n      }); // this.clearFilter()\n\n      this.$router.push({\n        name: 'employee-detail',\n        params: {\n          id: employee.id\n        }\n      });\n    },\n    save: function save(date) {\n      this.$refs.dateOfBirth.save(date);\n      this.filter();\n    },\n    clearSearch: function clearSearch() {\n      this.changeSearch();\n      this.filter();\n    },\n    clearDepartment: function clearDepartment() {\n      this.changeSearch();\n    },\n    clearBranch: function clearBranch() {\n      this.getBranchs({\n        params: {\n          limit: 10\n        }\n      });\n      this.clearFilterBranch();\n      this.changeSearch();\n    },\n    clearDateBirth: function clearDateBirth() {\n      this.clearFilterDateBirth();\n      this.changeSearch();\n    },\n    clearDateFirstContract: function clearDateFirstContract() {\n      this.clearFilterDateFirstContract();\n      this.changeSearch();\n    },\n    resetForm: function resetForm() {\n      this.clearFilter();\n      this.filter();\n    },\n    changeSearch: debounce(function () {\n      this.filter();\n    }, 200),\n    sreachBranch: debounce(function (value) {\n      var _this4 = this;\n\n      this.isLoadingBranch = true;\n      this.getBranchs({\n        params: {\n          q: value.target.value,\n          limit: 10\n        }\n      });\n      setTimeout(function () {\n        _this4.isLoadingBranch = false;\n      }, 500);\n    }, 500),\n    sreachContract: debounce(function (value) {\n      var _this5 = this;\n\n      this.isLoadingContract = true;\n      this.fetchContract({\n        params: {\n          q: value.target.value,\n          limit: 10\n        }\n      });\n      setTimeout(function () {\n        _this5.isLoadingContract = false;\n      }, 500);\n    }, 500),\n    sreachPosition: debounce(function (value) {\n      var _this6 = this;\n\n      this.isLoadingPosition = true;\n      this.fetchPosition({\n        params: {\n          q: value.target.value,\n          limit: 10\n        }\n      });\n      setTimeout(function () {\n        _this6.isLoadingPosition = false;\n      }, 200);\n    }, 500),\n    // lọc phòng ban theo chi nhánh\n    changeBranch: debounce(function (value) {\n      var _this7 = this;\n\n      if (value) {\n        this.getDepartmentForEmployee({\n          branchId: value,\n          params: {\n            include: 'departments'\n          },\n          cb: function cb() {\n            _this7.departments = _this7.departmentByBranch;\n          }\n        });\n      }\n\n      this.filter();\n    }, 500),\n    ChangeDepartment: debounce(function () {\n      this.placeholderPosition = 'Chọn chức vụ';\n      this.filter();\n    }, 500),\n    filter: function filter() {\n      this.$refs[this.dataViewName].$emit('reload');\n    },\n    changeStatus: function changeStatus(idEmployee) {\n      var _this8 = this;\n\n      this.updateStatusEmployee({\n        id: idEmployee,\n        employee: this.employee,\n        cb: function cb(response) {\n          _this8.$store.dispatch('showNotify', {\n            text: _this8.$t('alert.statusSuccess'),\n            color: 'success'\n          });\n        },\n        error: function error(_error) {\n          if (_error.status === 404) {\n            _this8.$store.dispatch('showNotify', {\n              text: _this8.$t('alert.not-found'),\n              color: 'warning'\n            });\n          }\n        }\n      });\n    },\n    openDialog: function openDialog() {\n      this.dialog = true;\n    },\n    close: function close() {\n      this.dialog = false;\n    },\n    editEmployee: function editEmployee(employeeId, item) {\n      this.getEmployee({\n        employeeId: employeeId,\n        params: {\n          include: 'roles,departments.branch,contracts'\n        }\n      });\n      this.$router.push({\n        name: 'employee-edit',\n        params: {\n          id: employeeId\n        }\n      });\n    },\n    // xóa employee\n    removeConfirm: function removeConfirm(item) {\n      // this.idEmployee = id\n      this.dataEmployee = item;\n      this.dialogDelete = true;\n    },\n    remove: function remove(confirm) {\n      var _this9 = this;\n\n      if (confirm) {\n        this.deleteEmployee({\n          id: this.dataEmployee.id,\n          cb: function cb(response) {\n            _this9.removeDataviewEntry({\n              name: 'employee',\n              data: _this9.dataEmployee,\n              key: 'id'\n            });\n\n            _this9.$store.dispatch('showNotify', {\n              text: _this9.$t('alert.deleteEmployeeSuccess'),\n              color: 'success'\n            });\n\n            _this9.dialogDelete = false;\n          },\n          error: function error(_error2) {\n            if (_error2.status === 404) {\n              _this9.$store.dispatch('showNotify', {\n                text: _this9.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    }\n  }),\n  mounted: function mounted() {\n    var _this10 = this;\n\n    // if (!this.branchAll.length) {\n    this.getBranchs({\n      params: {\n        limit: 10\n      }\n    }); // }\n    // if (!this.contractDetail.length) {\n\n    this.fetchContract({\n      params: {\n        limit: 10\n      }\n    }); // }\n    // if (!this.positionAll.length) {\n\n    this.fetchPosition({\n      params: {\n        limit: 10\n      }\n    }); // }\n\n    if (this.$route.params.id) {\n      this.dataViewHeight = this.$refs.laylout.clientHeight - 55;\n    } else {\n      this.dataViewHeight = this.$refs.laylout.clientHeight - 147;\n    }\n\n    var query = _objectSpread({}, this.$route.query);\n\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(function () {\n        _this10.$refs[_this10.dataViewName].$emit('reload');\n      });\n      delete query.reload;\n      this.$router.replace({\n        query: query\n      });\n    }\n  }\n};",{"version":3,"sources":["Listting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAweA,OAAA,aAAA,MAAA,4BAAA;AACA,SAAA,QAAA,QAAA,QAAA;AACA,OAAA,QAAA,MAAA,gCAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,SAAA,SAAA,QAAA,iBAAA;AACA,eAAA;AACA,QAAA,kBADA;AAEA,SAAA;AACA,YAAA;AACA,YAAA,OADA;AAEA,eAAA;AAFA;AADA,GAFA;AAQA,cAAA;AACA,sBADA;AAEA;AAFA,GARA;AAYA,QAAA;AAAA,WAAA;AACA,kBAAA,IADA;AAEA;AACA,kBAAA,KAHA;AAIA,uBAAA,KAJA;AAKA,yBAAA,KALA;AAMA,yBAAA,KANA;AAOA;AACA,cAAA,KARA;AASA,qBAAA,KATA;AAUA,kBAAA;AACA,eAAA;AADA,OAVA;AAaA,mBAAA;AACA,kBAAA,IADA;AAEA,+BAAA;AAFA,OAbA;AAiBA,YAAA,IAjBA;AAkBA,mBAAA,CACA;AAAA,cAAA,WAAA;AAAA,eAAA;AAAA,OADA,EAEA;AAAA,cAAA,WAAA;AAAA,eAAA;AAAA,OAFA,EAGA;AAAA,cAAA,UAAA;AAAA,eAAA;AAAA,OAHA,EAIA;AAAA,cAAA,WAAA;AAAA,eAAA;AAAA,OAJA,EAKA;AAAA,cAAA,WAAA;AAAA,eAAA;AAAA,OALA,EAMA;AAAA,cAAA,WAAA;AAAA,eAAA;AAAA,OANA,EAOA;AAAA,cAAA,WAAA;AAAA,eAAA;AAAA,OAPA,EAQA;AAAA,cAAA,WAAA;AAAA,eAAA;AAAA,OARA,EASA;AAAA,cAAA,YAAA;AAAA,eAAA;AAAA,OATA,EAUA;AAAA,cAAA,YAAA;AAAA,eAAA;AAAA,OAVA,EAWA;AAAA,cAAA,gBAAA;AAAA,eAAA;AAAA,OAXA,EAYA;AAAA,cAAA,gBAAA;AAAA,eAAA;AAAA,OAZA,CAlBA;AAgCA,mBAAA,KAhCA;AAiCA;AACA,gBAAA,EAlCA;AAmCA,iBAAA,EAnCA;AAoCA,oBAAA,EApCA;AAqCA,iBAAA,EArCA;AAsCA,oBAAA,KAtCA;AAuCA,iBAAA,KAvCA;AAwCA,sBAAA,KAxCA;AAyCA,sBAAA,CAzCA;AA0CA,oBAAA,UA1CA;AA2CA,mBAAA,EA3CA;AA4CA,kBAAA,IA5CA;AA6CA,oBAAA,EA7CA;AA8CA,gBAAA;AACA,gBAAA;AADA,OA9CA;AAiDA,sBAAA,CACA;AAAA,oBAAA,WAAA;AAAA,gBAAA;AAAA,OADA,EAEA;AAAA,oBAAA,iBAAA;AAAA,gBAAA;AAAA,OAFA;AAjDA,KAAA;AAAA,GAZA;AAkEA,8BACA,WAAA,YAAA,EAAA,CAAA,oBAAA,CAAA,CADA,EAEA,WAAA,QAAA,EAAA,CAAA,WAAA,CAAA,CAFA,EAGA,WAAA,UAAA,EAAA,CAAA,cAAA,CAAA,CAHA,EAIA,WAAA,WAAA,EAAA,CAAA,gBAAA,CAAA,CAJA,EAKA,WAAA,UAAA,EAAA,CAAA,aAAA,CAAA,CALA,EAMA,WAAA,CAAA,eAAA,CAAA,CANA,EAOA,sBAAA;AACA,aAAA,UADA;AAEA,oBAAA,eAFA;AAGA,oBAAA,iBAHA;AAIA,wBAAA,qBAJA;AAKA,sBAAA,mBALA;AAMA,yBAAA,oBANA;AAOA,wBAAA,qBAPA;AAQA,0BAAA,qBARA;AASA,+BAAA,4BATA;AAUA,oCAAA;AAVA,GAAA,CAPA,CAlEA;AAsFA,SAAA;AACA;AACA,iBAFA,yBAEA,GAFA,EAEA;AAAA;;AACA,UAAA,CAAA,GAAA,EAAA;AACA,4BAAA,YAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA;AACA,OAFA;AAGA,KAPA;AAQA,eARA,uBAQA,GARA,EAQA;AAAA;;AACA,aAAA,KAAA,SAAA,CAAA;AAAA,eAAA,OAAA,KAAA,CAAA,MAAA,CAAA,YAAA,GAAA,MAAA;AAAA,OAAA,CAAA;AACA,KAVA;AAWA;AACA;AACA;AACA,kCAdA,0CAcA,GAdA,EAcA;AACA,WAAA,cAAA,GAAA,KAAA,UAAA,CAAA,KAAA,IAAA,CAAA;AACA,KAhBA;AAiBA,gBAjBA,wBAiBA,GAjBA,EAiBA;AACA,WAAA,YAAA,GAAA,GAAA;AACA;AAnBA,GAtFA;AA2GA,6BACA,WAAA,UAAA,EAAA,CAAA,qBAAA,EAAA,qBAAA,EAAA,aAAA,CAAA,CADA,EAEA,WAAA,UAAA,EAAA,CAAA,aAAA,EAAA,gBAAA,EAAA,sBAAA,EAAA,aAAA,EAAA,mBAAA,EAAA,sBAAA,EAAA,8BAAA,CAAA,CAFA,EAGA,WAAA,CAAA,YAAA,CAAA,CAHA,EAIA,WAAA,YAAA,EAAA,CAAA,0BAAA,CAAA,CAJA,EAKA,WAAA,QAAA,EAAA,CAAA,YAAA,CAAA,CALA,EAMA,WAAA,WAAA,EAAA,CAAA,eAAA,CAAA,CANA,EAOA,WAAA,UAAA,EAAA,CAAA,eAAA,CAAA,CAPA,EAQA,WAAA,MAAA,EAAA,CAAA,YAAA,CAAA,CARA,EASA,WAAA,CAAA,UAAA,CAAA,CATA;AAUA,cAVA,sBAUA,YAVA,EAUA;AACA,WAAA,UAAA,CAAA,KAAA;AACA,WAAA,WAAA,CAAA,QAAA,GAAA,EAAA;AACA,WAAA,WAAA,CAAA,qBAAA,GAAA,EAAA;AACA,WAAA,UAAA,GAAA,YAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAjBA;AAkBA;AACA,cAnBA,sBAmBA,IAnBA,EAmBA;AACA,UAAA,CAAA,IAAA,EAAA,OAAA,IAAA;;AADA,wBAGA,KAAA,KAAA,CAAA,GAAA,CAHA;AAAA;AAAA,UAGA,IAHA;AAAA,UAGA,KAHA;AAAA,UAGA,GAHA;;AAIA,uBAAA,KAAA,cAAA,GAAA,cAAA,IAAA;AACA,KAxBA;AAyBA,aAzBA,qBAyBA,IAzBA,EAyBA;AACA,UAAA,CAAA,IAAA,EAAA,OAAA,IAAA;;AADA,yBAGA,KAAA,KAAA,CAAA,GAAA,CAHA;AAAA;AAAA,UAGA,KAHA;AAAA,UAGA,GAHA;AAAA,UAGA,IAHA;;AAIA,uBAAA,IAAA,QAAA,CAAA,CAAA,EAAA,GAAA,CAAA,cAAA,MAAA,QAAA,CAAA,CAAA,EAAA,GAAA,CAAA,cAAA,IAAA;AACA,KA9BA;AA+BA,gBA/BA,0BA+BA;AACA,WAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AACA,KAjCA;AAkCA,gBAlCA,0BAkCA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,KApCA;AAqCA,qBArCA,+BAqCA;AAAA;;AACA,WAAA,WAAA,CAAA,IAAA,GAAA,KAAA,UAAA,CAAA,IAAA;AACA,WAAA,WAAA,CAAA,KAAA,GAAA,KAAA,UAAA,CAAA,KAAA;AACA,WAAA,WAAA,CAAA,KAAA,GAAA,KAAA,UAAA,CAAA,KAAA;AACA,cAAA,GAAA,CAAA,kBAAA,EAAA,KAAA,WAAA;AACA,WAAA,UAAA,CAAA,WAAA,GAAA,IAAA,CAAA,kBAAA;AACA,YAAA,MAAA,EAAA;AACA,iBAAA,UAAA,CAAA;AACA,kBAAA,OAAA,WADA;AAEA,gBAAA,YAAA,QAAA,EAAA;AACA,kBAAA,SAAA,OAAA,MAAA,CAAA,EAAA,EAAA,OAAA,UAAA,CAAA;AACA,sBAAA,GAAA,CAAA,kBAAA,EAAA,OAAA,UAAA;AACA,qBAAA,WAAA,GAAA,IAAA;;AACA,qBAAA,mBAAA,CAAA;AACA,sBAAA,UADA;AAEA,sBAAA,MAFA;AAGA,qBAAA;AAHA,eAAA;;AAKA,qBAAA,UAAA,CAAA;AACA,uBAAA,SADA;AAEA,sBAAA,OAAA,EAAA,CAAA,sBAAA;AAFA,eAAA;;AAIA,qBAAA,WAAA,CAAA;AACA,sBAAA,MADA;AAEA,sBAAA,EAFA;AAGA,2BAAA;AAHA,eAAA;;AAKA,qBAAA,aAAA,GAAA,KAAA;AACA;AArBA,WAAA;AAuBA;AACA,OA1BA;AA2BA,KArEA;AAsEA,kBAtEA,0BAsEA,QAtEA,EAsEA;AACA,WAAA,WAAA;AACA,WAAA,MAAA;AACA,WAAA,WAAA,CAAA;AAAA,oBAAA,SAAA,EAAA;AAAA,gBAAA;AAAA,mBAAA;AAAA;AAAA,OAAA,EAHA,CAIA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,iBAAA;AAAA,gBAAA;AAAA,cAAA,SAAA;AAAA;AAAA,OAAA;AACA,KA5EA;AA6EA,QA7EA,gBA6EA,IA7EA,EA6EA;AACA,WAAA,KAAA,CAAA,WAAA,CAAA,IAAA,CAAA,IAAA;AACA,WAAA,MAAA;AACA,KAhFA;AAiFA,eAjFA,yBAiFA;AACA,WAAA,YAAA;AACA,WAAA,MAAA;AACA,KApFA;AAqFA,mBArFA,6BAqFA;AACA,WAAA,YAAA;AACA,KAvFA;AAwFA,eAxFA,yBAwFA;AACA,WAAA,UAAA,CAAA;AAAA,gBAAA;AAAA,iBAAA;AAAA;AAAA,OAAA;AACA,WAAA,iBAAA;AACA,WAAA,YAAA;AACA,KA5FA;AA6FA,kBA7FA,4BA6FA;AACA,WAAA,oBAAA;AACA,WAAA,YAAA;AACA,KAhGA;AAiGA,0BAjGA,oCAiGA;AACA,WAAA,4BAAA;AACA,WAAA,YAAA;AACA,KApGA;AAqGA,aArGA,uBAqGA;AACA,WAAA,WAAA;AACA,WAAA,MAAA;AACA,KAxGA;AAyGA,kBAAA,SAAA,YAAA;AACA,WAAA,MAAA;AACA,KAFA,EAEA,GAFA,CAzGA;AA4GA,kBAAA,SAAA,UAAA,KAAA,EAAA;AAAA;;AACA,WAAA,eAAA,GAAA,IAAA;AACA,WAAA,UAAA,CAAA;AAAA,gBAAA;AAAA,aAAA,MAAA,MAAA,CAAA,KAAA;AAAA,iBAAA;AAAA;AAAA,OAAA;AACA,iBAAA,YAAA;AACA,eAAA,eAAA,GAAA,KAAA;AACA,OAFA,EAEA,GAFA;AAGA,KANA,EAMA,GANA,CA5GA;AAmHA,oBAAA,SAAA,UAAA,KAAA,EAAA;AAAA;;AACA,WAAA,iBAAA,GAAA,IAAA;AACA,WAAA,aAAA,CAAA;AAAA,gBAAA;AAAA,aAAA,MAAA,MAAA,CAAA,KAAA;AAAA,iBAAA;AAAA;AAAA,OAAA;AACA,iBAAA,YAAA;AACA,eAAA,iBAAA,GAAA,KAAA;AACA,OAFA,EAEA,GAFA;AAGA,KANA,EAMA,GANA,CAnHA;AA0HA,oBAAA,SAAA,UAAA,KAAA,EAAA;AAAA;;AACA,WAAA,iBAAA,GAAA,IAAA;AACA,WAAA,aAAA,CAAA;AAAA,gBAAA;AAAA,aAAA,MAAA,MAAA,CAAA,KAAA;AAAA,iBAAA;AAAA;AAAA,OAAA;AACA,iBAAA,YAAA;AACA,eAAA,iBAAA,GAAA,KAAA;AACA,OAFA,EAEA,GAFA;AAGA,KANA,EAMA,GANA,CA1HA;AAiIA;AACA,kBAAA,SAAA,UAAA,KAAA,EAAA;AAAA;;AACA,UAAA,KAAA,EAAA;AACA,aAAA,wBAAA,CAAA;AACA,oBAAA,KADA;AAEA,kBAAA;AAAA,qBAAA;AAAA,WAFA;AAGA,cAAA,cAAA;AACA,mBAAA,WAAA,GAAA,OAAA,kBAAA;AACA;AALA,SAAA;AAOA;;AACA,WAAA,MAAA;AACA,KAXA,EAWA,GAXA,CAlIA;AA8IA,sBAAA,SAAA,YAAA;AACA,WAAA,mBAAA,GAAA,cAAA;AACA,WAAA,MAAA;AACA,KAHA,EAGA,GAHA,CA9IA;AAkJA,UAlJA,oBAkJA;AACA,WAAA,KAAA,CAAA,KAAA,YAAA,EAAA,KAAA,CAAA,QAAA;AACA,KApJA;AAqJA,gBArJA,wBAqJA,UArJA,EAqJA;AAAA;;AACA,WAAA,oBAAA,CAAA;AACA,YAAA,UADA;AAEA,kBAAA,KAAA,QAFA;AAGA,YAAA,YAAA,QAAA,EAAA;AACA,iBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,kBAAA,OAAA,EAAA,CAAA,qBAAA,CADA;AAEA,mBAAA;AAFA,WAAA;AAIA,SARA;AASA,eAAA,eAAA,MAAA,EAAA;AACA,cAAA,OAAA,MAAA,KAAA,GAAA,EAAA;AACA,mBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,oBAAA,OAAA,EAAA,CAAA,iBAAA,CADA;AAEA,qBAAA;AAFA,aAAA;AAIA;AACA;AAhBA,OAAA;AAkBA,KAxKA;AAyKA,cAzKA,wBAyKA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,KA3KA;AA4KA,SA5KA,mBA4KA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KA9KA;AA+KA,gBA/KA,wBA+KA,UA/KA,EA+KA,IA/KA,EA+KA;AACA,WAAA,WAAA,CAAA;AAAA,oBAAA,UAAA;AAAA,gBAAA;AAAA,mBAAA;AAAA;AAAA,OAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,eAAA;AAAA,gBAAA;AAAA,cAAA;AAAA;AAAA,OAAA;AACA,KAlLA;AAmLA;AACA,iBApLA,yBAoLA,IApLA,EAoLA;AACA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,KAxLA;AAyLA,UAzLA,kBAyLA,OAzLA,EAyLA;AAAA;;AACA,UAAA,OAAA,EAAA;AACA,aAAA,cAAA,CAAA;AACA,cAAA,KAAA,YAAA,CAAA,EADA;AAEA,cAAA,YAAA,QAAA,EAAA;AACA,mBAAA,mBAAA,CAAA;AACA,oBAAA,UADA;AAEA,oBAAA,OAAA,YAFA;AAGA,mBAAA;AAHA,aAAA;;AAKA,mBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,oBAAA,OAAA,EAAA,CAAA,6BAAA,CADA;AAEA,qBAAA;AAFA,aAAA;;AAIA,mBAAA,YAAA,GAAA,KAAA;AACA,WAbA;AAcA,iBAAA,eAAA,OAAA,EAAA;AACA,gBAAA,QAAA,MAAA,KAAA,GAAA,EAAA;AACA,qBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,sBAAA,OAAA,EAAA,CAAA,iBAAA,CADA;AAEA,uBAAA;AAFA,eAAA;AAIA;AACA;AArBA,SAAA;AAuBA;AACA;AAnNA,IA3GA;AAgUA,SAhUA,qBAgUA;AAAA;;AACA;AACA,SAAA,UAAA,CAAA;AAAA,cAAA;AAAA,eAAA;AAAA;AAAA,KAAA,EAFA,CAGA;AACA;;AACA,SAAA,aAAA,CAAA;AAAA,cAAA;AAAA,eAAA;AAAA;AAAA,KAAA,EALA,CAMA;AACA;;AACA,SAAA,aAAA,CAAA;AAAA,cAAA;AAAA,eAAA;AAAA;AAAA,KAAA,EARA,CASA;;AACA,QAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,WAAA,cAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,YAAA,GAAA,EAAA;AACA,KAFA,MAEA;AACA,WAAA,cAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,YAAA,GAAA,GAAA;AACA;;AACA,QAAA,0BAAA,KAAA,MAAA,CAAA,KAAA,CAAA;;AACA,QAAA,MAAA,cAAA,CAAA,QAAA,CAAA,EAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,gBAAA,KAAA,CAAA,QAAA,YAAA,EAAA,KAAA,CAAA,QAAA;AACA,OAFA;AAGA,aAAA,MAAA,MAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA;AACA,eAAA;AADA,OAAA;AAGA;AACA;AAzVA,CAAA","sourcesContent":["<template>\n  <v-layout ref=\"laylout\" column fill-height>\n    <div ref=\"header\">\n      <!-- this.getBranchs({ q: item.branch_name }) -->\n      <v-toolbar height=\"50px\" color=\"white\" flat>\n        <v-layout row wrap>\n          <v-flex xs1 :class=\"isMini && 'max-width-col-2'\">\n            <v-tooltip bottom>\n              <v-btn slot=\"activator\" v-if=\"canAccess('employee.create')\" class=\"mr-3 mt-3\" icon color=\"primary\" @click=\"$router.push({name: 'employee-create'})\">\n                <v-icon>add</v-icon>\n              </v-btn>\n              <span>Thêm mới</span>\n            </v-tooltip>\n          </v-flex>\n          <!-- v-model=\"params.q\" -->\n          <v-flex xs7 class=\"mt-1\" :class=\"isMini && 'full-flex-basic full-width-col-10'\">\n            <v-text-field\n            hide-details\n            single-line\n            placeholder=\"Nhập tên, sđt, email ...\"\n            v-model=\"filterQ\"\n            @keyup=\"changeSearch\"\n            clearable\n            @click:clear=\"clearSearch\"\n            ></v-text-field>\n          </v-flex>\n          <v-flex xs3 class='mt-1' :class=\"isMini && 'd-none'\">\n            <!-- filter by status -->\n            <v-select\n            class='ml-2'\n            @change=\"filter\"\n            placeholder=\"Trạng thái\"\n            item-text=\"status_txt\"\n            item-value=\"status\"\n            :items=\"statusEmployee\"\n            v-model=\"filterByStatus\"\n            menu-props=\"auto\"\n            hide-details\n            single-line\n            clearable\n            ></v-select>\n          </v-flex>\n          <!--  -->\n          <v-menu\n          :class=\"isMini && 'd-none'\"\n          :close-on-content-click=\"false\"\n          :nudge-width=\"400\"\n          absolute\n          v-model=\"filterMore\"\n          right\n          >\n          <v-btn slot=\"activator\" icon color=\"primary\" class=\"mt-3 ml-4\">\n            <v-icon>list</v-icon>\n          </v-btn>\n          <v-card>\n            <v-list class=\"pa-0\">\n              <v-list-tile avatar>\n                <v-list-tile-content>\n                  <v-list-tile-title class=\"text-xs-center text-bold ml-4\">Lọc nhiều hơn</v-list-tile-title>\n                </v-list-tile-content>\n                <v-list-tile-action>\n                  <v-btn icon @click=\"filterMore = false\">\n                    <v-icon color=\"primary\">close</v-icon>\n                  </v-btn>\n                </v-list-tile-action>\n              </v-list-tile>\n            </v-list>\n            <v-divider></v-divider>\n            <v-flex xs12>\n              <!-- birth_day -->\n              <v-menu\n              ref=\"dateOfBirth\"\n              :close-on-content-click=\"false\"\n              v-model=\"dateOfBirth\"\n              :nudge-right=\"40\"\n              lazy transition=\"scale-transition\"\n              offset-y\n              full-width\n              min-width=\"290px\">\n              <v-text-field\n              style=\"margin-top: 0px;\"\n              class=\"pl-2 pr-2\"\n              placeholder=\"Ngày, tháng, năm sinh\"\n              slot=\"activator\"\n              v-model=\"filterByDateOfBirth\"\n              clearable\n              @click:clear=\"clearDateBirth\"\n              readonly > </v-text-field>\n              <v-date-picker\n              ref=\"picker\"\n              v-model=\"filterByDateOfBirth\"\n              :max=\"new Date().toISOString().substr(0, 10)\"\n              min=\"1950-01-01\"\n              @change=\"save\"> </v-date-picker> </v-menu>\n              <!-- tháng sinh -->\n              <v-select\n              class='pl-2 pr-2'\n              style=\"margin-top: -4px;\"\n              @change=\"filter\"\n              placeholder=\"Tháng sinh\"\n              item-text=\"name\"\n              item-value=\"value\"\n              v-if=\"Array.isArray(monthBirths)\"\n              :items=\"monthBirths\"\n              v-model=\"filterByMonthBirth\"\n              menu-props=\"auto\"\n              hide-details\n              single-line\n              clearable\n              ></v-select>\n              <!-- type contract -->\n              <v-autocomplete\n              class='ml-2 mr-2 mt-3'\n              @change=\"filter\"\n              placeholder=\"Loại hợp đồng\"\n              item-text=\"type_txt\"\n              item-value=\"type\"\n              v-if=\"Array.isArray(contractDetail)\"\n              :items=\"contractDetail\"\n              @keyup=\"sreachContract\"\n              v-model=\"filterByTypeContract\"\n              menu-props=\"auto\"\n              hide-details\n              single-line\n              clearable\n              >\n              <template slot=\"no-data\">\n                <v-list-tile>\n                  <v-list-tile-title style=\"color:blue\">\n                    Không tìm thấy loại hợp đồng\n                  </v-list-tile-title>\n                </v-list-tile>\n              </template>\n            </v-autocomplete>\n            <!-- date First contract -->\n            <v-menu\n            ref=\"dateFirst\"\n            :close-on-content-click=\"false\"\n            v-model=\"dateFirst\"\n            :nudge-right=\"40\"\n            lazy\n            transition=\"scale-transition\"\n            offset-y\n            full-width\n            max-width=\"290px\"\n            min-width=\"290px\"\n            >\n            <v-text-field\n            style=\"margin-top: 17px;\"\n            slot=\"activator\"\n            v-model=\"filterByDateFirstContract\"\n            clearable\n            persistent-hint\n            class='ml-2 mr-2'\n            placeholder=\"Ngày vào công ty\"\n            @click:clear=\"clearDateFirstContract\"\n            ></v-text-field>\n            <v-date-picker @change=\"filter\" v-model=\"filterByDateFirstContract\"\n            no-title @input=\"dateFirst = false\"></v-date-picker>\n          </v-menu>\n<!-- dateExpiration\n          <template>\n            <v-menu\n            ref=\"dateExpiration\"\n            :close-on-content-click=\"false\"\n            v-model=\"dateExpiration\"\n            :nudge-right=\"40\"\n            lazy transition=\"scale-transition\"\n            offset-y\n            full-width\n            min-width=\"290px\">\n            <v-text-field\n            style=\"margin-top: -5px;\"\n            class='ml-2 mr-2'\n            placeholder=\"Ngày kết thúc hợp đồng\"\n            slot=\"activator\"\n            v-model=\"filterByDateExpirationContract\"\n            clearable\n            readonly> </v-text-field>\n            <v-date-picker\n            v-model=\"filterByDateExpirationContract\"\n            no-title @input=\"dateExpiration = false\"\n            ></v-date-picker> </v-menu>\n          </template> -->\n        </v-flex>\n      </v-card>\n    </v-menu>\n  </v-layout>\n</v-toolbar>\n<!-- filter by department -->\n<!-- v-if=\"isDepartment\" -->\n<v-toolbar height=\"50px\" color=\"white\" flat :class=\"isMini && 'd-none'\">\n  <v-layout row wrap v-if=\"!isMini\">\n    <v-flex xs4 class=\"pt-0\" :class=\"isMini && 'd-none'\">\n      <v-autocomplete\n      class='ml-2'\n      @change=\"changeBranch\"\n      placeholder=\"Chọn chi nhánh\"\n      :items=\"branchAll\"\n      v-if=\"Array.isArray(branchAll)\"\n      @keyup=\"sreachBranch\"\n      :loading=\"isLoadingBranch\"\n      item-text=\"name\"\n      item-value=\"id\"\n      v-model=\"filterByBranch\"\n      hide-details\n      single-line\n      clearable\n      @click:clear=\"clearBranch\">\n      <template slot=\"no-data\">\n        <v-list-tile>\n          <v-list-tile-title style=\"color:blue\">\n            Không tìm thấy chi nhánh\n          </v-list-tile-title>\n        </v-list-tile>\n      </template>\n    </v-autocomplete>\n  </v-flex>\n  <v-flex xs4 :class=\"isMini && 'd-none'\">\n    <v-autocomplete\n    :disabled = \"!filterByBranch\"\n    class='ml-2'\n    @change=\"ChangeDepartment\"\n    v-if=\"Array.isArray(departmentByBranch)\"\n    placeholder=\"Chọn phòng ban\"\n    :items=\"departmentByBranch\"\n    item-text=\"name\"\n    item-value=\"id\"\n    v-model=\"filterByDepartment\"\n    hide-details\n    single-line\n    clearable\n    @click:clear=\"clearDepartment\"\n    >\n    <template slot=\"no-data\" style=\"color:blue\">\n      <v-list-tile>\n        <v-list-tile-title>\n          Không tìm thấy phòng ban\n        </v-list-tile-title>\n      </v-list-tile>\n      </template\n      >\n    </v-autocomplete>\n  </v-flex>\n  <v-flex xs3 :class=\"isMini && 'd-none'\">\n    <v-autocomplete\n    class='ml-2'\n    @change=\"filter\"\n    placeholder=\"Chọn chức danh\"\n    v-if=\"Array.isArray(positionAll)\"\n    :items=\"positionAll\"\n    :loading=\"isLoadingPosition\"\n    @keyup=\"sreachPosition\"\n    item-text=\"name\"\n    item-value=\"id\"\n    v-model=\"filterByPosition\"\n    hide-details\n    single-line\n    clearable\n    @click:clear=\"filter\"\n    >\n    <template slot=\"no-data\">\n      <v-list-tile>\n        <v-list-tile-title style=\"color:blue\">\n          Không tìm thấy chức danh\n        </v-list-tile-title>\n      </v-list-tile>\n      </template\n      >\n    </v-autocomplete>\n  </v-flex>\n  <v-flex xs1>\n    <v-tooltip bottom>\n      <v-btn class=\"mt-3 ml-4\" slot=\"activator\" icon color=\"primary\" @click=\"resetForm()\">\n        <v-icon>close</v-icon>\n      </v-btn>\n      <span>Reset bộ lọc</span>\n    </v-tooltip>\n  </v-flex>\n</v-layout>\n</v-toolbar>\n<v-toolbar height=\"45px\" color=\"white\" flat v-if=\"!isMini\">\n  <v-layout>\n    <v-flex style=\"flex-basis:55px;\" sm1 class=\"text-bold\">\n      #\n    </v-flex>\n    <v-flex sm1 class=\"text-bold\">\n      Hình ảnh\n    </v-flex>\n    <v-flex sm4 class=\"text-bold\">\n      Thông tin nhân viên\n    </v-flex>\n    <v-flex sm2 class=\"text-bold\">\n      Chi nhánh\n    </v-flex>\n    <v-flex sm2 class=\"text-bold\">\n      Phòng ban\n    </v-flex>\n    <v-flex sm2 class=\"text-bold\">\n      Chức danh\n    </v-flex>\n    <v-flex style=\"flex-basis:100px;\" sm2 class=\"text-bold mr-3\">\n      Hành động\n    </v-flex>\n  </v-layout>\n</v-toolbar>\n</div>\n<v-flex xs12 class=\"border-e0-top\">\n  <data-view\n  :name=\"dataViewName\"\n  api-url=\"employees\"\n  v-if=\"dataViewHeight\"\n  :viewHeight=\"dataViewHeight\"\n  :params=\"filterParams\"\n  :ref=\"dataViewName\"\n  >\n  <template slot-scope=\"{items}\">\n    <v-list three-line>\n      <template  v-for=\"(item, index) in items.data\">\n        <v-list-tile\n        :key=\"'item' + item.id\"\n        avatar\n        @click=\"employeeDetail(item)\"\n        :inactive=\"item.id === $route.params.id\"\n        :class=\"item.id === $route.params.id && 'grey lighten-2'\"\n        >\n        <v-layout class=\"pa-2\">\n          <v-flex style=\"flex-basis:55px;\" sm1 :class=\"isMini && 'd-none'\">\n            {{index + 1}}\n          </v-flex>\n          <v-flex xs1>\n            <v-flex :class=\"isMini && 'd-none'\">\n              <img width=\"80%\" height='60px' :src=\"item.avatar_path\" alt=\"\">\n            </v-flex>\n            <v-flex style=\"margin-top:-10px !important;\">\n              <!-- <b>GT: </b> -->\n            </v-flex>\n          </v-flex>\n          <!-- imfomation -->\n          <v-flex sm4 :class=\"isMini && 'full-flex-basic full-max-width'\">\n            {{ item.name}} -\n            <small>\n            <!--                 <span v-if=\"item.gender_txt==='Nam'\" style=\"color: blue;\">{{ item.gender_txt }}</span>\n              <span v-if=\"item.gender_txt==='Nữ'\" style=\"color: #AA00FF;\">{{ item.gender_txt }}</span> -->\n              <span style=\"color: green;\">{{ item.gender_txt }}</span>\n            </small>\n            <!--               <v-tooltip bottom v-if=\"item.gender_txt==='Nam'\">\n                <v-icon slot=\"activator\" color=\"blue\">fa fa-mars</v-icon>\n                <span>Nam</span>\n              </v-tooltip>\n              <v-tooltip bottom v-if=\"item.gender_txt==='Nữ'\">\n                <v-icon slot=\"activator\" color=\"pink\">fa fa-venus</v-icon>\n                <span>Nữ</span>\n              </v-tooltip>\n              <v-tooltip bottom v-if=\"item.gender_txt==='Khác'\">\n                <v-icon slot=\"activator\" color=\"green\">fa fa-venus-mars</v-icon>\n                <span>Giới tính khác</span>\n              </v-tooltip> -->\n              <v-list-tile-sub-title  class=\"text--primary copytext\" v-if=\"item.email\" :class=\"isMini && 'd-none'\">\n                <v-icon size=\"16px\">email</v-icon>\n                <span @click.stop=\"clickToCopy\" class=\"click-copy\">{{ item.email }}</span>\n              </v-list-tile-sub-title>\n              <v-list-tile-sub-title class=\"text--primary copytext\" v-if=\"item.phone\" :class=\"isMini && 'd-none'\">\n                <v-flex :id=\"'phone'+index\"><v-icon size=\"16px\">phone</v-icon>\n                  <span @click.stop=\"clickToCopy\" class=\"click-copy\">{{ item.phone }}</span>\n                </v-flex>\n              </v-list-tile-sub-title>\n            </v-flex>\n            <!-- end infomation -->\n            <v-flex sm2>\n              <v-flex v-if=\"item.departments\" :class=\"isMini && 'd-none'\">\n                <v-flex :key=\"index\" v-for=\"(branch, index) in item.departments.data\" class='pr-2'>\n                  {{ branch.branch_name }}\n                </v-flex>\n              </v-flex>\n            </v-flex>\n            <v-flex sm2 :class=\"isMini && 'd-none'\" >\n              <v-flex v-if=\"item.departments\">\n                <v-flex class=\"pr-2\" :key=\"index\" v-for=\"(department, index) in item.departments.data\">\n                  {{ department.name }}\n                </v-flex>\n              </v-flex>\n            </v-flex>\n            <v-flex sm2 :class=\"isMini && 'd-none'\" >\n              <v-flex v-if=\"item.departments\">\n                <v-flex :key=\"index\" v-for=\"(department, index) in item.departments.data\">\n                  {{ department.position_name }}\n                </v-flex>\n              </v-flex>\n            </v-flex>\n            <v-flex style=\"flex-basis:100px;\" sm2 :class=\"isMini && 'd-none'\">\n             <v-tooltip bottom sm6>\n              <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('employee.update')\" icon @click.stop=\"editEmployee(item.id, item)\">\n                <v-icon class='theme--light teal--text'>edit</v-icon>\n              </v-btn>\n              <span>Sửa</span>\n            </v-tooltip>\n            <v-tooltip bottom sm6>\n              <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('employee.delete')\" icon @click.stop=\"removeConfirm(item)\">\n                <v-icon class=\"theme--light pink--text\">delete</v-icon>\n              </v-btn>\n              <span>Xóa</span>\n            </v-tooltip>\n            <v-layout row xs12>\n              <v-flex xs6>\n                <v-tooltip bottom>\n                  <v-switch\n                  @click.native.stop\n                  @change=\"changeStatus(item.id)\"\n                  name=\"status\"\n                  slot=\"activator\"\n                  v-model=\"item.status\"\n                  ></v-switch>\n                  <span v-if=\"item.status\">Kích hoạt</span>\n                  <span v-else>Không kích hoạt</span>\n                </v-tooltip>\n              </v-flex>\n              <v-flex xs6 style=\"margin-left: -15px;\">\n                <v-tooltip bottom v-if=\"!item.has_account\">\n                  <v-btn slot=\"activator\" icon  @click.stop=\"addAccount(item)\" style=\"margin-top: 0px;\">\n                    <v-icon color=\"orange\" size=\"15px\">fa-user-plus</v-icon>\n                  </v-btn>\n                  <span> Tạo tài khoản </span>\n                </v-tooltip>\n              </v-flex>\n            </v-layout>\n          </v-flex>\n        </v-layout>\n      </v-list-tile>\n      <v-divider\n      :key=\"'div' + item.id\"\n      v-if=\"index + 1 < items.data.length\"\n      ></v-divider>\n    </template>\n  </v-list>\n</template>\n</data-view>\n</v-flex>\n<dialog-confirm v-model=\"dialogDelete\" @input=\"remove\" />\n<!-- dialog create and edit -->\n<v-dialog v-model=\"dialogAccount\" max-width=\"700px\">\n  <v-form @submit.prevent=\"submitFormAccount\">\n    <v-card class=\"pa-0\">\n      <v-card-title class=\"pa-0 pt-3\">\n        <span class=\"headline\" width=\"100%\"  style=\"margin:0 auto\">Tạo tài khoản: {{ valAccount.email }}  </span>\n      </v-card-title>\n      <!-- form edit -->\n      <v-card-text id=\"formSub\" class=\"pt-0\">\n        <v-container grid-list-md class=\"white scroll-y\">\n          <!-- password -->\n          <v-text-field\n          placeholder=\"Nhập mật khẩu\"\n          :error-messages=\"errors.has('password') ? errors.collect('password') : []\" v-validate=\"'required|min:6'\"\n          :data-vv-as=\"$t('label.password')\"\n          :autofocus=\"true\"\n          tabindex=\"1\"\n          ref=\"password\"\n          name=\"password\"\n          :label=\"$t('label.password')\"\n          class=\"input-required\"\n          type=\"password\"\n          v-model=\"accountUser.password\"> </v-text-field>\n          <!-- password confirm -->\n          <v-text-field\n          tabindex=\"2\"\n          placeholder=\"Nhập lại mật khẩu\"\n          :error-messages=\"errors.has('password_confirmation') ? errors.collect('password_confirmation') : []\"\n          v-validate=\"'required|confirmed:'+accountUser.password\"\n          :data-vv-as=\"$t('label.password_confirmation')\"\n          name=\"password_confirmation\"\n          :label=\"$t('label.password_confirmation')\"\n          class=\"input-required\"\n          type=\"password\"\n          v-model=\"accountUser.password_confirmation\"> </v-text-field>\n        </v-container>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn tabindex=\"4\" color=\"error\" flat @click.native=\"closeAccount\">Hủy bỏ</v-btn>\n        <v-btn tabindex=\"3\" class=\"green--text\" flat type=\"submit\">Thêm mới</v-btn>\n        <div :tabindex=\"4\"  @focus=\"backTabIndex\"></div>\n      </v-card-actions>\n    </v-card>\n  </v-form>\n</v-dialog>\n</v-layout>\n</template>\n<script>\nimport DialogConfirm from '@/components/DialogConfirm'\nimport { debounce } from 'lodash'\nimport DataView from '@/components/DataView/DataView'\nimport { mapActions, mapGetters } from 'vuex'\nimport { mapFields } from 'vuex-map-fields'\nexport default{\n  name: 'employeeListting',\n  props: {\n    isMini: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    DataView,\n    DialogConfirm\n  },\n  data: () => ({\n    copyToText: true,\n    // lọc nhiều hơn\n    filterMore: false,\n    isLoadingBranch: false,\n    isLoadingContract: false,\n    isLoadingPosition: false,\n    // filter by date\n    dialog: false,\n    dialogAccount: false,\n    valAccount: {\n      email: null\n    },\n    accountUser: {\n      password: null,\n      password_confirmation: null\n    },\n    date: null,\n    monthBirths: [\n      { name: 'Tháng một', value: 1 },\n      { name: 'Tháng hai', value: 2 },\n      { name: 'Tháng ba', value: 3 },\n      { name: 'Tháng bốn', value: 4 },\n      { name: 'Tháng năm', value: 5 },\n      { name: 'Tháng sáu', value: 6 },\n      { name: 'Tháng bảy', value: 7 },\n      { name: 'Tháng tám', value: 8 },\n      { name: 'Tháng chín', value: 9 },\n      { name: 'Tháng mười', value: 10 },\n      { name: 'Tháng mười một', value: 11 },\n      { name: 'Tháng mưới hai', value: 12 }\n    ],\n    dateOfBirth: false,\n    // end filter by date\n    branches: [],\n    contracts: [],\n    dateContract: '',\n    positions: [],\n    dialogDelete: false,\n    dateFirst: false,\n    dateExpiration: false,\n    dataViewHeight: 0,\n    dataViewName: 'employee',\n    departments: [],\n    idEmployee: null,\n    dataEmployee: {},\n    employee: {\n      status: true\n    },\n    statusEmployee: [\n      { status_txt: 'Kích hoạt', status: 1 },\n      { status_txt: 'Không kích hoạt', status: 0 }\n    ]\n  }),\n  computed: {\n    ...mapGetters('Department', ['departmentByBranch']),\n    ...mapGetters('Branch', ['branchAll']),\n    ...mapGetters('Employee', ['filterParams']),\n    ...mapGetters('Contracts', ['contractDetail']),\n    ...mapGetters('Position', ['positionAll']),\n    ...mapGetters(['isFetchingApi']),\n    ...mapFields(`Employee`, {\n      filterQ: 'params.q',\n      filterByStatus: 'params.status',\n      filterByBranch: 'params.branchId',\n      filterByDepartment: 'params.departmentId',\n      filterByPosition: 'params.positionId',\n      filterByDateOfBirth: 'params.dateOfBirth',\n      filterByMonthBirth: 'params.monthOfBirth',\n      filterByTypeContract: 'params.contractType',\n      filterByDateFirstContract: 'params.dateOfFirstContract',\n      filterByDateExpirationContract: 'params.dateExpiration'\n    })\n  },\n  watch: {\n    // auto focue when create accoute\n    dialogAccount (val) {\n      if (!val) return\n      requestAnimationFrame(() => {\n        this.$refs.password.focus()\n      })\n    },\n    dateOfBirth (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    // filterByDateFirstContract (val) {\n    //   this.dateFirst = this.formatDate(this.date)\n    // },\n    filterByDateExpirationContract (val) {\n      this.dateExpiration = this.formatDate(this.date)\n    },\n    filterParams (val) {\n      this.filterParams = val\n    }\n  },\n  methods: {\n    ...mapActions('Dataview', ['removeDataviewEntry', 'updateDataviewEntry', 'setDataview']),\n    ...mapActions('Employee', ['getEmployee', 'deleteEmployee', 'updateStatusEmployee', 'clearFilter', 'clearFilterBranch', 'clearFilterDateBirth', 'clearFilterDateFirstContract']),\n    ...mapActions(['showNotify']),\n    ...mapActions('Department', ['getDepartmentForEmployee']),\n    ...mapActions('Branch', ['getBranchs']),\n    ...mapActions('Contracts', ['fetchContract']),\n    ...mapActions('Position', ['fetchPosition']),\n    ...mapActions('User', ['createUser']),\n    ...mapActions(['fetchApi']),\n    addAccount (valueAccount) {\n      this.$validator.reset()\n      this.accountUser.password = ''\n      this.accountUser.password_confirmation = ''\n      this.valAccount = valueAccount\n      this.dialogAccount = true\n      this.passWordDialog = true\n    },\n    // địng dạng hiển thị cho các trường date\n    formatDate (date) {\n      if (!date) return null\n\n      const [year, month, day] = date.split('-')\n      return `${month}/${day}/${year}`\n    },\n    parseDate (date) {\n      if (!date) return null\n\n      const [month, day, year] = date.split('/')\n      return `${day.padStart(2, '0')}-${month.padStart(2, '0')}-${year}`\n    },\n    backTabIndex () {\n      this.$refs.firstInput.focus()\n    },\n    closeAccount () {\n      this.dialogAccount = false\n    },\n    submitFormAccount () {\n      this.accountUser.name = this.valAccount.name\n      this.accountUser.email = this.valAccount.email\n      this.accountUser.phone = this.valAccount.phone\n      console.log('this.accountUser', this.accountUser)\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          this.createUser({\n            user: this.accountUser,\n            cb: (response) => {\n              let object = Object.assign({}, this.valAccount)\n              console.log('this.accountUser', this.valAccount)\n              object.has_account = true\n              this.updateDataviewEntry({\n                name: 'employee',\n                data: object,\n                key: 'id'\n              })\n              this.showNotify({\n                color: 'success',\n                text: this.$t('alert.accountSuccess')\n              })\n              this.setDataview({\n                name: 'user',\n                data: [],\n                uniqueKey: 'id'\n              })\n              this.dialogAccount = false\n            }\n          })\n        }\n      })\n    },\n    employeeDetail (employee) {\n      this.clearFilter()\n      this.filter()\n      this.getEmployee({ employeeId: employee.id, params: { include: 'roles,departments,contracts' } })\n      // this.clearFilter()\n      this.$router.push({ name: 'employee-detail', params: { id: employee.id } })\n    },\n    save (date) {\n      this.$refs.dateOfBirth.save(date)\n      this.filter()\n    },\n    clearSearch () {\n      this.changeSearch()\n      this.filter()\n    },\n    clearDepartment () {\n      this.changeSearch()\n    },\n    clearBranch () {\n      this.getBranchs({ params: { limit: 10 } })\n      this.clearFilterBranch()\n      this.changeSearch()\n    },\n    clearDateBirth () {\n      this.clearFilterDateBirth()\n      this.changeSearch()\n    },\n    clearDateFirstContract () {\n      this.clearFilterDateFirstContract()\n      this.changeSearch()\n    },\n    resetForm () {\n      this.clearFilter()\n      this.filter()\n    },\n    changeSearch: debounce(function () {\n      this.filter()\n    }, 200),\n    sreachBranch: debounce(function (value) {\n      this.isLoadingBranch = true\n      this.getBranchs({ params: { q: value.target.value, limit: 10 } })\n      setTimeout(() => {\n        this.isLoadingBranch = false\n      }, 500)\n    }, 500),\n    sreachContract: debounce(function (value) {\n      this.isLoadingContract = true\n      this.fetchContract({ params: { q: value.target.value, limit: 10 } })\n      setTimeout(() => {\n        this.isLoadingContract = false\n      }, 500)\n    }, 500),\n    sreachPosition: debounce(function (value) {\n      this.isLoadingPosition = true\n      this.fetchPosition({ params: { q: value.target.value, limit: 10 } })\n      setTimeout(() => {\n        this.isLoadingPosition = false\n      }, 200)\n    }, 500),\n    // lọc phòng ban theo chi nhánh\n    changeBranch: debounce(function (value) {\n      if (value) {\n        this.getDepartmentForEmployee({\n          branchId: value,\n          params: { include: 'departments' },\n          cb: () => {\n            this.departments = this.departmentByBranch\n          }\n        })\n      }\n      this.filter()\n    }, 500),\n    ChangeDepartment: debounce(function () {\n      this.placeholderPosition = 'Chọn chức vụ'\n      this.filter()\n    }, 500),\n    filter () {\n      this.$refs[this.dataViewName].$emit('reload')\n    },\n    changeStatus (idEmployee) {\n      this.updateStatusEmployee({\n        id: idEmployee,\n        employee: this.employee,\n        cb: (response) => {\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.statusSuccess'),\n            color: 'success'\n          })\n        },\n        error: (error) => {\n          if (error.status === 404) {\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.not-found'),\n              color: 'warning'\n            })\n          }\n        }\n      })\n    },\n    openDialog () {\n      this.dialog = true\n    },\n    close () {\n      this.dialog = false\n    },\n    editEmployee (employeeId, item) {\n      this.getEmployee({ employeeId: employeeId, params: { include: 'roles,departments.branch,contracts' } })\n      this.$router.push({ name: 'employee-edit', params: { id: employeeId } })\n    },\n    // xóa employee\n    removeConfirm (item) {\n      // this.idEmployee = id\n      this.dataEmployee = item\n      this.dialogDelete = true\n    },\n    remove (confirm) {\n      if (confirm) {\n        this.deleteEmployee({\n          id: this.dataEmployee.id,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'employee',\n              data: this.dataEmployee,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.deleteEmployeeSuccess'),\n              color: 'success'\n            })\n            this.dialogDelete = false\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    }\n  },\n  mounted () {\n    // if (!this.branchAll.length) {\n    this.getBranchs({ params: { limit: 10 } })\n    // }\n    // if (!this.contractDetail.length) {\n    this.fetchContract({ params: { limit: 10 } })\n    // }\n    // if (!this.positionAll.length) {\n    this.fetchPosition({ params: { limit: 10 } })\n    // }\n    if (this.$route.params.id) {\n      this.dataViewHeight = this.$refs.laylout.clientHeight - 55\n    } else {\n      this.dataViewHeight = this.$refs.laylout.clientHeight - 147\n    }\n    let query = { ...this.$route.query }\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(() => {\n        this.$refs[this.dataViewName].$emit('reload')\n      })\n      delete query.reload\n      this.$router.replace({\n        query: query\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n.v-toolbar__content{\n  height: 80px !important;\n}\n.v-menu__content\n{\n  top: 100px !important;\n}\n/*tooltip*/\n</style>\n<style>\n.copytext{\n  overflow: unset;\n}\n</style>\n"],"sourceRoot":"src/views/employee"}]}