{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/branch/Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/branch/Form.vue","mtime":1542962436551},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/asyncToGenerator\";\nimport _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from '../../plugins/axios';\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'BranchForm',\n  components: {\n    DataView: DataView\n  },\n  computed: _objectSpread({}, mapGetters(['isFetchingApi']), mapGetters('City', ['cityAll', 'districtByCity']), {\n    isCreate: function isCreate() {\n      return this.type === 'create';\n    }\n  }),\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataBranch: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      stepBranch: 0,\n      districtActive: false,\n      type_branch: '',\n      status: '',\n      districtAll: {},\n      branch: {\n        type: false,\n        status: true\n      },\n      plugins: ['advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker', 'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking', 'save table contextmenu directionality emoticons template paste textcolor codesample']\n    };\n  },\n  watch: {\n    dataBranch: function dataBranch() {\n      this.setInitData();\n    }\n  },\n  methods: _objectSpread({}, mapActions(['fetchApi']), mapActions('City', ['getCity', 'getDistrictByCity']), {\n    setInitData: function setInitData() {\n      var dataBranch = _objectSpread({}, this.dataBranch);\n\n      this.branch = _objectSpread({}, this.branch, dataBranch);\n    },\n    changedCity: function changedCity(value) {\n      var _this = this;\n\n      this.districtActive = true;\n      this.getDistrictByCity({\n        cityId: value,\n        cb: function cb() {\n          _this.districtAll = _this.districtByCity;\n        }\n      });\n    },\n    handleImageAdded: function () {\n      var _handleImageAdded = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(file, success, failure) {\n        var formData, response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                formData = new FormData();\n                formData.append('file', file.blob());\n                _context.prev = 2;\n                _context.next = 5;\n                return axios.post('/branches/upload', formData);\n\n              case 5:\n                response = _context.sent;\n\n                if (!(response.data.code === 1)) {\n                  _context.next = 10;\n                  break;\n                }\n\n                success(response.data.data.path);\n                _context.next = 11;\n                break;\n\n              case 10:\n                return _context.abrupt(\"return\", false);\n\n              case 11:\n                _context.next = 16;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](2);\n\n                if (_context.t0.status === 422) {\n                  this.$store.dispatch('showNotify', {\n                    text: this.$t('alert.error'),\n                    color: 'error'\n                  });\n                }\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 13]]);\n      }));\n\n      return function handleImageAdded(_x, _x2, _x3) {\n        return _handleImageAdded.apply(this, arguments);\n      };\n    }(),\n    setEditorContent: function setEditorContent(e, content) {\n      e.setContent(content || '');\n    },\n    backTabIndex: function backTabIndex() {\n      this.$refs.firstInput.focus();\n    },\n    backTabIndex2: function backTabIndex2() {\n      this.$refs.secondInput.focus();\n    },\n    // txt loại chi nhánh\n    typeBranch: function typeBranch() {\n      if (this.branch.type) {\n        this.type_branch = 'Chi nhánh chính';\n      } else {\n        this.type_branch = 'Chi nhánh phụ';\n      }\n    },\n    // next step\n    nextStep: function nextStep() {\n      var _this2 = this;\n\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          _this2.stepBranch = 2;\n          setTimeout(function () {\n            _this2.$refs.secondInput.focus();\n          }, 300);\n        }\n      });\n    },\n    // khi step 1 xayr ra error thì quay về step 1\n    stepError: function stepError() {\n      this.stepBranch = 1;\n    },\n    // bẳt lỗi trước khi submit\n    validateBeforeSubmit: function validateBeforeSubmit() {\n      var _this3 = this;\n\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          var branch = Object.assign({}, _this3.branch);\n          branch.status = branch.status ? 1 : 0;\n          branch.type = branch.type ? 1 : 0;\n\n          _this3.$emit('submit', branch);\n        } else {\n          _this3.stepBranch = 1;\n\n          _this3.$store.dispatch('showNotify', {\n            text: _this3.$t('alert.invalid'),\n            color: 'warning'\n          });\n        }\n      });\n    }\n  }),\n  mounted: function mounted() {\n    this.$nextTick(this.$refs.firstInput.focus);\n  },\n  created: function created() {\n    var _this4 = this;\n\n    !!this.dataBranch && this.setInitData();\n\n    if (this.$route.params.id) {\n      this.districtActive = true;\n      this.getDistrictByCity({\n        cityId: this.dataBranch.city_id,\n        cb: function cb() {\n          _this4.districtAll = _this4.districtByCity;\n        }\n      });\n    } else {\n      this.getDistrictByCity({\n        cityId: 1,\n        cb: function cb() {\n          _this4.districtAll = _this4.districtByCity;\n        }\n      });\n    }\n\n    this.getCity();\n    this.typeBranch();\n  }\n};",{"version":3,"sources":["Form.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n <v-stepper class=\"xs8\" style=\"text-shadow: none inline !important;\" flat v-model=\"stepBranch\">\n  <v-stepper-header absolute style=\"height: 50px;position: fixed; width: 100%;z-index: 1;background-color: white\">\n    <v-stepper-step\n    :rules=\"[() => !errors.has('name')\n    && !errors.has('email')\n    && !errors.has('phone')\n    && !errors.has('address')\n    && !errors.has('tax_number')\n    && !errors.has('city_id')\n    && !errors.has('district_id')]\" :complete=\"stepBranch > 1\" step=\"1\">Thông tin chi nhánh</v-stepper-step>\n    <v-spacer></v-spacer>\n    <v-stepper-step :complete=\"stepBranch > 2\" step=\"2\">Thông tin thêm</v-stepper-step>\n    <v-spacer></v-spacer>\n    <v-tooltip bottom style=\"margin-right: -50px; float: right;\">\n      <v-btn slot=\"activator\" icon @click=\"$router.push({name: 'branch'})\" >\n        <v-icon>close</v-icon>\n      </v-btn>\n      <span>Đóng</span>\n    </v-tooltip>\n    <v-spacer></v-spacer>\n  </v-stepper-header>\n  <v-stepper-items>\n    <!-- step 1 ===================================== -->\n    <v-stepper-content step=\"1\" style=\"min-height: 570px;margin-top:30px\">\n      <v-form @submit.prevent=\"nextStep\">\n        <!-- <h4>Thông tin chính</h4> -->\n        <v-layout>\n          <v-flex md6 xs6>\n            <!-- name -->\n            <v-text-field\n            :tabindex=\"1\"\n            autofocus\n            ref=\"firstInput\"\n            placeholder=\"Tên chi nhánh\"\n            :error-messages=\"errors.has('name') ? errors.collect('name') : []\"\n            v-validate=\"'required'\"\n            :data-vv-as=\"$t('label.name')\"\n            name=\"name\"\n            :label=\"$t('label.name')\"\n            class=\"input-required\"\n            v-model=\"branch.name\"> </v-text-field>\n            <!-- address -->\n\n            <v-text-field\n            :tabindex=\"3\"\n            placeholder=\"Nhập địa chỉ\"\n            :error-messages=\"errors.has('address') ? errors.collect('address') : []\"\n            :data-vv-as=\"$t('label.address')\"\n            name=\"address\"\n            v-validate=\"'required'\"\n            :label=\"$t('label.address')\"\n            class=\"input-required\"\n            v-model=\"branch.address\"> </v-text-field>\n            <!-- city -->\n            <v-select\n            :tabindex=\"5\"\n            v-if=\"Array.isArray(cityAll)\"\n            v-validate=\"'required'\"\n            :error-messages=\"errors.has('city_id') ? errors.collect('city_id') : []\"\n            :data-vv-as=\"$t('label.city_id')\"\n            name=\"city_id\"\n            :label=\"$t('label.city_id')\"\n            class=\"input-required\"\n            v-model=\"branch.city_id\"\n            :items=\"cityAll\"\n            item-value=\"id\"\n            item-text=\"name\"\n            @change=\"changedCity\"\n            placeholder=\"Chọn thành phố\" > </v-select>\n            <!-- tax_number -->\n            <v-text-field\n            :tabindex=\"7\"\n            placeholder=\"Nhập mã số thuế\"\n            :error-messages=\"errors.has('tax_number') ? errors.collect('tax_number') : []\"\n            :data-vv-as=\"$t('label.tax_number')\"\n            name=\"tax_number\"\n            v-validate=\"'required'\"\n            :label=\"$t('label.tax_number')\"\n            class=\"input-required\"\n            v-model=\"branch.tax_number\"> </v-text-field>\n          </v-flex>\n          <v-flex md6 xs6 style=\"margin-left:10px\">\n            <!-- email -->\n            <v-text-field\n            :tabindex=\"2\"\n            placeholder=\"example@gmail.com\"\n            :error-messages=\"errors.has('email') ? errors.collect('email') : []\"\n            :data-vv-as=\"$t('label.email')\"\n            name=\"email\"\n            v-validate=\"'required|email'\"\n            :label=\"$t('label.email')\"\n            class=\"input-required\"\n            v-model=\"branch.email\"> </v-text-field>\n            <!-- phone -->\n            <v-text-field\n            :tabindex=\"4\"\n            placeholder=\"Nhập số điện thoại\"\n            :error-messages=\"errors.has('phone') ? errors.collect('phone') : []\"\n            :data-vv-as=\"$t('label.phone')\"\n            name=\"phone\"\n            v-validate=\"'required|numeric|min:10|max:12'\"\n            :counter=\"12\"\n            type=\"number\"\n            class=\"input-required\"\n            :label=\"$t('label.phone')\"\n            v-model=\"branch.phone\"> </v-text-field>\n            <!-- district -->\n            <v-select\n            v-if=\"Array.isArray(districtAll)\"\n            :disabled = \"!districtActive\"\n            v-validate=\"'required'\"\n            :error-messages=\"errors.has('district_id') ? errors.collect('district_id') : []\"\n            :data-vv-as=\"$t('label.district_id')\"\n            name=\"district_id\"\n            :label=\"$t('label.district_id')\"\n            class=\"input-required\"\n            v-model=\"branch.district_id\"\n            :items=\"districtAll\"\n            item-value=\"id\"\n            item-text=\"name\"\n            :tabindex=\"6\"\n            placeholder=\"Hãy chọn quận hoặc huyện\"> </v-select>\n            <v-layout row wrap class='mt-3 ml-1'>\n              <v-flex xs6>\n                <!-- type_branch -->\n                <label>Chi nhánh chính</label>\n                <v-switch\n                style=\"margin-top:0px; outline-style: none;\"\n                :tabindex=\"8\"\n                name=\"type\"\n                slot=\"activator\"\n                v-model=\"branch.type\"\n                ></v-switch>\n              </v-flex>\n              <v-flex xs6>\n                <!-- status -->\n                <label>Trạng thái</label>\n                <v-flex xs1>\n                  <v-tooltip bottom>\n                    <v-switch\n                    style=\"margin-top:0px; outline-style: none;\"\n                    :label='status'\n                    :tabindex=\"9\"\n                    name=\"status\"\n                    slot=\"activator\"\n                    v-model=\"branch.status\"\n                    ></v-switch>\n                    <span v-if=\"branch.status\">Hoạt động</span>\n                    <span v-else>Không hoạt động</span></v-tooltip>\n                  </v-flex>\n                </v-flex>\n              </v-layout>\n            </v-flex>\n          </v-layout>\n          <v-layout row wrap>\n            <v-flex xs12 >\n              <v-btn\n              style=\"position: absolute; right: 46%; margin-top: 20px;\"\n              :tabindex=\"10\"\n              color=\"primary\"\n              type=\"submit\">\n            Tiếp tục</v-btn>\n            <div :tabindex=\"10\"  @focus=\"backTabIndex\"></div>\n          </v-flex>\n        </v-layout>\n      </v-form>\n    </v-stepper-content>\n    <!-- step 2========================================= -->\n    <v-stepper-content step=\"2\" style=\"margin-top:30px\">\n      <v-form @submit.prevent=\"validateBeforeSubmit\">\n        <v-layout>\n          <v-flex md6 xs6 style=\"margin-right:10px\">\n            <!-- facebook -->\n            <v-text-field\n            tabindex=\"1\"\n            ref=\"secondInput\"\n            autofocus\n            placeholder=\"https://www.facebook.com/tienlee.ask\"\n            :error-messages=\"errors.has('facebook') ? errors.collect('facebook') : []\"\n            :data-vv-as=\"$t('label.facebook')\"\n            name=\"facebook\"\n            :label=\"$t('label.facebook') \"\n            v-model=\"branch.facebook\"> </v-text-field>\n            <!-- website -->\n            <v-text-field\n            tabindex=\"3\"\n            placeholder=\"https://vnexpress.net\"\n            :error-messages=\"errors.has('website') ? errors.collect('website') : []\"\n            :data-vv-as=\"$t('label.website')\"\n            name=\"website\"\n            :label=\"$t('label.website')\"\n            v-model=\"branch.website\"> </v-text-field>\n          </v-flex>\n          <v-flex md6 xs6 style=\"margin-left:10px\">\n            <!-- bank -->\n            <v-text-field\n            tabindex=\"2\"\n            placeholder=\"Nhập tài khoản ngân hàng\"\n            :error-messages=\"errors.has('bank') ? errors.collect('bank') : []\"\n            :data-vv-as=\"$t('label.bank')\"\n            name=\"bank\"\n            :label=\"$t('label.bank')\"\n            v-model=\"branch.bank\"> </v-text-field>\n            <!-- instagram -->\n            <v-text-field\n            placeholder=\"https://www.instagram.com/nht\"\n            :error-messages=\"errors.has('instagram') ? errors.collect('instagram') : []\"\n            :data-vv-as=\"$t('label.instagram')\"\n            name=\"instagram\"\n            :label=\"$t('label.instagram')\"\n            v-model=\"branch.instagram\"> </v-text-field>\n            <!-- zalo -->\n            <v-text-field\n            tabindex=\"4\"\n            placeholder=\"https://oa.zalo.me/home\"\n            :error-messages=\"errors.has('zalo') ? errors.collect('zalo') : []\"\n            :data-vv-as=\"$t('label.zalo')\"\n            name=\"zalo\"\n            :label=\"$t('label.zalo')\"\n            v-model=\"branch.zalo\"> </v-text-field>\n          </v-flex>\n        </v-layout>\n        <!-- about -->\n        <v-flex style=\"margin-top: 10px\">\n          <label>Thông tin</label>\n          <tinymce\n          id=\"d2\"\n          tabindex=\"5\"\n          class=\"mr-1\"\n          :plugins=\"plugins\"\n          :error-messages=\"errors.has('about') ? errors.collect('about') : []\"\n          :data-vv-as=\"$t('label.about')\"\n          name=\"about\"\n          toolbar1=\"formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat | codesample\"\n          toolbar2=\"\"\n          :other_options=\"{ height: '300px', images_upload_handler: handleImageAdded }\"\n          :label=\"$t('label.about')\"\n          v-model=\"branch.about\"\n          v-if=\"parseInt(stepBranch) === 2\"\n          @editorInit=\"setEditorContent($event, branch.description)\"\n          ></tinymce>\n        </v-flex>\n        <!-- description -->\n        <v-flex style=\"margin-top: 30px;\">\n          <label>Mô tả</label>\n          <tinymce\n          id=\"d1\"\n          tabindex=\"6\"\n          :plugins=\"plugins\"\n          class=\"mr-1\"\n          toolbar1=\"formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat | codesample\"\n          toolbar2=\"\"\n          :other_options=\"{ height: '300px', images_upload_handler: handleImageAdded }\"\n          placeholder=\"Nhập mô tả\"\n          :error-messages=\"errors.has('description') ? errors.collect('description') : []\"\n          :data-vv-as=\"$t('label.description')\"\n          name=\"description\"\n          :label=\"$t('label.description')\"\n          v-model=\"branch.description\"\n          v-if=\"parseInt(stepBranch) === 2\"\n          @editorInit=\"setEditorContent($event, branch.about)\"\n          ></tinymce>\n        </v-flex>\n        <v-btn\n        style=\"position: absolute; right: 46%; margin-top: 20px;\"\n        class=\"mt-5\"\n        tabindex=\"8\"\n        :loading=\"isFetchingApi\"\n        :disabled=\"isFetchingApi\"\n        color=\"primary\"\n        type=\"submit\"\n        >\n        <template v-if=\"isCreate\">\n          <v-icon left>add</v-icon> {{$t('control.create')}}\n        </template>\n        <template v-else>\n          <v-icon left>save</v-icon> {{$t('control.save')}}\n        </template> </v-btn>\n\n        <v-btn tabindex=\"9\" style=\"margin-top: 47px; left:54%;\" color=\"warning\" @click=\"stepBranch = 1\">Quay lại</v-btn>\n        <div :tabindex=\"9\"  @focus=\"backTabIndex2\"></div>\n      </v-form>\n    </v-stepper-content>\n  </v-stepper-items>\n</v-stepper>\n</template>\n<script>\nimport axios from '../../plugins/axios'\nimport { mapGetters, mapActions } from 'vuex'\nexport default{\n  name: 'BranchForm',\n  components: {\n    DataView\n  },\n  computed: {\n    ...mapGetters(['isFetchingApi']),\n    ...mapGetters('City', ['cityAll', 'districtByCity']),\n    isCreate () {\n      return this.type === 'create'\n    }\n  },\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataBranch: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  data () {\n    return {\n      stepBranch: 0,\n      districtActive: false,\n      type_branch: '',\n      status: '',\n      districtAll: {},\n      branch: {\n        type: false,\n        status: true\n      },\n      plugins: [\n        'advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker',\n        'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking',\n        'save table contextmenu directionality emoticons template paste textcolor codesample'\n      ]\n    }\n  },\n  watch: {\n    dataBranch () {\n      this.setInitData()\n    }\n  },\n  methods: {\n    ...mapActions(['fetchApi']),\n    ...mapActions('City', ['getCity', 'getDistrictByCity']),\n    setInitData () {\n      let dataBranch = { ...this.dataBranch }\n      this.branch = { ...this.branch, ...dataBranch }\n    },\n    changedCity (value) {\n      this.districtActive = true\n      this.getDistrictByCity({\n        cityId: value,\n        cb: () => {\n          this.districtAll = this.districtByCity\n        }\n      })\n    },\n    handleImageAdded: async function (file, success, failure) {\n      let formData = new FormData()\n      formData.append('file', file.blob())\n      try {\n        let response = await axios.post('/branches/upload', formData)\n        if (response.data.code === 1) {\n          success(response.data.data.path)\n        } else {\n          return false\n        }\n      } catch (err) {\n        if (err.status === 422) {\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.error'),\n            color: 'error'\n          })\n        }\n      }\n    },\n    setEditorContent (e, content) {\n      e.setContent(content || '')\n    },\n    backTabIndex () {\n      this.$refs.firstInput.focus()\n    },\n    backTabIndex2 () {\n      this.$refs.secondInput.focus()\n    },\n    // txt loại chi nhánh\n    typeBranch () {\n      if (this.branch.type) { this.type_branch = 'Chi nhánh chính' } else { this.type_branch = 'Chi nhánh phụ' }\n    },\n    // next step\n    nextStep () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          this.stepBranch = 2\n          setTimeout(() => {\n            this.$refs.secondInput.focus()\n          }, 300)\n        }\n      })\n    },\n    // khi step 1 xayr ra error thì quay về step 1\n    stepError () {\n      this.stepBranch = 1\n    },\n    // bẳt lỗi trước khi submit\n    validateBeforeSubmit () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          let branch = Object.assign({}, this.branch)\n          branch.status = branch.status ? 1 : 0\n          branch.type = branch.type ? 1 : 0\n          this.$emit('submit', branch)\n        } else {\n          this.stepBranch = 1\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.invalid'),\n            color: 'warning'\n          })\n        }\n      })\n    }\n  },\n  mounted () {\n    this.$nextTick(this.$refs.firstInput.focus)\n  },\n  created () {\n    !!this.dataBranch && this.setInitData()\n    if (this.$route.params.id) {\n      this.districtActive = true\n      this.getDistrictByCity({\n        cityId: this.dataBranch.city_id,\n        cb: () => {\n          this.districtAll = this.districtByCity\n        }\n      })\n    } else {\n      this.getDistrictByCity({\n        cityId: 1,\n        cb: () => {\n          this.districtAll = this.districtByCity\n        }\n      })\n    }\n    this.getCity()\n    this.typeBranch()\n  }\n}\n</script>\n<style>\nlabel{\n  color: #5b5a5a;\n  font-size:17px;\n}\n</style>\n"],"sourceRoot":"src/views/branch"}]}