{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/eslint-loader/index.js??ref--13-0!/home/nguyenxuancuong/Sites/hrm_fe/src/store/modules/api.js","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/store/modules/api.js","mtime":1539654458291},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/defineProperty\";\nimport _regeneratorRuntime from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/asyncToGenerator\";\n\nvar _mutations;\n\nimport axios from '@/plugins/axios.js';\nimport router from '@/router';\nimport { FETCHING_RESOURCES, FETCHING_RESOURCES_DONE, FETCHING_RESOURCES_FAIL, SET_INITIAL_STATE } from '../mutation-types';\nimport { forIn } from 'lodash';\n\nvar initState = function initState() {\n  return {\n    fetchApi: false,\n    apiErrors: null\n  };\n};\n/**\n * state\n */\n\n\nvar state = {\n  fetchApi: initState().fetchApi,\n  apiErrors: initState().apiErrors\n  /**\n   * actions\n   */\n\n};\nvar actions = {\n  fetchApi: function () {\n    var _fetchApi = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(_ref) {\n      var dispatch,\n          payload,\n          async,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch = _ref.dispatch;\n              payload = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n              async = payload.async;\n              async = async !== undefined ? async : true;\n\n              if (async) {\n                dispatch('fetchApiAsync', payload);\n              } else {\n                dispatch('fetchApiSynchronous', payload);\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function fetchApi(_x) {\n      return _fetchApi.apply(this, arguments);\n    };\n  }(),\n  fetchApiAsync: function () {\n    var _fetchApiAsync = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(_ref2) {\n      var commit,\n          dispatch,\n          state,\n          payload,\n          success,\n          error,\n          showWarnings,\n          response,\n          err,\n          msg,\n          _args2 = arguments;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref2.commit, dispatch = _ref2.dispatch, state = _ref2.state;\n              payload = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {};\n              success = payload.success, error = payload.error, showWarnings = payload.showWarnings;\n              showWarnings = showWarnings === undefined ? true : showWarnings;\n              _context2.prev = 4;\n              commit(FETCHING_RESOURCES, true);\n              _context2.next = 8;\n              return axios.request(payload);\n\n            case 8:\n              response = _context2.sent;\n              commit(FETCHING_RESOURCES_DONE);\n              _context2.t0 = success;\n\n              if (!_context2.t0) {\n                _context2.next = 14;\n                break;\n              }\n\n              _context2.next = 14;\n              return success(response.data);\n\n            case 14:\n              _context2.next = 44;\n              break;\n\n            case 16:\n              _context2.prev = 16;\n              _context2.t1 = _context2[\"catch\"](4);\n              err = null;\n\n              if (!_context2.t1.response) {\n                _context2.next = 41;\n                break;\n              }\n\n              if (!showWarnings) {\n                _context2.next = 38;\n                break;\n              }\n\n              _context2.t2 = _context2.t1.response.status;\n              _context2.next = _context2.t2 === 422 ? 24 : _context2.t2 === 403 ? 28 : _context2.t2 === 401 ? 31 : _context2.t2 === 500 ? 35 : 38;\n              break;\n\n            case 24:\n              msg = [];\n              forIn(_context2.t1.response.data.data.errors, function (err, idx) {\n                if (typeof err === 'string') {\n                  msg.push('&bullet; ' + err);\n                } else {\n                  msg.push('&bullet; ' + err[0]);\n                }\n              });\n              dispatch('showNotify', {\n                text: msg.join('<br />'),\n                color: 'warning'\n              });\n              return _context2.abrupt(\"break\", 38);\n\n            case 28:\n              dispatch('showNotify', {\n                text: 'Bạn không có quyền thực hiện tác vụ này',\n                color: 'warning'\n              });\n              router.push({\n                name: 'forbidden'\n              });\n              return _context2.abrupt(\"break\", 38);\n\n            case 31:\n              dispatch('showNotify', {\n                text: 'Phiên đăng nhập hết hạn vui lòng đăng nhập',\n                color: 'warning'\n              });\n              dispatch('clearLogged');\n              router.push({\n                name: 'login'\n              });\n              return _context2.abrupt(\"break\", 38);\n\n            case 35:\n              dispatch('showNotify', {\n                text: 'Máy chủ sảy ra sự cố vui lòng thử lại sau',\n                color: 'error'\n              });\n              router.push({\n                name: 'opps'\n              });\n              return _context2.abrupt(\"break\", 38);\n\n            case 38:\n              err = _context2.t1.response;\n              _context2.next = 42;\n              break;\n\n            case 41:\n              if (_context2.t1.request) {\n                err = _context2.t1.request;\n              } else {\n                err = _context2.t1.message;\n              }\n\n            case 42:\n              commit(FETCHING_RESOURCES_FAIL, err);\n              error && error(err);\n\n            case 44:\n              _context2.prev = 44;\n              commit(FETCHING_RESOURCES, false);\n              return _context2.finish(44);\n\n            case 47:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this, [[4, 16, 44, 47]]);\n    }));\n\n    return function fetchApiAsync(_x2) {\n      return _fetchApiAsync.apply(this, arguments);\n    };\n  }(),\n  fetchApiSynchronous: function fetchApiSynchronous(_ref3) {\n    var commit = _ref3.commit,\n        dispatch = _ref3.dispatch,\n        state = _ref3.state;\n    var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var success = payload.success,\n        error = payload.error,\n        showWarnings = payload.showWarnings;\n    showWarnings = showWarnings === undefined ? true : showWarnings;\n    commit(FETCHING_RESOURCES, true);\n    axios.request(payload).then(function (response) {\n      commit(FETCHING_RESOURCES, false);\n      commit(FETCHING_RESOURCES_DONE);\n      success && success(response.data);\n    }).catch(function (e) {\n      commit(FETCHING_RESOURCES, false);\n      var err = null;\n\n      if (e.response) {\n        if (showWarnings) {\n          switch (e.response.status) {\n            case 422:\n              var msg = [];\n              forIn(e.response.data.data.errors, function (err, idx) {\n                if (typeof err === 'string') {\n                  msg.push('&bullet; ' + err);\n                } else {\n                  msg.push('&bullet; ' + err[0]);\n                }\n              });\n              dispatch('showNotify', {\n                text: msg.join('<br />'),\n                color: 'warning'\n              });\n              break;\n\n            case 403:\n              dispatch('showNotify', {\n                text: 'Bạn không có quyền thực hiện tác vụ này',\n                color: 'warning'\n              });\n              router.push({\n                name: 'forbidden'\n              });\n              break;\n\n            case 401:\n              dispatch('showNotify', {\n                text: 'Phiên đăng nhập hết hạn vui lòng đăng nhập',\n                color: 'warning'\n              });\n              dispatch('clearLogged');\n              router.push({\n                name: 'login'\n              });\n              break;\n\n            case 500:\n              dispatch('showNotify', {\n                text: 'Máy chủ sảy ra sự cố vui lòng thử lại sau',\n                color: 'error'\n              });\n              router.push({\n                name: 'opps'\n              });\n              break;\n          }\n        }\n\n        err = e.response;\n      } else if (e.request) {\n        err = e.request;\n      } else {\n        err = e.message;\n      }\n\n      commit(FETCHING_RESOURCES_FAIL, err);\n      error && error(err);\n    });\n  }\n};\n/**\n * mutations\n */\n\nvar mutations = (_mutations = {}, _defineProperty(_mutations, FETCHING_RESOURCES_FAIL, function (state, err) {\n  state.apiErrors = err.response;\n}), _defineProperty(_mutations, FETCHING_RESOURCES_DONE, function (state) {\n  state.apiErrors = null;\n}), _defineProperty(_mutations, FETCHING_RESOURCES, function (state, isFechApi) {\n  state.fetchApi = isFechApi;\n}), _defineProperty(_mutations, SET_INITIAL_STATE, function (state) {\n  state.fetchApi = initState().fetchApi;\n  state.apiErrors = initState().apiErrors;\n}), _mutations);\n/**\n * getters\n */\n\nvar getters = {\n  allApiErrors: function allApiErrors(state) {\n    return state.apiErrors;\n  },\n  isFetchingApi: function isFetchingApi(state) {\n    return state.fetchApi;\n  }\n};\nexport default {\n  state: state,\n  actions: actions,\n  mutations: mutations,\n  getters: getters\n};",{"version":3,"sources":["/home/nguyenxuancuong/Sites/hrm_fe/src/store/modules/api.js"],"names":["axios","router","FETCHING_RESOURCES","FETCHING_RESOURCES_DONE","FETCHING_RESOURCES_FAIL","SET_INITIAL_STATE","forIn","initState","fetchApi","apiErrors","state","actions","dispatch","payload","async","undefined","fetchApiAsync","commit","success","error","showWarnings","request","response","data","err","status","msg","errors","idx","push","text","join","color","name","message","fetchApiSynchronous","then","catch","e","mutations","isFechApi","getters","allApiErrors","isFetchingApi"],"mappings":"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","sourcesContent":["import axios from '@/plugins/axios.js'\nimport router from '@/router'\nimport {\n  FETCHING_RESOURCES,\n  FETCHING_RESOURCES_DONE,\n  FETCHING_RESOURCES_FAIL,\n  SET_INITIAL_STATE\n} from '../mutation-types'\nimport { forIn } from 'lodash'\n\nconst initState = () => {\n  return {\n    fetchApi: false,\n    apiErrors: null\n  }\n}\n\n/**\n * state\n */\nconst state = {\n  fetchApi: initState().fetchApi,\n  apiErrors: initState().apiErrors\n}\n\n/**\n * actions\n */\nconst actions = {\n  async fetchApi ({ dispatch }, payload = {}) {\n    let { async } = payload\n    async = async !== undefined ? async : true\n    if (async) {\n      dispatch('fetchApiAsync', payload)\n    } else {\n      dispatch('fetchApiSynchronous', payload)\n    }\n  },\n\n  async fetchApiAsync ({ commit, dispatch, state }, payload = {}) {\n    let { success, error, showWarnings } = payload\n    showWarnings = showWarnings === undefined ? true : showWarnings\n\n    try {\n      commit(FETCHING_RESOURCES, true)\n      let response = await axios.request(payload)\n      commit(FETCHING_RESOURCES_DONE)\n      success && await success(response.data)\n    } catch (e) {\n      let err = null\n      if (e.response) {\n        if (showWarnings) {\n          switch (e.response.status) {\n            case 422:\n              let msg = []\n              forIn(e.response.data.data.errors, (err, idx) => {\n                if (typeof err === 'string') {\n                  msg.push('&bullet; ' + err)\n                } else {\n                  msg.push('&bullet; ' + err[0])\n                }\n              })\n              dispatch('showNotify', { text: msg.join('<br />'), color: 'warning' })\n              break\n            case 403:\n              dispatch('showNotify', { text: 'Bạn không có quyền thực hiện tác vụ này', color: 'warning' })\n              router.push({ name: 'forbidden' })\n              break\n            case 401:\n              dispatch('showNotify', { text: 'Phiên đăng nhập hết hạn vui lòng đăng nhập', color: 'warning' })\n              dispatch('clearLogged')\n              router.push({ name: 'login' })\n              break\n            case 500:\n              dispatch('showNotify', { text: 'Máy chủ sảy ra sự cố vui lòng thử lại sau', color: 'error' })\n              router.push({ name: 'opps' })\n              break\n          }\n        }\n        err = e.response\n      } else if (e.request) {\n        err = e.request\n      } else {\n        err = e.message\n      }\n      commit(FETCHING_RESOURCES_FAIL, err)\n      error && error(err)\n    } finally {\n      commit(FETCHING_RESOURCES, false)\n    }\n  },\n\n  fetchApiSynchronous ({ commit, dispatch, state }, payload = {}) {\n    let { success, error, showWarnings } = payload\n    showWarnings = showWarnings === undefined ? true : showWarnings\n    commit(FETCHING_RESOURCES, true)\n    axios.request(payload).then(response => {\n      commit(FETCHING_RESOURCES, false)\n      commit(FETCHING_RESOURCES_DONE)\n      success && success(response.data)\n    })\n      .catch(e => {\n        commit(FETCHING_RESOURCES, false)\n        let err = null\n        if (e.response) {\n          if (showWarnings) {\n            switch (e.response.status) {\n              case 422:\n                let msg = []\n                forIn(e.response.data.data.errors, (err, idx) => {\n                  if (typeof err === 'string') {\n                    msg.push('&bullet; ' + err)\n                  } else {\n                    msg.push('&bullet; ' + err[0])\n                  }\n                })\n                dispatch('showNotify', { text: msg.join('<br />'), color: 'warning' })\n                break\n              case 403:\n                dispatch('showNotify', { text: 'Bạn không có quyền thực hiện tác vụ này', color: 'warning' })\n                router.push({ name: 'forbidden' })\n                break\n              case 401:\n                dispatch('showNotify', { text: 'Phiên đăng nhập hết hạn vui lòng đăng nhập', color: 'warning' })\n                dispatch('clearLogged')\n                router.push({ name: 'login' })\n                break\n              case 500:\n                dispatch('showNotify', { text: 'Máy chủ sảy ra sự cố vui lòng thử lại sau', color: 'error' })\n                router.push({ name: 'opps' })\n                break\n            }\n          }\n          err = e.response\n        } else if (e.request) {\n          err = e.request\n        } else {\n          err = e.message\n        }\n        commit(FETCHING_RESOURCES_FAIL, err)\n        error && error(err)\n      })\n  }\n}\n\n/**\n * mutations\n */\nconst mutations = {\n  [FETCHING_RESOURCES_FAIL]: (state, err) => {\n    state.apiErrors = err.response\n  },\n  [FETCHING_RESOURCES_DONE]: (state) => {\n    state.apiErrors = null\n  },\n  [FETCHING_RESOURCES]: (state, isFechApi) => {\n    state.fetchApi = isFechApi\n  },\n  [SET_INITIAL_STATE]: (state) => {\n    state.fetchApi = initState().fetchApi\n    state.apiErrors = initState().apiErrors\n  }\n}\n\n/**\n * getters\n */\nconst getters = {\n  allApiErrors: (state) => state.apiErrors,\n  isFetchingApi: (state) => state.fetchApi\n}\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n}\n"]}]}