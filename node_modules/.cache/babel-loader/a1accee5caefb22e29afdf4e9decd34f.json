{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js!/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/contracts/Listting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/contracts/Listting.vue","mtime":1538401565603},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1534394480737},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/babel-loader/lib/index.js","mtime":1534394476611},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":1536410629618}],"contextDependencies":[],"result":["import _defineProperty from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/defineProperty\";\nimport _objectSpread from \"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DialogConfirm from '@/components/DialogConfirm';\nimport { debounce } from 'lodash';\nimport DataView from '@/components/DataView/DataView';\nimport { mapActions, mapGetters } from 'vuex';\nexport default _defineProperty({\n  name: 'ContractListting',\n  props: {\n    isMini: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    DataView: DataView,\n    DialogConfirm: DialogConfirm\n  },\n  data: function data() {\n    return {\n      dialogDelete: false,\n      dataViewHeight: 0,\n      dataViewName: 'contracts',\n      idContract: null,\n      params: {\n        q: ''\n      }\n    };\n  },\n  created: _objectSpread({}, mapGetters('User', ['userDetail']), mapGetters('Contracts', ['contractDetail'])),\n  methods: _objectSpread({}, mapActions('Dataview', ['removeDataviewEntry']), mapActions('Contracts', ['deleteContract', 'getContract']), {\n    // ...mapActions('User', ['getUsers']),\n    contractDetail: function contractDetail(contract) {\n      this.getContract({\n        contractId: contract.id\n      });\n      this.$router.push({\n        name: 'contract-detail',\n        params: {\n          id: contract.id\n        }\n      });\n    },\n    /// screach\n    changeSearch: debounce(function () {\n      this.filter();\n    }, 500),\n    filter: function filter() {\n      this.$refs[this.dataViewName].$emit('reload');\n    },\n    removeConfirm: function removeConfirm(id) {\n      this.idContract = id;\n      this.dialogDelete = true;\n    },\n    remove: function remove(confirm) {\n      var _this = this;\n\n      if (confirm) {\n        this.deleteContract({\n          id: this.idContract,\n          cb: function cb(response) {\n            _this.removeDataviewEntry({\n              name: 'contract',\n              data: _this.contractDetail,\n              key: 'id'\n            });\n\n            _this.$store.dispatch('showNotify', {\n              text: _this.$t('alert.success'),\n              color: 'success'\n            });\n\n            _this.dialogDelete = false;\n\n            _this.$refs[_this.dataViewName].$emit('reload');\n          },\n          error: function error(_error) {\n            if (_error.status === 404) {\n              _this.$store.dispatch('showNotify', {\n                text: _this.$t('alert.not-found'),\n                color: 'warning'\n              });\n            }\n          }\n        });\n      }\n    }\n  }),\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 168;\n\n    var query = _objectSpread({}, this.$route.query);\n\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(function () {\n        _this2.$refs[_this2.dataViewName].$emit('reload');\n      });\n      delete query.reload;\n      this.$router.replace({\n        query: query\n      });\n    }\n  }\n}, \"created\", function created() {});",{"version":3,"sources":["Listting.vue"],"names":[],"mappings":"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","sourcesContent":["    <template>\n      <v-layout ref=\"laylout\" column fill-height>\n        <div ref=\"header\">\n          <v-toolbar height=\"60px\" color=\"white\" flat>\n            <v-layout row wrap>\n             <v-flex md1 xs3 :class=\"isMini\">\n              <!--  <v-tooltip bottom> -->\n              <v-tooltip bottom>\n                <v-btn slot=\"activator\" v-if=\"canAccess('contract.create')\"\n                @click=\"$router.push({name: 'contract-create'})\"\n                class=\"mr-3 mt-3\" icon color=\"primary\"\n                >\n                <v-icon>add</v-icon\n                  ></v-btn>\n                  <span>Thêm mới</span>\n                </v-tooltip>\n                <!--  <span>Thêm mới</span> -->\n                <!-- </v-tooltip> -->\n              </v-flex>\n              <v-flex xs8 class=\"mt-1 mr-2\" :class=\"isMini && 'full-flex-basic'\">\n                <v-text-field\n                hide-details\n                single-line\n                placeholder=\"Nhập tiêu đề hợp đồng\"\n                v-model=\"params.q\"\n                @keyup=\"changeSearch\"\n                ></v-text-field>\n              </v-flex>\n            </v-layout>\n            <v-layout slot=\"extension\" v-if=\"!isMini\">\n              <v-flex sm1 class=\"text-bold text-uppercase\">\n                STT\n              </v-flex>\n              <v-flex sm2 class=\"text-bold text-uppercase\">\n               tiêu đề\n             </v-flex>\n             <v-flex sm2 class=\"text-bold text-uppercase\">\n              loại hợp đồng\n            </v-flex>\n            <v-flex  sm2 class=\"text-uppercase text-bold\">\n              tên nhân viên\n            </v-flex>\n            <v-flex sm2 class=\"text-uppercase text-bold\">\n              <v-flex sm12>ngày đăng ký</v-flex>\n              <v-flex sm12>ngày hiệu lực</v-flex>\n              <v-flex sm12>ngày  kết thúc</v-flex>\n            </v-flex>\n            <v-flex sm2 class=\"text-bold text-uppercase\">\n              trạng thái\n            </v-flex>\n            <v-flex sm1 class=\"text-bold text-uppercase\">\n              Hành động\n            </v-flex>\n          </v-layout>\n        </v-toolbar>\n      </div>\n      <v-flex xs12  class=\"border-e0-top\">\n        <data-view\n        :name=\"dataViewName\"\n        api-url=\"contracts\"\n        v-if=\"dataViewHeight\"\n        :viewHeight=\"dataViewHeight\"\n        :params=\"params\"\n        :ref=\"dataViewName\">\n        <template slot-scope=\"{items}\">\n          <v-list three-line>\n            <template v-for=\"(item, index) in items.data\">\n             <v-list-tile\n             :key=\"'item' + item.id\"\n             avatar\n             @click=\"contractDetail(item)\"\n             :inactive=\"item.id === $route.params.id\"\n             :class=\"item.id === $route.params.id && 'grey lighten-2'\"\n             >\n             <v-layout class=\"pa-2\">\n              <v-flex sm1 :class=\"isMini && 'd-none'\">\n                {{index + 1}}\n              </v-flex>\n              <v-flex  class=\"pr-2 \" sm2 :class=\"isMini && 'full-flex-basic full-max-width' \" v-if=\"item.title\">\n                {{ item.title }}\n              </v-flex>\n              <v-flex  sm2  :class=\"isMini && 'd-none'\">\n                {{item.type_txt}}\n              </v-flex>\n              <v-flex class=\"pr-5 pl-2\" sm2 :class=\"isMini && 'd-none'\">\n                {{item.user_name}}\n              </v-flex>\n              <v-flex xs2  class=\"pl-2\" :class=\"isMini  && 'd-none'\">\n               <v-flex xs12> {{item.date_sign}}</v-flex>\n               <v-flex xs12> {{item.date_effective}}</v-flex>\n               <v-flex xs12> {{item.date_expiration}}</v-flex>\n             </v-flex>\n             <v-flex xs2 class=\"pl-2\" :class=\"isMini && 'd-none'\">\n              {{item.status_txt}}\n            </v-flex>\n            <v-flex xs1 class=\"pl-1\" :class=\"isMini && 'd-none'\">\n             <v-tooltip bottom>\n              <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('contracts.update')\" icon @click.stop=\"$router.push({name: 'contract-edit', params: {id: item.id}})\">\n                <v-icon class='theme--light teal--text'>edit</v-icon>\n              </v-btn>\n              <span>Sửa</span>\n            </v-tooltip>\n            <v-tooltip bottom>\n              <v-btn slot=\"activator\" class=\"ma-0\" v-if=\"canAccess('contracts.delete')\" icon @click.stop=\"removeConfirm(item.id)\">\n                <v-icon class=\"theme--light pink--text\">delete</v-icon>\n              </v-btn>\n              <span>Xóa</span>\n            </v-tooltip>\n          </v-flex>\n        </v-layout>\n      </v-list-tile>\n      <v-divider\n      :key=\"'div' + index + item.id\"\n      v-if=\"index + 1 < items.data.length\"\n      ></v-divider>\n    </template>\n  </v-list>\n</template>\n</data-view>\n</v-flex>\n<dialog-confirm v-model=\"dialogDelete\" @input=\"remove\" />\n</v-layout>\n</template>\n<script type=\"text/javascript\">\n  import DialogConfirm from '@/components/DialogConfirm'\n  import { debounce } from 'lodash'\n  import DataView from '@/components/DataView/DataView'\n  import { mapActions, mapGetters } from 'vuex'\n  export default{\n    name: 'ContractListting',\n    props: {\n      isMini: {\n        type: Boolean,\n        default: false\n      }\n    },\n    components: {\n      DataView,\n      DialogConfirm\n    },\n    data: () => ({\n      dialogDelete: false,\n      dataViewHeight: 0,\n      dataViewName: 'contracts',\n      idContract: null,\n      params: {\n        q: ''\n      }\n    }),\n    created: {\n      ...mapGetters('User', ['userDetail']),\n      ...mapGetters('Contracts', ['contractDetail'])\n    },\n    methods: {\n      ...mapActions('Dataview', ['removeDataviewEntry']),\n      ...mapActions('Contracts', ['deleteContract', 'getContract']),\n    // ...mapActions('User', ['getUsers']),\n    contractDetail (contract) {\n      this.getContract({ contractId: contract.id })\n      this.$router.push({ name: 'contract-detail', params: { id: contract.id } })\n    },\n    /// screach\n    changeSearch: debounce(function () {\n      this.filter()\n    }, 500),\n    filter () {\n      this.$refs[this.dataViewName].$emit('reload')\n    },\n    removeConfirm (id) {\n      this.idContract = id\n      this.dialogDelete = true\n    },\n    remove (confirm) {\n      if (confirm) {\n         this.deleteContract({\n          id: this.idContract,\n          cb: (response) => {\n            this.removeDataviewEntry({\n              name: 'contract',\n              data: this.contractDetail,\n              key: 'id'\n            })\n            this.$store.dispatch('showNotify', {\n              text: this.$t('alert.success'),\n              color: 'success'\n            })\n            this.dialogDelete = false\n            this.$refs[this.dataViewName].$emit('reload')\n          },\n          error: (error) => {\n            if (error.status === 404) {\n              this.$store.dispatch('showNotify', {\n                text: this.$t('alert.not-found'),\n                color: 'warning'\n              })\n            }\n          }\n        })\n      }\n    }\n  },\n  mounted () {\n    this.dataViewHeight = this.$refs.laylout.clientHeight - 168\n    let query = { ...this.$route.query }\n    if (query.hasOwnProperty('reload')) {\n      this.$nextTick(() => {\n        this.$refs[this.dataViewName].$emit('reload')\n      })\n      delete query.reload\n      this.$router.replace({\n        query: query\n      })\n    }\n  },\n  created () {\n  }\n}\n</script>\n<style type=\"text/css\" media=\"screen\">\n\n</style>\n"],"sourceRoot":"src/views/contracts"}]}