{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/contracts/Form.vue?vue&type=template&id=c66bcfa8&class=paddingContainer&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/contracts/Form.vue","mtime":1539341011928},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n      <v-form @submit.prevent=\"validateBeforeSubmit\">\n        <v-container fluid class=\"paddingContainer\">\n          <v-layout row wrap class=\"marTop-22\">\n            <v-flex xs6 class=\"pr-2\">\n              <!-- title contract -->\n              <v-text-field\n              placeholder=\"Nhập tiêu đề hợp đồng\"\n              :error-messages=\"errors.has('title_contract') ? errors.collect('title_contract') : []\"\n              v-validate=\"'required'\"\n              :data-vv-as=\"$t('label.title_contract')\"\n              ref=\"firstInput\"\n              :tabindex=\"1\"\n              :label=\"$t('label.title_contract')\"\n              class=\"input-required\"\n              name=\"title_contract\"\n             autofocus=\"autofocus\"\n              v-model=\"contract.title\"> </v-text-field>\n              <!-- type contract -->\n            </v-flex>\n            <v-flex xs6 class=\"pr-2\">\n            <!--  <v-autocomplete\n             v-model=\"contract.employee_id\"\n             placeholder=\"Chọn tên nhân viên\"\n             :error-messages=\"errors.has('user_id') ? errors.collect('user_id') : []\"\n             v-validate=\"'required'\"\n             :items=\"employees\"\n             item-value=\"id\"\n             item-text=\"name\"\n             :label=\"$t('label.user_id')\"\n             class=\"input-required\"\n             :data-vv-as=\"$t('label.user_id')\"\n             name=\"user_id\"\n            :tabindex=\"2\"\n             >\n           </v-autocomplete> -->\n             <v-autocomplete\n             v-model=\"contract.employee_id\"\n             :items=\"employeeAll\"\n             :loading = \"isFetchingApi\"\n             v-if=\"Array.isArray(employeeAll)\"\n             @keyup=\"sreachEmployee\"\n             :error-messages=\"errors.has('user_id') ? errors.collect('user_id') : []\"\n             v-validate=\"'required'\"\n             hide-no-data\n             hide-selected\n             item-text=\"name\"\n             clearable\n             item-value=\"id\"\n             placeholder=\"Chọn tên nhân viên\"\n             :label=\"$t('label.user_id')\"\n             class=\"input-required\"\n             :data-vv-as=\"$t('label.user_id')\"\n             name=\"user_id\"\n             :tabindex=\"2\"\n                   ></v-autocomplete>\n         </v-flex>\n       </v-layout>\n       <v-layout row wrap class=\"marTop-22\">\n        <v-flex xs6>\n         <v-select\n         v-validate=\"'required'\"\n         :error-messages=\"errors.has('status') ? errors.collect('status') : []\"\n         :data-vv-as=\"$t('label.status')\"\n         name=\"status\"\n         :label=\"$t('label.status')\"\n         v-model=\"contract.status\"\n         :items=\"status\"\n         item-value=\"id\"\n         item-text=\"name\"\n         :tabindex=\"3\"\n        >\n       </v-select>\n     </v-flex>\n     <v-flex xs6>\n      <v-select\n      v-validate=\"'required'\"\n      :error-messages=\"errors.has('type') ? errors.collect('type') : []\"\n      :data-vv-as=\"$t('label.type')\"\n      name=\"type\"\n      :label=\"$t('label.type')\"\n      v-model=\"contract.type\"\n      :items=\"types\"\n      item-value=\"id\"\n      item-text=\"name\"\n      :tabindex=\"4\"\n      > </v-select>\n      <!-- status contract-->\n    </v-flex>\n  </v-layout>\n\n  <v-layout row wrap class=\"marTop-22\">\n    <v-flex xs6>\n      <!-- date_sign -->\n    <!--   <template>\n        <v-menu\n        ref=\"dateSign\"\n        :close-on-content-click=\"false\"\n        v-model=\"dateSign\"\n        :nudge-right=\"40\"\n        lazy transition=\"scale-transition\"\n        offset-y\n        full-width\n        min-width=\"290px\">\n        <v-text-field\n        placeholder=\"Nhập ngày ký\"\n        slot=\"activator\"\n        v-model=\"contract.date_sign\"\n        label=\"Ngày ký\"\n        readonly > </v-text-field>\n        <v-date-picker\n        ref=\"picker\"\n        v-model=\"contract.date_sign\"\n        :max=\"new Date().toISOString().substr(0, 10)\"\n        min=\"1950-01-01\"\n        @change=\"save\"> </v-date-picker> </v-menu>\n      </template> -->\n      <v-menu\n      ref=\"sign\"\n      :close-on-content-click=\"false\"\n      v-model=\"sign\"\n      :nudge-right=\"40\"\n      :return-value.sync=\"contract.date_sign\"\n      lazy\n      transition=\"scale-transition\"\n      offset-y\n      full-width\n      min-width=\"290px\"\n      >\n      <v-text-field\n      slot=\"activator\"\n      v-model=\"contract.date_sign\"\n      label=\"Ngày ký\"\n      :tabindex=\"5\"\n      readonly\n      ></v-text-field>\n      <v-date-picker v-model=\"contract.date_sign\" no-title scrollable>\n        <v-spacer></v-spacer>\n        <v-btn flat color=\"primary\" @click=\"sign = false\">Cancel</v-btn>\n        <v-btn flat color=\"primary\" @click=\"$refs.sign.save(contract.date_sign)\">OK</v-btn>\n      </v-date-picker>\n    </v-menu>\n  </v-flex>\n\n  <v-flex xs6>\n   <!--date_expiration-->\n   <!-- <template>\n    <v-menu\n    ref=\"dateExpiration\"\n    :close-on-content-click=\"false\"\n    v-model=\"dateExpiration\"\n    :nudge-right=\"40\"\n    lazy transition=\"scale-transition\"\n    offset-y\n    full-width\n    min-width=\"290px\">\n    <v-text-field\n    placeholder=\"Ngày  hết hạn\"\n    slot=\"activator\"\n    v-model=\"contract.date_expiration\"\n    label=\"Ngày hết hạn\"\n    readonly > </v-text-field>\n    <v-date-picker\n    ref=\"picker\"\n    v-model=\"contract.date_expiration\"\n    :max=\"new Date().toISOString().substr(0, 10)\"\n    min=\"1950-01-01\"\n    @change=\"save\"> </v-date-picker> </v-menu>\n  </template> -->\n        <v-menu\n      ref=\"expiration\"\n      :close-on-content-click=\"false\"\n      v-model=\"expiration\"\n      :nudge-right=\"40\"\n      :return-value.sync=\"contract.date_expiration\"\n      lazy\n      transition=\"scale-transition\"\n      offset-y\n      full-width\n      min-width=\"290px\"\n      >\n      <v-text-field\n      slot=\"activator\"\n      v-model=\"contract.date_expiration\"\n      label=\"Ngày hết hạn\"\n      :tabindex=\"6\"\n      readonly\n      ></v-text-field>\n      <v-date-picker v-model=\"contract.date_expiration\" no-title scrollable>\n        <v-spacer></v-spacer>\n        <v-btn flat color=\"primary\" @click=\"expiration = false\">Cancel</v-btn>\n        <v-btn flat color=\"primary\" @click=\"$refs.expiration.save(contract.date_expiration)\">OK</v-btn>\n      </v-date-picker>\n    </v-menu>\n</v-flex>\n</v-layout>\n=======\n <template>\n<v-form  @submit.prevent=\"validateBeforeSubmit\">\n        <v-container fluid>\n          <v-layout row wrap>\n            <v-flex xs6>\n               <v-text-field\n              :error-messages=\"errors.has('title') ? errors.collect('title') : []\"\n              v-validate=\"'required|min:3'\"\n              :data-vv-as=\"$t('label.title')\"\n              name=\"title\"\n              :label=\"$t('label.title') + '*'\"\n              v-model=\"contract.title\">\n            </v-text-field>\n            </v-flex>\n        <v-flex xs6>\n             <v-select\n                  v-validate=\"'required'\"\n                  :error-messages=\"errors.has('type') ? errors.collect('type') : []\"\n                  :data-vv-as=\"$t('label.type')\"\n                  name=\"type\"\n                  :label=\"$t('label.type')\"\n                  v-model=\"contract.type\"\n\n                  :items=\"types\"\n                  item-value=\"id\"\n                  item-text=\"name\">\n            </v-select>\n          </v-flex>\n        </v-layout>\n\n        <v-layout row wrap>\n            <v-flex xs6>\n                 <v-select\n                  v-validate=\"'required'\"\n                  :error-messages=\"errors.has('status') ? errors.collect('status') : []\"\n                  :data-vv-as=\"$t('label.status')\"\n                  name=\"status\"\n                  :label=\"$t('label.status')\"\n                  v-model=\"contract.status\"\n                  :items=\"status\"\n                  item-value=\"id\"\n                  item-text=\"name\">\n            </v-select>\n            </v-flex>\n\n            <v-flex xs6>\n                   <template>\n                      <v-menu\n                      ref=\"menu\"\n                      :close-on-content-click=\"false\"\n                      v-model=\"menu\"\n                      :nudge-right=\"40\"\n                      lazy transition=\"scale-transition\"\n                      offset-y\n                      full-width\n                      min-width=\"290px\">\n                      <v-text-field\n                      slot=\"activator\"\n                      v-model=\"contract.date_sign\"\n                      label=\"Ngày ký\"\n                      readonly >\n                      </v-text-field>\n\n                      <v-date-picker\n                      ref=\"picker\"\n                      v-model=\"contract.date_sign\"\n                      :max=\"new Date().toISOString().substr(0, 10)\"\n                      min=\"1950-01-01\"\n                      @change=\"save\"> </v-date-picker> </v-menu>\n                    </template>\n                </v-flex>\n        </v-layout>\n\n         <v-layout row wrap>\n            <v-flex xs6>\n                <template>\n                  <v-menu\n                  ref=\"menu1\"\n                  :close-on-content-click=\"false\"\n                  v-model=\"menu1\"\n                  :nudge-right=\"40\"\n                  lazy transition=\"scale-transition\"\n                  offset-y full-width min-width=\"290px\">\n                  <v-text-field slot=\"activator\"\n                  v-model=\"contract.date_effective\"\n                  label=\"Ngày có hiệu lực\" readonly >\n                  </v-text-field>\n\n                  <v-date-picker\n                    ref=\"picker\"\n                    v-model=\"contract.date_effective\"\n                    :max=\"new Date().toISOString().substr(0, 10)\"\n                    min=\"1950-01-01\"\n                    @change=\"save1\">\n                    </v-date-picker>\n                  </v-menu>\n                </template>\n                </v-flex>\n\n                 <v-flex xs6>\n                   <template>\n                      <v-menu\n                      ref=\"menu2\"\n                      :close-on-content-click=\"false\"\n                      v-model=\"menu2\"\n                      :nudge-right=\"40\"\n                      lazy transition=\"scale-transition\"\n                      offset-y\n                      full-width\n                      min-width=\"290px\">\n                      <v-text-field\n                      slot=\"activator\"\n                      v-model=\"contract.date_expiration\"\n                      label=\"Ngày hết hạn\"\n                      readonly >\n                      </v-text-field>\n                      <v-date-picker\n                      ref=\"picker\"\n                      v-model=\"contract.date_expiration\"\n                      :max=\"new Date().toISOString().substr(0, 10)\"\n                      min=\"1950-01-01\"\n                      @change=\"save2\"> </v-date-picker> </v-menu>\n                    </template>\n                </v-flex>\n        </v-layout>\n         <v-layout row wrap>\n              <v-flex xs6>\n                 <v-select\n                  v-validate=\"'required'\"\n                  :error-messages=\"errors.has('user_id') ? errors.collect('user_id') : []\"\n                  :data-vv-as=\"$t('label.user_id')\"\n                  name=\"user_id\"\n                  :label=\"$t('label.user_id')\"\n                  v-model=\"contract.user_id\"\n                  :items=\"userDetail\"\n                  v-if=\"Array.isArray(userDetail)\"\n                  item-value=\"id\"\n                  item-text=\"name\">\n            </v-select>\n            </v-flex>\n        </v-layout>\n        <v-flex xs12 text-xs-center>\n          <v-btn\n            :loading=\"isFetchingApi\"\n            :disabled=\"isFetchingApi\"\n            color=\"primary\"\n            type=\"submit\"\n          >\n            <template v-if=\"isCreate\">\n              <v-icon left>add</v-icon> {{$t('control.create')}}\n            </template>\n            <template v-else>\n              <v-icon left>save</v-icon> {{$t('control.save')}}\n            </template>\n         </v-btn>\n         </v-flex>\n>>>>>>> 10b62f98376126286775893ca278215d608769aa\n\n<v-layout row wrap class=\"marTop-22 marButton-22\">\n  <v-flex xs6>\n    <!-- date_effective -->\n   <!--  <template>\n      <v-menu\n      ref=\"dateEffective\"\n      :close-on-content-click=\"false\"\n      v-model=\"dateEffective\"\n      :nudge-right=\"40\"\n      lazy transition=\"scale-transition\"\n      offset-y\n      full-width\n      min-width=\"290px\">\n      <v-text-field\n      placeholder=\"Ngày  hiệu lực\"\n      slot=\"activator\"\n      v-model=\"contract.date_effective\"\n      label=\"Ngày  hiệu lực\"\n      readonly > </v-text-field>\n      <v-date-picker\n      ref=\"picker\"\n      v-model=\"contract.date_effective\"\n      :max=\"new Date().toISOString().substr(0, 10)\"\n      min=\"1950-01-01\"\n      @change=\"save\"> </v-date-picker> </v-menu>\n    </template> -->\n      <v-menu\n      ref=\"effective\"\n      :close-on-content-click=\"false\"\n      v-model=\"effective\"\n      :nudge-right=\"40\"\n      :return-value.sync=\"contract.date_effective\"\n      lazy\n      transition=\"scale-transition\"\n      offset-y\n      full-width\n      min-width=\"290px\"\n      >\n      <v-text-field\n      slot=\"activator\"\n      v-model=\"contract.date_effective\"\n      :tabindex=\"7\"\n      label=\"Ngày  hiệu lực\"\n      readonly\n      ></v-text-field>\n      <v-date-picker v-model=\"contract.date_effective\" no-title scrollable>\n        <v-spacer></v-spacer>\n        <v-btn flat color=\"primary\" @click=\"effective = false\">Cancel</v-btn>\n        <v-btn flat color=\"primary\" @click=\"$refs.effective.save(contract.date_effective)\">OK</v-btn>\n      </v-date-picker>\n    </v-menu>\n  </v-flex>\n  <v-flex xs6>\n   <v-text-field\n   placeholder=\"Nhập link hợp đồng\"\n   v-validate=\"'required'\"\n   :data-vv-as=\"$t('label.link_contract')\"\n   :tabindex=\"8\"\n   :label=\"$t('label.link_contract')\"\n   name=\"link_contract\"\n   v-model=\"contract.link\"> </v-text-field>\n </v-flex>\n</v-layout>\n<v-flex xs12 text-xs-center class=\"marTop-22\">\n  <v-btn\n  :loading=\"isFetchingApi\"\n  :disabled=\"isFetchingApi\"\n  :tabindex=\"9\"\n  color=\"primary\"\n  type=\"submit\"\n  >\n  <template v-if=\"isCreate\">\n    <v-icon left>add</v-icon> {{$t('control.create')}}\n  </template>\n  <template v-else>\n    <v-icon left>save</v-icon> {{$t('control.save')}}\n  </template>\n</v-btn>\n<div :tabindex=\"10\"  @focus=\"backTabIndex\"></div>\n</v-flex>\n</v-container>\n</v-form>\n</template>\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nexport default{\n  name: 'ContractForm',\n  computed: {\n    ...mapGetters(['isFetchingApi']),\n    ...mapGetters('Employee',['employeeAll']),\n    isCreate () {\n      return this.type === 'create'\n    }\n  },\n  props: {\n    type: {\n      type: String,\n      default: 'create'\n    },\n    dataContract: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  data () {\n    return {\n      employees: [],\n      menu: null,\n      sign: null,\n      expiration: null,\n      effective: null,\n      dateSign: false,\n      dateEffective: false,\n      dateExpiration: false,\n      contract: {\n        code: '',\n        title: '',\n        type: 0,\n        status: 0,\n        date_sign: '',\n        date_effective: '',\n        date_expiration: '',\n        employee_id: '',\n        link: ''\n      },\n<<<<<<< HEAD\n      types: [\n        { 'id': 0, 'name': 'Học việc' },\n        { 'id': 1, 'name': 'Cộng tác viên' },\n        { 'id': 2, 'name': 'Thử việc' },\n        { 'id': 3, 'name': 'Có thời hạn' },\n        { 'id': 4, 'name': 'Không thời hạn' },\n        { 'id': 5, 'name': 'Khác' }\n      ],\n      status: [\n        { 'id': 0, 'name': 'Tiêu chuẩn' },\n        { 'id': 1, 'name': 'Chấm dứt' },\n        { 'id': 2, 'name': 'Gia hạn' }\n=======\n        types: [\n        {\n          'id': 0,\n          'name': 'Học việc'\n        },\n        {\n          'id': 1,\n          'name': 'Cộng tác viên'\n        },\n        {\n          'id': 2,\n          'name': 'Thử việc'\n        },\n        {\n          'id': 3,\n          'name': 'Có thời hạn'\n        },\n        {\n          'id': 4,\n          'name': 'Không thời hạn'\n        },\n        {\n          'id': 5,\n          'name': 'Khác'\n        }\n      ],\n      status: [\n        {\n          'id' : 0,\n          'name':'Tiêu chuẩn'\n        },\n        {\n          'id' : 1,\n          'name':'Chấm dứt'\n        },\n         {\n          'id' : 2,\n          'name':'Gia hạn'\n        }\n>>>>>>> 10b62f98376126286775893ca278215d608769aa\n      ]\n    }\n  },\n  watch: {\n    dataContract () {\n      this.setInitData()\n    },\n    dateSign (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateEffective (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    },\n    dateExpiration (val) {\n      val && this.$nextTick(() => (this.$refs.picker.activePicker = 'YEAR'))\n    }\n  },\n  methods: {\n    ...mapActions(['fetchApi']),\n    ...mapActions('Employee',['getEmployees']),\n    //screach employee\n    sreachEmployee(value){\n        this.getEmployees({q: value.target.value })\n    },\n    //autofocus firsrtInput\n    backTabIndex () {\n      this.$refs.firstInput.focus()\n    },\n    //save date\n    save (date) {\n      this.$refs.dateSign.save(date)\n      this.$refs.dateEffective.save(date)\n      this.$refs.dateExpiration.save(date)\n    },\n    // thời gian đăng kí , có hiệu lực hợp đồng\n    dateConstract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 1\n      let yyyy = today.getFullYear()\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.contract.date_sign = today\n      this.contract.date_effective = today\n    },\n    // thời gian kết thúc hợp đồng\n    dateExpirationConstract () {\n      let today = new Date()\n      let dd = today.getDate()\n      let mm = today.getMonth() + 3\n      let yyyy = today.getFullYear()\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n      today = yyyy + '-' + mm + '-' + dd\n      this.contract.date_expiration = today\n    },\n    setInitData () {\n      let dataContract = { ...this.dataContract }\n      this.contract = { ...this.contract, ...dataContract }\n    },\n    //validator form\n    validateBeforeSubmit () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          console.log('data validateBeforeSubmit :', result)\n          this.$emit('submit', this.contract)\n        } else {\n          this.$store.dispatch('showNotify', {\n            text: this.$t('alert.invalid'),\n            color: 'warning'\n          })\n        }\n      })\n    }\n  },\n  mounted(){\n        //mặc định lấy 10 bản ghi\n        if(!this.employeeAll.length){\n          this.getEmployees({limit:10})\n        }\n  },\n  created () {\n    this.dateExpirationConstract()\n    this.dateConstract()\n    !!this.dataContract && this.setInitData()\n  }\n}\n</script>\n<<<<<<< HEAD\n<style scoped>\n  .marTop-22{\n   margin-top: -22px !important;\n }\n .marButton-22{\n  margin-bottom: 22px !important;\n}\n.paddingContainer{\n  padding: 0px 24px 24px 24px !important\n}\n</style>",null]}