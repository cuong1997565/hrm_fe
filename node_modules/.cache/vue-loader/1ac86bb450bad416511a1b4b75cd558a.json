{"remainingRequest":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nguyenxuancuong/Sites/hrm_fe/src/views/plansHrm/FormCandidate.vue?vue&type=style&index=0&id=696fa163&scoped=true&lang=css&","dependencies":[{"path":"/home/nguyenxuancuong/Sites/hrm_fe/src/views/plansHrm/FormCandidate.vue","mtime":1543308919807},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/cache-loader/dist/cjs.js","mtime":1538403001796},{"path":"/home/nguyenxuancuong/Sites/hrm_fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.scroll-y {\n  height: 360px;\n  overflow-y: scroll;\n}\n.lb {\n  margin-top: 17px;\n  margin-bottom: -12px;\n  color: #67757c;\n  height: 20px;\n  line-height: 20px;\n  max-width: 90%;\n  overflow: hidden;\n  pointer-events: none;\n  text-overflow: ellipsis;\n  top: 6px;\n  transform-origin: top left;\n  white-space: nowrap;\n  font-size: 16px;\n  line-height: 1;\n  cursor: pointer;\n}\n",{"version":3,"sources":["FormCandidate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FormCandidate.vue","sourceRoot":"src/views/plans","sourcesContent":["<template>\n  <v-form @submit.prevent=\"submitFormCandidate\" class=\"pa-0\">\n    <v-card class=\"pa-0\">\n      <v-card-title class=\"pt-3\">\n        <span class=\"headline\" width=\"100%\" style=\"margin:0 auto\">Thêm hồ sơ ứng viên</span>\n      </v-card-title>\n      <v-divider></v-divider>\n      <v-card-text class=\"pt-0\">\n        <v-container grid-list-md style=\"padding-top: 0px !important;padding-bottom: 0px !important\"\n                     class=\"white scroll-y\">\n          <v-layout row wrap>\n            <v-flex xs6>\n              <v-text-field\n                ref=\"firstInputCandidate\"\n                tabindex=\"1\"\n                :error-messages=\"errors.has('candidate.name') ? errors.collect('candidate.name') : []\"\n                v-validate=\"'required|min:3'\"\n                :data-vv-as=\"$t('label.name')\"\n                name=\"candidate.name\"\n                placeholder=\"Xin vui lòng nhập tên\"\n                :label=\"$t('label.name')\"\n                class=\"input-required\"\n                autofocus\n                v-model=\"candidate.name\">\n              </v-text-field>\n\n              <v-text-field\n                tabindex=\"3\"\n                :error-messages=\"errors.has('candidate.phone') ? errors.collect('candidate.phone') : []\"\n                v-validate=\"'numeric|min:10|max:12'\"\n                :data-vv-as=\"$t('label.phone')\"\n                name=\"candidate.phone\"\n                placeholder=\"Xin vui lòng nhập số điện thoại\"\n                :label=\"$t('label.phone')\"\n                v-model=\"candidate.phone\">\n              </v-text-field>\n\n            </v-flex>\n\n            <v-flex xs6>\n              <v-text-field\n                tabindex=\"2\"\n                :error-messages=\"errors.has('candidate.email') ? errors.collect('candidate.email') : []\"\n                v-validate=\"'required|min:3'\"\n                :data-vv-as=\"$t('label.email')\"\n                placeholder=\"Xin vui lòng nhập email\"\n                name=\"candidate.email\"\n                :label=\"$t('label.email')\"\n                class=\"input-required\"\n                v-model=\"candidate.email\">\n              </v-text-field>\n\n              <v-text-field\n                tabindex=\"4\"\n                :error-messages=\"errors.has('candidate.source') ? errors.collect('candidate.source') : []\"\n                v-validate=\"'url:require_protocol'\"\n                :data-vv-as=\"$t('label.source')\"\n                name=\"candidate.source\"\n                placeholder=\"Chọn source\"\n                :label=\"$t('label.source')\"\n                v-model=\"candidate.source\">\n              </v-text-field>\n\n            </v-flex>\n          </v-layout>\n\n          <v-layout row wrap style=\"margin-top:-15px\">\n            <v-flex xs6>\n              <p class=\"lb\">Chức danh</p>\n              <v-tooltip bottom>\n                <v-autocomplete\n                  tabindex=\"5\"\n                  slot=\"activator\"\n                  label=\"Chức danh\"\n                  v-validate=\"'required'\"\n                  v-model=\"candidate.position_id\"\n                  :items=\"positionsCandidate\"\n                  item-text=\"name\"\n                  item-value=\"id\"\n                  :data-vv-as=\"$t('label.name_position')\"\n                  :error-messages=\"errors.has('candidate.position') ? errors.collect('candidate.position') : []\"\n                  :name=\"'candidate.position'\"\n                  placeholder=\"Chức danh\"\n                  single-line>\n                  <template slot=\"no-data\">\n                    <v-list-tile>\n                      <v-list-tile-title style=\"color:blue\">\n                        Không tìm thấy chức danh\n                      </v-list-tile-title>\n                    </v-list-tile>\n                  </template>\n                </v-autocomplete>\n                <span>Chọn chức danh</span>\n              </v-tooltip>\n              <v-datetime-picker\n                label=\"Thời gian phỏng vấn\"\n                placeholder=\"Chọn thời gian phỏng vấn\"\n                v-model=\"candidate.time_interview\">\n              </v-datetime-picker>\n            </v-flex>\n\n            <v-flex xs6>\n              <v-select\n                tabindex=\"6\"\n                :items=\"status\"\n                v-model=\"candidate.status\"\n                item-text=\"name\"\n                item-value=\"id\"\n                name=\"status\"\n                :label=\"$t('label.status')\"\n              ></v-select>\n\n              <v-menu\n                ref=\"dateApply\"\n                :close-on-content-click=\"false\"\n                v-model=\"dateApply\"\n                :nudge-right=\"40\"\n                :return-value.sync=\"candidate.date_apply\"\n                lazy\n                transition=\"scale-transition\"\n                offset-y\n                full-width\n                min-width=\"290px\"\n              >\n                <v-text-field\n                  slot=\"activator\"\n                  tabindex=\"8\"\n                  v-model=\"candidate.date_apply\"\n                  label=\"Chọn ngày nộp đơn\"\n                  readonly\n                ></v-text-field>\n                <v-date-picker v-model=\"candidate.date_apply\" no-title scrollable>\n                  <v-spacer></v-spacer>\n                  <v-btn flat color=\"primary\" @click=\"dateApply = false\">Cancel</v-btn>\n                  <v-btn flat color=\"primary\" @click=\"$refs.dateApply.save(candidate.date_apply)\">OK</v-btn>\n                </v-date-picker>\n              </v-menu>\n            </v-flex>\n\n          </v-layout>\n          <v-layout row wrap style=\"margin-top:-15px\">\n            <v-flex xs12>\n              <v-combobox\n                name=\"interview_by\"\n                v-model=\"candidate.interview_by\"\n                v-if=\"Array.isArray(employeeAll)\"\n                :items=\"employeeAll\"\n                @keyup=\"searchEmployee\"\n                label=\"Người phỏng vấn\"\n                multiple\n                item-value=\"id\"\n                item-text=\"name\"\n                chips\n                clearable\n                @input=\"checkInput\"\n              >\n                <template\n                  slot=\"selection\"\n                  slot-scope=\"data\"\n                >\n                  <v-chip\n                    :selected=\"data.selected\"\n                    close\n                    class=\"chip--select-multi\"\n                    @input=\"removeInterview(data.item)\"\n                  >\n                    <v-list-tile-title v-html=\"data.item.name\"></v-list-tile-title>\n                  </v-chip>\n                </template>\n\n              </v-combobox>\n            </v-flex>\n          </v-layout>\n        </v-container>\n      </v-card-text>\n      <v-divider></v-divider>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn tabindex=\"10\" color=\"error\" flat @click.native=\"closeDialog('Candidate')\">Hủy bỏ</v-btn>\n        <v-btn tabindex=\"11\" class=\"green--text text-uppercase\" flat type=\"submit\"><span v-if=\"isEditCandidate!==0\">Lưu lại</span><span\n          v-else>Thêm mới</span></v-btn>\n        <div :tabindex=\"12\" @focus=\"backTabIndex('candidate')\"></div>\n      </v-card-actions>\n    </v-card>\n  </v-form>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\nimport { map, debounce } from 'lodash'\nexport default {\n  name: 'FormCandidate',\n  data () {\n    return {\n      isLoadingEmployee: false,\n      dateApply: false,\n      candidate: {\n        name: '',\n        email: '',\n        phone: '',\n        source: '',\n        date_apply: '',\n        time_interview: '',\n        plan_id: '',\n        position_id: '',\n        status: 0,\n        interview_by: []\n      },\n      status: [\n        { 'id': 0, 'name': 'Mới' },\n        { 'id': 1, 'name': 'Chờ kết quả' },\n        { 'id': 2, 'name': 'Trượt' },\n        { 'id': 3, 'name': 'Đỗ' },\n        { 'id': 4, 'name': 'Danh sách đen' }\n      ],\n      isEditCandidate: null,\n      defaultValues: {}\n    }\n  },\n  props: {\n    planId: {\n      type: Number,\n      default: 0\n    },\n    positionsCandidate: {\n      type: Array,\n      default: () => []\n    }\n  },\n  watch: {\n    positionsCandidate (val) {\n      this.$validator.reset()\n      this.dateCandidate()\n    }\n  },\n  computed: {\n    ...mapGetters('Employee', ['employeeAll'])\n  },\n  methods: {\n    ...mapActions(['showNotify']),\n    ...mapActions('Candidate', ['createCandidate', 'updateCandidate', 'deleteCandidate']),\n    ...mapActions('Employee', ['getEmployees']),\n    dateCandidate () {\n      let today = new Date()\n      let dd = this.formatTime(today.getDate())\n      let mm = this.formatTime(today.getMonth() + 1)\n      let yyyy = today.getFullYear()\n      today = yyyy + '-' + mm + '-' + dd\n      this.candidate.date_apply = today\n    },\n    formatTime (type) {\n      if (type < 10) {\n        return '0' + type\n      } else {\n        return type\n      }\n    },\n    formatDate (d) {\n      // format neu < 10 thi them 0 dang truoc\n      let mm = this.formatTime(d.getMonth() + 1)\n      let dd = this.formatTime(d.getDate())\n      let hour = this.formatTime(d.getHours())\n      let minute = this.formatTime(d.getMinutes())\n      let second = this.formatTime(d.getSeconds())\n      let dateFormat = [d.getFullYear(), mm, dd].join('-') + ' ' +\n          [hour, minute, second].join(':')\n      return dateFormat\n    },\n    submitFormCandidate () {\n      this.$validator.validateAll().then(result => {\n        if (result) {\n          let data = { ...this.candidate }\n          if (data.interview_by) {\n            data.interview_by = map(data.interview_by, 'id')\n          }\n          if (data.time_interview) {\n            data.time_interview = this.formatDate(data.time_interview)\n          }\n          data.plan_id = this.planId\n          console.log('data', data)\n          this.createCandidate({\n            candidate: data,\n            cb: (response) => {\n              this.candidate = Object.assign({}, this.defaultValues)\n              this.showNotify({\n                color: 'success',\n                text: this.$t('alert.plan.success_create_candidate')\n              })\n              this.closeDialog()\n            }\n          })\n        } else {\n          this.showNotify({\n            color: 'warning',\n            text: this.$t('alert.invalid')\n          })\n        }\n      })\n      // this.$emit('submit')\n    },\n    searchEmployee: debounce(function (value) {\n      this.isLoadingEmployee = true\n      this.getEmployees({ params: { q: value.target.value, limit: 10 } })\n      setTimeout(() => {\n        this.isLoadingEmployee = false\n      }, 500)\n    }, 500),\n    removeInterview (item) {\n      const index = this.candidate.interview_by.indexOf(item)\n      if (index >= 0) this.candidate.interview_by.splice(index, 1)\n    },\n    closeDialog () {\n      this.$emit('closeDialogCandidate', false)\n    },\n    checkInput (val) {\n      if (val.length) {\n        for (let i = 0; i < val.length; i++) {\n          if (typeof val[i] !== 'object') {\n            val.splice(i, 1)\n          }\n        }\n      }\n    }\n  },\n  mounted () {\n  }\n}\n</script>\n\n<style scoped>\n  .scroll-y {\n    height: 360px;\n    overflow-y: scroll;\n  }\n  .lb {\n    margin-top: 17px;\n    margin-bottom: -12px;\n    color: #67757c;\n    height: 20px;\n    line-height: 20px;\n    max-width: 90%;\n    overflow: hidden;\n    pointer-events: none;\n    text-overflow: ellipsis;\n    top: 6px;\n    transform-origin: top left;\n    white-space: nowrap;\n    font-size: 16px;\n    line-height: 1;\n    cursor: pointer;\n  }\n</style>\n"]}]}